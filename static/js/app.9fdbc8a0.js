(function(){"use strict";var e={6184:function(e,t,s){var n=s(6799),i=s.n(n);i().wrapAll(),i().level=1,i().level=n.LogLevel.Verbose;var r=s(7195),o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{attrs:{id:"app-child"},on:{contextmenu:function(e){e.preventDefault()}}},[t("router-view"),e.alertFlag?t("DefaultAlert"):e._e(),e.infoAlertFlag?t("InfoAlert"):e._e()],1)},a=[],c=s(6318),l=(s(7658),s(2782)),u=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"content-container default-alert"},[t("div",{staticClass:"alert-holder"},[e.alert.header?t("span",{staticClass:"header"},[e._v(" "+e._s(e.alert.header)+" ")]):e._e(),e.alert.message?t("div",{staticClass:"message-holder",domProps:{innerHTML:e._s(e.alert.message)}}):e._e(),"yes_no"===e.alert.type.toLowerCase()?t("div",{staticClass:"buttons-holder yes-no"},[t("button",{on:{click:e.confirmClick}},[e._v("ДА")]),t("button",{on:{click:e.rejectClick}},[e._v("НЕТ")])]):t("div",{staticClass:"buttons-holder ok"},[t("button",{on:{click:e.confirmClick}},[e._v("OK")])])])])},d=[],p=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let m=class extends l.w3{get alert(){return this.$store.getters["ourExtension/layoutsData/alerts/getFirstAlert"]()}confirmClick(){this.$store.dispatch("ourExtension/layoutsData/alerts/confirmClick")}rejectClick(){this.$store.dispatch("ourExtension/layoutsData/alerts/rejectClick")}};m=p([(0,l.wA)({components:{}})],m);var f=m,h=f,g=s(1001),y=(0,g.Z)(h,u,d,!1,null,null,null),v=y.exports,b=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"infoAlert",staticClass:"info-alert",class:{green:e.green,red:e.red},on:{click:e.clickHandler}},[t("span",{staticClass:"message-holder",domProps:{innerHTML:e._s(e.infoAlert.message)}})])},S=[],w=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let P=class extends l.w3{constructor(...e){super(...e),(0,c.Z)(this,"currentTimeout",void 0)}get cancellationToken(){return this.$store.state.ourExtension.layoutsData.alerts.infoAlertState.cancellationToken}get infoAlert(){return this.$store.getters["ourExtension/layoutsData/alerts/getInfoAlert"]()}set infoAlert(e){this.$store.state.ourExtension.layoutsData.alerts.infoAlertState.currentMessage=e}get green(){return"green"===this.infoAlert.type?.toLowerCase()}get red(){return"red"===this.infoAlert.type?.toLowerCase()}cancellationTokenWather(){this.cancellationToken&&(this.currentTimeout&&clearTimeout(this.currentTimeout),this.infoAlert=null)}mounted(){this.showingAnimation()}showingAnimation(){const e=this.$refs.infoAlert;if(e){const t=e.getBoundingClientRect().height;this.animationProcessing(e,t);let s=5e3;this.infoAlert.time&&(s=this.infoAlert.time),this.currentTimeout=setTimeout(this.closingAnimation,s)}}animationProcessing(e,t){t<0||(e.style.top=-t+"px",this.currentTimeout=setTimeout((()=>{t-=2,this.animationProcessing(e,t)}),0))}closingAnimation(){const e=this.$refs.infoAlert;if(e){const t=e.getBoundingClientRect().height;this.closingAnimationProcessing(e,0,t)}}closingAnimationProcessing(e,t,s){t-=2,t<-s?this.infoAlert=null:(e.style.top=t+"px",this.currentTimeout=setTimeout((()=>{this.closingAnimationProcessing(e,t,s)}),0))}clickHandler(){const e={message:this.infoAlert.message,type:"ok"};this.$store.dispatch("ourExtension/layoutsData/alerts/addToAlertQueue",e)}};w([(0,l.RL)("cancellationToken",{deep:!0})],P.prototype,"cancellationTokenWather",null),P=w([(0,l.wA)({components:{}})],P);var _=P,C=_,A=(0,g.Z)(C,b,S,!1,null,null,null),x=A.exports,k=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"content-container fatal-error-alert"},[e.listFlag?t("FatalSelectList",{attrs:{items:e.items},on:{close:e.closeList,selectItem:e.selectItem}}):e._e(),t("div",{staticClass:"alert-holder"},[t("span",{staticClass:"header"},[e._v(" ФАТАЛЬНАЯ ОШИБКА! ")]),t("div",{staticClass:"message-holder",domProps:{innerHTML:e._s(e.message)}}),t("div",{staticClass:"buttons-holder fatal-error"},[t("button",{on:{click:e.restart}},[e._v("Перезагрузить")])])])],1)},F=[],E=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"mainContainer",staticClass:"material-select-container"},[t("div",{staticClass:"material-select-content-container"},[t("div",{staticClass:"material-select-header"},[t("button",{staticClass:"home-button",on:{click:e.homeButtonClick}},[t("img",{attrs:{src:s(7821)}})]),e._m(0)]),t("div",{staticClass:"material-select-center"},e._l(e.listItems,(function(s,n){return t("ItemButton",{key:n,attrs:{listInstance:s},on:{selectItem:e.selectItem,activateItem:e.activateItem,deactivateItems:e.deactivateItems}})})),1),t("div",{staticClass:"file-select-footer"})])])},D=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("button",{staticClass:"points-button"},[t("img",{attrs:{src:s(7295)}})])}],O=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"button-wrapper"},[t("div",{staticClass:"material-select-button",class:{active:e.listInstance.isActive},on:{click:e.firstClickHandler}},[t("div",{staticClass:"material-info"},[t("span",[e._v(e._s(e.listInstance.name))])]),t("button",{staticClass:"select-material-button",on:{click:e.confirmClickHandler}},[e._v("Выбрать")])]),t("hr")])},B=[],R=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let I=class extends l.w3{constructor(...e){super(...e),(0,c.Z)(this,"listInstance",void 0)}firstClickHandler(){this.listInstance.isActive?this.$emit("deactivateItems"):(this.$emit("deactivateItems"),this.$emit("activateItem",this.listInstance.name),this.listInstance.isActive=!0)}confirmClickHandler(){this.$emit("selectItem",this.listInstance.name)}};R([(0,l.fI)()],I.prototype,"listInstance",void 0),I=R([(0,l.wA)({components:{}})],I);var L=I,T=L,M=(0,g.Z)(T,O,B,!1,null,null,null),W=M.exports,N=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let U=class extends l.w3{constructor(...e){super(...e),(0,c.Z)(this,"items",void 0),(0,c.Z)(this,"listItems",[])}mounted(){const e=this.$refs.mainContainer;e&&(e.style.zIndex="10");for(const t of this.items)this.listItems.push({isActive:!1,name:t})}deactivateItems(){for(const e of this.listItems)e.isActive=!1}activateItem(e){for(const t of this.listItems)e===t.name.toLowerCase()&&(t.isActive=!0)}homeButtonClick(){this.$emit("close")}selectItem(e){this.$emit("selectItem",e)}};N([(0,l.fI)()],U.prototype,"items",void 0),U=N([(0,l.wA)({components:{ItemButton:W}})],U);var j=U,H=j,Z=(0,g.Z)(H,E,D,!1,null,null,null),Q=Z.exports,z=s(3098);const J=Object.freeze({APP_NAME:"fluidd",HEADER_HEIGHT:56,DEFAULTS:{CAMERA_URL:"/webcam?action=stream"},NETWORK_REQUEST_TIMEOUT:0,KLIPPY_RETRY_DELAY:1500,SOCKET_RETRY_DELAY:2e3,SOCKET_PING_INTERVAL:1e4,CONSOLE_HISTORY_RETENTION:1e3,CONSOLE_RECEIVE_PREFIX:"",CONSOLE_SEND_PREFIX:"$ ",CONSOLE_COMMAND_HISTORY:20,CHART_HISTORY_RETENTION:1200,JOB_HISTORY_LOAD:50,KLIPPY_DISCONNECTED_REDIRECT:"/configuration",LOCAL_CARDSTATE_STORAGE_KEY:"cardState",LOCAL_CARDLAYOUT_STORAGE_KEY:"cardLayout2",LOCAL_INSTANCES_STORAGE_KEY:"appInstances",MOONRAKER_DB:{fluidd:{NAMESPACE:"fluidd",ROOTS:{uiSettings:{name:"uiSettings",dispatch:"config/initUiSettings"},macros:{name:"macros",dispatch:"macros/initMacros"},console:{name:"console",dispatch:"console/initConsole"},charts:{name:"charts",dispatch:"charts/initCharts"},cameras:{name:"cameras",dispatch:"cameras/initLegacyCameras"},layout:{name:"layout",dispatch:"layout/initLayout"}}},webcams:{NAMESPACE:"webcams",ROOTS:{webcams:{dispatch:"cameras/initCameras"}}}},MOONRAKER_COMPONENTS:{auth:{name:"authorization",dispatch:"auth/init"},power:{name:"power",dispatch:"power/init"},updateManager:{name:"update_manager",dispatch:"version/init"},history:{name:"history",dispatch:"history/init"},timelapse:{name:"timelapse",dispatch:"timelapse/init"},announcements:{name:"announcements",dispatch:"announcements/init"},webcams:{name:"webcam",dispatch:"webcams/init"},jobQueue:{name:"job_queue",dispatch:"jobQueue/init"}},CONFIG_SERVICE_MAP:[{filename:"moonraker.conf",service:"moonraker",link:"https://moonraker.readthedocs.io/en/latest/configuration/"},{filename:"webcam.txt",service:"webcamd"},{filename:"crowsnest.conf",service:"crowsnest",link:"https://github.com/mainsail-crew/crowsnest"},{filename:"klipperscreen.conf",service:"KlipperScreen",link:"https://klipperscreen.readthedocs.io/en/latest/"},{filename:"mooncord-webcam.json",service:"webcamd",link:"https://github.com/eliteSchwein/mooncord"},{prefix:"mooncord",service:"MoonCord",link:"https://github.com/eliteSchwein/mooncord"},{filename:"telegram.conf",service:"moonraker-telegram-bot",link:"https://github.com/nlef/moonraker-telegram-bot/wiki/Sample-config"},{suffix:".cfg",service:"klipper",link:"https://www.klipper3d.org/Config_Reference.html"}],FILTERED_FILES_PREFIX:[".thumbs","thumbs"],FILTERED_FILES_EXTENSION:[".ignoreme"],DOCS_ROOT:"https://docs.fluidd.xyz",DOCS_REQUIRED_CONFIGURATION:"https://docs.fluidd.xyz/configuration/initial_setup",DOCS_MULTIPLE_INSTANCES:"https://docs.fluidd.xyz/configuration/multiple_printers",DOCS_MOONRAKER_COMPONENTS:"https://docs.fluidd.xyz/configuration/moonraker",DOCS_AUTH_LOST_PASSWORD:"https://docs.fluidd.xyz/authorization#lost-password",DOCS_AUTH:"https://docs.fluidd.xyz/authorization",GITHUB_REPO:"https://github.com/fluidd-core/fluidd",VUE_APP_I18N_LOCALE:"",VUE_APP_I18N_FALLBACK_LOCALE:"",VERSION:"",HASH:""}),K=(Object.freeze({dash:z.V7Q,account:z.rI3,addAccount:z.psO,help:z.Xc_,motion:z.xAI,limits:z.alQ,send:z.NN1,open:z.TpR,move:z.MJZ,tabs:z.S8s,menu:z.SXi,menuAlt:z.$Qi,dots:z.XMI,dotsGrid:z.kvM,drag:z.Apr,chart:z.M7S,power:z.ZKv,powerCycle:z.KQE,powerOn:z.vbV,powerOff:z.Baq,home:z.vgA,close:z.r5M,refresh:z.jcD,restart:z.RZA,restartAlert:z.xnG,update:z.NZS,warning:z.jZI,error:z.m8t,thermometer:z.lKA,bell:z.QWc,fireAlert:z.Gf4,snowflakeAlert:z.E9l,circle:z.mdD,blankCircle:z.Ws4,markedCircle:z.Ss_,checkedCircle:z.k6A,checkboxBlank:z.Ii0,checkboxMarked:z.$Cb,alertCircle:z.fr4,folderAdd:z.nK5,folderUp:z.WSy,folderUpload:z.UvF,folder:z.in3,fileUpload:z.xyB,fileAdd:z.t9M,inProgress:z.nVh,progressUpload:z.w6W,up:z.XHH,down:z.dYk,left:z.J3k,right:z.aIO,tune:z.S3d,zUp:z.vnu,zDown:z.JbO,expandHorizontal:z.fW3,cog:z.Shd,cogs:z.pcj,save:z.JTj,estop:z.F$s,fire:z.xRl,tools:z.tpc,minus:z.UHA,plus:z.qX5,check:z.oL1,console:z.tvi,clock:z.R1X,formatLineSpacing:z.tCT,layersTripleOutline:z.$lM,chevronUp:z.Waq,chevronDown:z.CW,chevronRight:z.zrb,chevronLeft:z.gAv,timer:z.Qq3,fileCode:z.nqy,fileRefresh:z.dTo,files:z.iq9,file:z.iA5,fileCancel:z.$V3,pause:z.Wa1,cancel:z.UEB,cancelled:z.M_e,play:z._86,resume:z._86,stop:z.fUz,reprint:z.S0t,printer:z.S0t,download:z.OGU,rename:z.o4Y,delete:z.x9U,camera:z.pJw,fan:z.qXi,pencil:z.r9,pencilLock:z.gIB,magnify:z.I0v,magnifyPlus:z.GZ8,magnifyMinus:z.ElP,printer3d:z.SJO,printer3dNozzle:z.Euj,printer3dNozzleAlert:z.iaO,bedMesh:z.fc6,host:z.hu7,history:z.BBX,filter:z.Qbm,commit:z.NHO,cloudCheck:z.Q_T,cloudAlert:z.NtT,cubeScan:z._iY,consoleLine:z.aTZ,lock:z.d5D,lockOpen:z._Ub,lockReset:z.LtG,reset:z.mBz,tempError:z.xZH,contentCopy:z.a0Z,apps:z.J7K,shieldAccount:z.MBn,retract:z.U4l,codeJson:z.UgG,desktopTower:z.hu7,harddisk:z.V72,message:z.X6X,list:z.Ir0,fullScreen:z.h40,video:z.Ydh,snooze:z.jGH,chip:z.sVq,viewHeadline:z.dpx,absolutePositioning:z.LKY,relativePositioning:z.vh0,openInNew:z.fOx,imageSizeSelectLarge:z.QXv,listStatus:z.jIK,previousLayer:z.Mf2,currentLayer:z.wCz,nextLayer:z.DDn,moves:z.vh0,extrusions:z.JX8,retractions:z.U4l,parts:z.RIj,folderOpen:z.IC9,fileZip:z.Z9B,fileZipAdd:z.nj8,jobQueue:z.FTH,enqueueJob:z.mii}),Object.freeze({onServiceRestart:"onServiceRestart",onServiceStop:"onServiceStop",onServiceStart:"onServiceStart",onDevicePowerToggle:"onDevicePowerToggle",onHomeAll:"onHomeAll",onHomeXY:"onHomeXY",onHomeX:"onHomeX",onHomeY:"onHomeY",onHomeZ:"onHomeZ",onQGL:"onQGL",onZTilt:"onZTilt",onBedScrewsAdjust:"onBedScrewAdjust",onBedScrewsCalculate:"onBedScrewsCalculate",onBedTiltCalibrate:"onBedTiltCalibrate",onDeltaCalibrate:"onDeltaCalibrate",onPrintPause:"onPrintPause",onPrintCancel:"onPrintCancel",onPrintResume:"onPrintResume",onMacro:"onMacro",onSetSpeed:"onSetSpeed",onSetFlow:"onSetFlow",onSetPressureAdvance:"onSetPressureAdvance",onSetFanSpeed:"onSetFanSpeed",onSetOutputPin:"onSetOutputPin",onZAdjust:"onZAdjust",onZApply:"onZApply",onSaveConfig:"onSaveConfig",onRetract:"onRetract",onExtrude:"onExtrude",onMeshCalibrate:"onMeshCalibrate",onKlipperRestart:"klipperRestart",onKlipperFirmwareRestart:"klipperFirmwareRestart",onSetVelocity:"onSetVelocity",onSetAcceleration:"onSetAcceleration",onSetDeceleration:"onSetDeceleration",onSetSCV:"onSetSCV",onSetRetractLength:"onSetRetractLength",onSetRetractSpeed:"onSetRetractSpeed",onSetUnretractSpeed:"onSetUnretractSpeed",onSetUnretractExtraLength:"onSetUnretractExtraLength",onExtruderChange:"onExtruderChange",onLoadLanguage:"onLoadLanguage",onFileSystem:"onFileSystem",onJobQueue:"onJobQueue",onTimelapseSaveFrame:"onTimelapseSaveFrame",onManualProbe:"onManualProbe",onProbeCalibrate:"onProbeCalibrate",onZEndstopCalibrate:"onZEndstopCalibrate",onQueryEndstops:"onQueryEndstops",onQueryProbe:"onQueryProbe",onVersionRefresh:"onVersionRefresh",onSyncExtruder:"onSyncExtruder",onStepperEnable:"onStepperEnable"})),G=Object.freeze([{name:"English",code:"en"},{name:"Čeština",code:"cs"},{name:"简体中文",code:"zh-CN"},{name:"繁體中文",code:"zh-HK"},{name:"Deutsch",code:"de"},{name:"Español",code:"es"},{name:"Français",code:"fr"},{name:"Italiano",code:"it"},{name:"Magyar",code:"hu"},{name:"Nederlands",code:"nl"},{name:"Português",code:"pt"},{name:"Русский",code:"ru"},{name:"Українська",code:"uk"},{name:"한국어",code:"ko"},{name:"العربية",code:"ar"},{name:"日本語",code:"ja"}]),V=Object.freeze({iso:{locale:"lt",options:{day:"2-digit",month:"2-digit",year:"numeric"},suffix:" (ISO 8601)"},digits2:{options:{day:"2-digit",month:"2-digit",year:"numeric"}},short:{options:{day:"2-digit",month:"short",year:"numeric"}}}),Y=Object.freeze({iso:{locale:"lt",options:{hour:"2-digit",minute:"2-digit",hour12:!1},suffix:" (ISO 8601)"},hours12:{options:{hour:"2-digit",minute:"2-digit",hour12:!0}},hours24:{options:{hour:"2-digit",minute:"2-digit",hour12:!1}}}),q=(e,t)=>{r.ZP.$socket?r.ZP.$socket.emit(e,t):i().warn("Socket emit denied, socket not ready.",e,t)},X={async machineServicesRestart(e){const t=K.onServiceRestart;q("machine.services.restart",{dispatch:"void",params:{service:e},wait:t})},async machineServicesStart(e){const t=K.onServiceStart;q("machine.services.start",{dispatch:"void",params:{service:e},wait:t})},async machineServicesStop(e){const t=K.onServiceStop;q("machine.services.stop",{dispatch:"void",params:{service:e},wait:t})},async machineReboot(){q("machine.reboot",{dispatch:"void"})},async machineShutdown(){q("machine.shutdown",{dispatch:"void"})},async machineUpdateStatus(e=!1){q("machine.update.status",{dispatch:"version/onUpdateStatus",params:{refresh:e},wait:K.onVersionRefresh})},async machineUpdateRefresh(e){q("machine.update.refresh",{dispatch:"version/onUpdateStatus",params:{name:e},wait:K.onVersionRefresh})},async machineUpdateRecover(e,t=!1){const s="moonraker"===e?"version/onUpdatedMoonraker":"klipper"===e?"version/onUpdatedKlipper":"version/onUpdatedClient";q("machine.update.recover",{dispatch:s,params:{name:e,hard:t}})},async machineUpdateMoonraker(){q("machine.update.moonraker",{dispatch:"version/onUpdatedMoonraker"})},async machineUpdateKlipper(){q("machine.update.klipper",{dispatch:"version/onUpdatedKlipper",params:{include_deps:!0}})},async machineUpdateClient(e){const t="fluidd"===e?"version/onUpdatedFluidd":"version/onUpdatedClient";q("machine.update.client",{dispatch:t,params:{name:e}})},async machineUpdateSystem(){q("machine.update.system",{dispatch:"version/onUpdatedSystem"})},async machineUpdateAll(){q("machine.update.full",{dispatch:"version/onUpdatedAll"})},async machineProcStats(){q("machine.proc_stats",{dispatch:"server/onMachineProcStats"})},async machineSystemInfo(){q("machine.system_info",{dispatch:"server/onMachineSystemInfo"})},async machineDevicePowerDevices(){q("machine.device_power.devices",{dispatch:"power/onInit"})},async machineDevicePowerStatus(e){q("machine.device_power.status",{dispatch:"power/onStatus",params:{[e]:null}})},async machineDevicePowerToggle(e,t,s){const n="on"===t?"machine.device_power.on":"machine.device_power.off";q(n,{dispatch:"power/onToggle",params:{[e]:null},wait:s})},async machineTimelapseSetSettings(e,t){q("machine.timelapse.post_settings",{dispatch:"timelapse/onSettings",params:e,wait:t})},async machineTimelapseSaveFrames(e){q("machine.timelapse.saveframes",{wait:e})},async machineTimelapseRender(){q("machine.timelapse.render",{})},async printerInfo(){q("printer.info",{dispatch:"printer/onPrinterInfo"})},async printerRestart(){q("printer.restart",{dispatch:"void",wait:K.onKlipperRestart})},async printerFirmwareRestart(){q("printer.firmware_restart",{dispatch:"void",wait:K.onKlipperFirmwareRestart})},async printerQueryEndstops(){q("printer.query_endstops.status",{dispatch:"printer/onQueryEndstops",wait:K.onQueryEndstops})},async printerObjectsList(){q("printer.objects.list",{dispatch:"printer/onPrinterObjectsList"})},async printerObjectsSubscribe(e){q("printer.objects.subscribe",{dispatch:"printer/onPrinterObjectsSubscribe",params:{objects:e}})},async printerPrintStart(e){q("printer.print.start",{dispatch:"void",params:{filename:e}})},async printerPrintCancel(){q("printer.print.cancel",{dispatch:"printer/onPrintCancel",wait:K.onPrintCancel})},async printerPrintPause(){q("printer.print.pause",{dispatch:"printer/onPrintPause",wait:K.onPrintPause})},async printerPrintResume(){q("printer.print.resume",{dispatch:"printer/onPrintResume",wait:K.onPrintResume})},async printerGcodeScript(e,t){q("printer.gcode.script",{dispatch:"console/onGcodeScript",params:{script:e},wait:t})},async printerGcodeHelp(){q("printer.gcode.help",{dispatch:"console/onGcodeHelp"})},async printerEmergencyStop(){q("printer.emergency_stop",{dispatch:"void"})},async serverInfo(){q("server.info",{dispatch:"server/onServerInfo"})},async identify(e){q("server.connection.identify",{dispatch:"socket/onConnectionId",params:e})},async timelapseState(){q("machine.timelapse.get_settings",{dispatch:"timelapse/onSettings"}),q("machine.timelapse.lastframeinfo",{dispatch:"timelapse/onLastFrame"})},async serverConfig(){q("server.config",{dispatch:"server/onServerConfig"})},async serverWrite(e,t,s=J.MOONRAKER_DB.fluidd.NAMESPACE){q("server.database.post_item",{params:{namespace:s,key:e,value:t}})},async serverDelete(e,t=J.MOONRAKER_DB.fluidd.NAMESPACE){q("server.database.delete_item",{params:{namespace:t,key:e}})},async serverRead(e,t=J.MOONRAKER_DB.fluidd.NAMESPACE){q("server.database.get_item",{dispatch:"socket/onServerRead",params:{namespace:t,key:e}})},async serverRestart(){q("server.restart",{dispatch:"void"})},async serverTemperatureStore(){q("server.temperature_store",{dispatch:"charts/initTempStore"})},async serverGcodeStore(){q("server.gcode_store",{dispatch:"console/onGcodeStore"})},async serverHistoryList(e){q("server.history.list",{dispatch:"history/onHistoryList",params:e})},async serverHistoryTotals(){q("server.history.totals",{dispatch:"history/onHistoryTotals"})},async serverHistoryDeleteJob(e){const t="all"===e?{all:!0}:{uid:e};q("server.history.delete_job",{dispatch:"history/onDelete",params:t})},async serverHistoryResetTotals(){q("server.history.reset_totals",{dispatch:"history/onHistoryChange"})},async serverJobQueueStatus(){q("server.job_queue.status",{dispatch:"jobQueue/onJobQueueStatus",wait:K.onJobQueue})},async serverJobQueuePostJob(e,t){q("server.job_queue.post_job",{dispatch:"jobQueue/onJobQueueStatus",params:{filenames:e,reset:t},wait:K.onJobQueue})},async serverJobQueueDeleteJobs(e){const t=e.length>0&&"all"===e[0]?{all:!0}:{job_ids:e};q("server.job_queue.delete_job",{dispatch:"jobQueue/onJobQueueStatus",params:t,wait:K.onJobQueue})},async serverJobQueuePause(){q("server.job_queue.pause",{dispatch:"jobQueue/onJobQueueStatus",wait:K.onJobQueue})},async serverJobQueueStart(){q("server.job_queue.start",{dispatch:"jobQueue/onJobQueueStatus",wait:K.onJobQueue})},async serverFilesMetaData(e){q("server.files.metadata",{dispatch:"files/onFileMetaData",params:{filename:e}})},async serverFilesGetDirectory(e,t){const s=`${K.onFileSystem}${t}`;q("server.files.get_directory",{dispatch:"files/onServerFilesGetDirectory",wait:s,params:{root:e,path:t,extended:!0}})},async serverGetGcodes(e){const t=`${K.onFileSystem}gcodes`;q("server.files.get_directory",e?{dispatch:"ourExtension/layoutsData/fileBrowseWindow/onSetGcodeFiles",wait:t,params:{root:"gcodes",path:`gcodes/${e}`,extended:!0}}:{dispatch:"ourExtension/layoutsData/fileBrowseWindow/onSetGcodeFiles",wait:t,params:{root:"gcodes",path:"gcodes",extended:!0}})},async serverGetAllFilesAndDirs(e,t){const s=`${K.onFileSystem}${e}`;q("server.files.get_directory",{dispatch:"ourExtension/files/onGetAllFilesAndDirs",wait:s,params:{root:t,path:`${e}`,extended:!0}})},async serverFilesListRoot(e){const t=`${K.onFileSystem}${e}`;q("server.files.list",{dispatch:"files/onServerFilesListRoot",wait:t,params:{root:e}})},async serverFilesMove(e,t){const s=K.onFileSystem;q("server.files.move",{dispatch:"void",wait:s,params:{source:e,dest:t}})},async serverFilesCopy(e,t){const s=K.onFileSystem;q("server.files.copy",{dispatch:"void",wait:s,params:{source:e,dest:t}})},async serverFilesZip(e,t,s){const n=K.onFileSystem;q("server.files.zip",{dispatch:"void",wait:n,params:{dest:e,items:t,store_only:s}})},async serverFilesPostDirectory(e){const t=K.onFileSystem;q("server.files.post_directory",{dispatch:"void",wait:t,params:{path:e}})},async serverFilesDeleteFile(e){const t=K.onFileSystem;q("server.files.delete_file",{dispatch:"void",wait:t,params:{path:e}})},async serverFilesDeleteDirectory(e,t=!1){const s=K.onFileSystem;q("server.files.delete_directory",{dispatch:"void",wait:s,params:{path:e,force:t}})},async serverAnnouncementsList(){q("server.announcements.list",{dispatch:"announcements/onAnnouncementsList"})},async serverAnnouncementsDismiss(e,t){q("server.announcements.dismiss",{dispatch:"void",params:{entry_id:e,wake_time:t}})},async serverLogsRollover(e){q("server.logs.rollover",{dispatch:"server/onLogsRollOver",params:{application:e}})},async serverWebcamsList(){q("server.webcams.list",{dispatch:"webcams/onWebcamsList"})}};var $=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let ee=class extends r.ZP{get moonrakerServiceName(){return this.$store.state.server.system_info?.instance_ids?.moonraker||"moonraker"}async _klipperReset(){this.$store.commit("socket/setAcceptNotifications",!1),await this.$store.dispatch("server/resetKlippy",void 0,{root:!0}),await this.$store.dispatch("reset",["printer","charts","wait"],{root:!0})}hostReboot(){X.machineReboot()}hostShutdown(){X.machineShutdown()}async serviceRestartKlipper(){this.serviceRestartByName("klipper")}serviceRestartMoonraker(){this.serviceRestartByName(this.moonrakerServiceName)}async serviceRestartByName(e){e===this.moonrakerServiceName?(X.serverRestart(),this.$store.commit("socket/setSocketDisconnecting",!0)):("klipper"===e&&await this._klipperReset(),X.machineServicesRestart(e))}async serviceStartByName(e){X.machineServicesStart(e)}async serviceStopByName(e){if(e===this.moonrakerServiceName)throw new Error("Stopping the moonraker service is not supported");"klipper"===e&&await this._klipperReset(),X.machineServicesStop(e)}async restartKlippy(){await this._klipperReset(),X.printerRestart()}async firmwareRestartKlippy(){await this._klipperReset(),X.printerFirmwareRestart()}};ee=$([l.wA],ee);var te=ee,se=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let ne=class extends r.ZP{get authenticated(){const e=this.$store.getters["auth/getAuthenticated"];return e}get socketConnected(){return this.$store.getters["socket/getConnectionState"]}get apiConnected(){return this.$store.getters["socket/getApiConnected"]}get socketConnecting(){return this.$store.getters["socket/getConnectingState"]}get klippyReady(){return this.$store.getters["printer/getklippyReady"]}get klippyConnected(){const e=this.$store.getters["server/getInfo"];return e.klippy_connected}get hasWarnings(){return this.$store.getters["printer/getHasWarnings"]}get klippyState(){return this.$store.getters["printer/getKlippyState"]}get klippyStateMessage(){return this.$store.getters["printer/getKlippyStateMessage"]}get printerState(){return this.$store.getters["printer/getPrinterState"]}get printerBusy(){const e=this.printerState.toLowerCase();return"printing"===e||"paused"===e||"busy"===e}get printerPaused(){return"paused"===this.printerState.toLowerCase()}get printerPrinting(){return"printing"===this.printerState.toLowerCase()}hasWait(e){return this.$store.getters["wait/hasWait"](e)}get hasWaits(){return this.$store.getters["wait/hasWaits"]}hasWaitsBy(e){return this.$store.getters["wait/hasWaitsBy"](e)}sendGcode(e,t){X.printerGcodeScript(e,t),this.addConsoleEntry(e)}addConsoleEntry(e){this.$store.dispatch("console/onAddConsoleEntry",{message:e,type:"command"})}async emergencyStop(){const e=this.$store.state.config.uiSettings.general.confirmOnEstop;let t=!0;e&&console.log("res = await this.$confirm(\n                this.$tc('app.general.simple_form.msg.confirm'),\n                { title: this.$tc('app.general.label.confirm'), color: 'card-heading', icon: '$error' }\n            )"),t&&X.printerEmergencyStop()}get coordinatesHolder(){return this.$store.getters["ourExtension/layoutsData/moveWindow/getCoordinates"]()}get fixedCoordinatesHolder(){const e=[];for(const t of this.coordinatesHolder)e.push(t.toFixed(1));return e}get printerAllowedToStartPrint(){return"ready"===this.printerState.toLowerCase()||"idle"===this.printerState.toLowerCase()||"cancelled"===this.printerState.toLowerCase()}};ne=se([l.wA],ne);var ie=ne;class re{getFileDataMock(){return{name:"printing_file.gcode",modified:"--.--.----",permissions:"rw",size:0,sizeInKb:"?",computedSize:"?",layers:"?",printingTime:"?h:?m",isSelected:!1,pathForMoonraker:"printing_file.gcode",dirnameForMoonraker:"",profiles:this.getGcodePrintingProfilesMock()}}getProfileMock(){return{name:"Оффлайн-профиль",profileMainParameters:{current:15,feedRate:5,voltage:220},profileAdditionalParameters:{arcLength:1,dynamic:2,weldingSpeed:.5},profileOscilationParameters:{period:2,type:"Синус",width:5},profileWeldParameters:{gas:"Ag",material:"Fe-C",method:"MIG",wireDiameter:.8}}}getGcodePrintingProfilesMock(){return{profiles:this.getProfilesMapMock()}}getProfilesMapMock(){const e=new Map;return e.set(this.getProfileMock().name,this.getPrintingDiapasonMock()),e}getPrintingDiapasonMock(){return{profile:this.getProfileMock(),isRootDiapason:!0}}}const oe=new re;class ae{constructor(){(0,c.Z)(this,"dispatch",null)}addDiapasonAlert(e){if(!this.dispatch)return;const t={message:`Диапазон добавлен ${e}`,type:"green",time:1500};this.dispatch("ourExtension/layoutsData/alerts/showInfoAlert",t,{root:!0})}diapasonSelectedAlert(e){if(!this.dispatch)return;const t={message:`Выбран диапазон ${e}`,type:"green",time:1500};this.dispatch("ourExtension/layoutsData/alerts/showInfoAlert",t,{root:!0})}deleteDiapasonAlert(e){if(!this.dispatch)return;const t={message:`Удален диапазон (${e.firstLayer} - ${e.lastLayer})`,type:"red",time:1500};this.dispatch("ourExtension/layoutsData/alerts/showInfoAlert",t,{root:!0})}deleteAllDiapasonesAlert(){if(!this.dispatch)return;const e={message:"Удалены все диапазоны кроме первого",type:"red",time:1500};this.dispatch("ourExtension/layoutsData/alerts/showInfoAlert",e,{root:!0})}lastPrintingProfileSelectedAlert(e){if(!this.dispatch)return;let t="Выбран профиль последней печати";e&&(t+=` ${e}`);const s={message:t,type:"green",time:2e3};this.dispatch("ourExtension/layoutsData/alerts/showInfoAlert",s,{root:!0})}profileSelectedAlert(e,t){if(!this.dispatch)return;let s=`Выбран профиль: ${e}`;t&&(s+=` ${t}`);const n={message:s,type:"green",time:2e3};this.dispatch("ourExtension/layoutsData/alerts/showInfoAlert",n,{root:!0})}showInfoAlert(e){this.dispatch&&this.dispatch("ourExtension/layoutsData/alerts/showInfoAlert",e,{root:!0})}}const ce=new ae;var le=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let ue=class extends r.ZP{openInputWindow(e,t,s,n,i,r,o,a,c,l,u){i||(i="void");const d={coordName:t,initValue:s,dispachAfterConfirm:i,callbackAfterConfirm:r,maxValue:o,minValue:a,rejectPointClick:c,coordUnits:l,isItTime:u},p={inputWindowData:d,valcoderStep:n};e?this.$store.dispatch("ourExtension/layoutsData/inputWindow/initInputWindow",p):this.$store.dispatch("ourExtension/layoutsData/inputWindow/initNotDefaultInputWindow",p),this.$store.dispatch("ourExtension/windowFlags/openInputWindow")}openSelectWindowWithoutIcon(e,t,s){const n={callbackAfterConfirm:e,initList:t,zIndex:s};this.$store.dispatch("ourExtension/layoutsData/selectListWindow/reset"),this.$store.dispatch("ourExtension/layoutsData/selectListWindow/initWithoutIcons",n),this.$store.dispatch("ourExtension/windowFlags/openSelectListWindow")}openSelectWindowWithIcon(e,t){const s={callbackAfterConfirm:e,initMap:t};this.$store.dispatch("ourExtension/layoutsData/selectListWindow/reset"),this.$store.dispatch("ourExtension/layoutsData/selectListWindow/initWithIcons",s),this.$store.dispatch("ourExtension/windowFlags/openSelectListWindow")}initExisitingPrintingWindow(e=!1){let t=this.$store.getters["ourExtension/layoutsData/printingWindow/hasFile"]();const s=this.$store.getters["ourExtension/layoutsData/printingWindow/hasPrintingDiapason"](),n=this.$store.state.printer.printer.current_file,i=this.$store.getters["ourExtension/layoutsData/printingWindow/getFile"]();if(t&&n.filename&&n.filename!==i.name&&(t=!1),!t||!s){this.$store.dispatch("ourExtension/layoutsData/printingWindow/reset");const e=this.resolveFileForExistingPrintingWindow();this.$store.dispatch("ourExtension/layoutsData/printingWindow/setFile",e);const t=this.resolveDiapasonForExistingPrintingWindow(e),s=JSON.parse(JSON.stringify(t));this.$store.dispatch("ourExtension/layoutsData/printingWindow/setPrintingDiapason",s)}this.$store.dispatch("ourExtension/windowFlags/openPrintingWindow");const r={message:"Печать невозможна. Принтер уже печатает",type:"ok"};e&&this.$store.dispatch("ourExtension/layoutsData/alerts/addToAlertQueue",r)}resolveDiapasonForExistingPrintingWindow(e){let t=e.profiles?.selectedDiapason?.profile;return t||(t=this.$store.getters["ourExtension/profiles/getLastPrintingProfile"](),t||(t=oe.getProfileMock())),{allLayersFlag:!0,firstLayer:null,lastLayer:null,profile:t}}resolveFileForExistingPrintingWindow(){let e=this.$store.getters["ourExtension/files/getLastPrintingFile"]();e||(e=this.getFileMock());const t=this.$store.state.printer.printer.current_file;return t.filename&&(e.name=t.filename,e.pathForMoonraker=t.filename),e}getFileMock(){const e=oe.getFileDataMock();let t=this.$store.getters["ourExtension/profiles/getLastPrintingProfile"]();t||(t=oe.getProfileMock());let s=this.$store.getters["ourExtension/profiles/getDefaultProfilesMap"];s||(s=oe.getProfilesMapMock());const n={profiles:s,selectedDiapason:{isRootDiapason:!0,profile:t}};return e.profiles=n,e}initNewPrintingWindow(e,t){this.$store.commit("ourExtension/profiles/setLastPrintingProfile",e.profile),this.$store.dispatch("ourExtension/layoutsData/printingWindow/reset");const s=JSON.parse(JSON.stringify(e));this.$store.dispatch("ourExtension/layoutsData/printingWindow/setPrintingDiapason",s),this.$store.dispatch("ourExtension/layoutsData/printingWindow/setFile",t)}screenIsBlockingAlert(){const e={message:"<span>Экран заблокирован. Для разблокировки удерживайте кнопку настроек в течение 1 секунды</span>\n                <style>\n                .info-alert span {\n                    text-align: center;\n                }\n                </style>",type:"red"};ce.showInfoAlert(e)}};ue=le([l.wA],ue);var de=ue,pe=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let me=class extends((0,l.Wr)(ie,te,de)){constructor(...e){super(...e),(0,c.Z)(this,"items",["Klipper","Прошивка","Moonraker","Интерфейс"]),(0,c.Z)(this,"listFlag",!1)}get message(){return this.klippyStateMessage}beforeDestroy(){this.closeList()}restartKlipper(){this.restartKlippy();const e={message:"Отправлен запрос на перезагрузку Klipper",type:"green"};ce.showInfoAlert(e)}restartFirmware(){this.firmwareRestartKlippy();const e={message:"Отправлен запрос на перезагрузку прошивки",type:"green"};ce.showInfoAlert(e)}restartMoonraker(){this.serviceRestartMoonraker();const e={message:"Отправлен запрос на перезагрузку Moonraker",type:"green"};ce.showInfoAlert(e)}restartInterface(){location.reload()}restart(){this.listFlag=!0}closeList(){this.listFlag=!1}selectItem(e){switch(e){case"Klipper":this.restartKlipper();break;case"Прошивка":this.restartFirmware();break;case"Moonraker":this.restartMoonraker();break;case"Интерфейс":this.restartInterface();break}this.closeList()}};me=pe([(0,l.wA)({components:{FatalSelectList:Q}})],me);var fe=me,he=fe,ge=(0,g.Z)(he,k,F,!1,null,null,null),ye=ge.exports;const ve={get(e,t){return r.ZP.$httpClient.get(e,t)},post(e,t,s){return r.ZP.$httpClient.post(e,t,s)},delete(e,t){return r.ZP.$httpClient["delete"](e,t)},get defaults(){return r.ZP.$httpClient.defaults},accessInfoGet(e){return this.get("/access/info",e)},accessRefreshJwtPost(e,t){return this.post("/access/refresh_jwt",{refresh_token:e},t)},accessLoginPost(e,t,s="moonraker",n){return this.post("/access/login",{username:e,password:t,source:s},n)},accessLogoutPost(e){return this.post("access/logout",void 0,e)},accessOneshotTokenGet(e){return this.get("/access/oneshot_token",e)},accessCurrentUserGet(e){return this.get("/access/user",e)},accessUsersListGet(e){return this.get("/access/users/list",e)},accessUserPost(e,t,s){return this.post("/access/user",{username:e,password:t},s)},accessUserDelete(e,t){return this.delete("/access/user",{...t,params:{username:e}})},accessUserPasswordPost(e,t,s){return this.post("/access/user/password",{password:e,new_password:t},s)},accessApiKeyGet(e){return this.get("/access/api_key",e)},accessApiKeyPost(e){return this.post("/access/api_key",void 0,e)},serverDatabaseItemGet(e,t){return this.get(`/server/database/item?namespace=${e}`,t)},serverDatabaseItemPost(e,t,s,n){return this.post("/server/database/item",{namespace:e,key:t,value:s},n)},serverFilesUploadPost(e,t){return this.post("/server/files/upload",e,t)},serverFilesGet(e,t){return this.get(`/server/files/${encodeURI(e)}?date=${Date.now()}`,t)}};var be=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let Se=class extends r.ZP{get cancelTokenSource(){return this.$store.state.files.fileTransferCancelTokenSource}get apiUrl(){return this.$store.state.config.apiUrl}get isTrustedUser(){const e=this.$store.getters["server/getConfig"].authorization.force_logins;return!1===e||"_TRUSTED_USER_"===this.$store.getters["auth/getCurrentUser"]?.username}getThumbUrl(e,t,s,n){if(e.length){const i=this.getThumb(e,t,s,n);if(i)return i.absolute_path||i.data||""}return""}getThumb(e,t,s=!0,n){if(e.length){let i;if(e&&(i=s?e.reduce(((e,t)=>e.size&&t.size&&e.size>t.size?e:t)):e.reduce(((e,t)=>e.size&&t.size&&e.size<t.size?e:t)),i)){if(i.relative_path&&i.relative_path.length>0){const e=t?`gcodes/${t}`:"gcodes";return{...i,absolute_path:this.createFileUrl(i.relative_path,e,n)}}if(i.data)return{...i,data:"data:image/gif;base64,"+i.data};if(i.absolute_path)return i}}}async getGcode(e){const t=e.size/1024/1024;let s=!0;if(t>=100&&console.log("res = await this.$confirm(\n                this.$t('app.gcode.msg.confirm', {\n                    filename: file.filename,\n                    size: this.$filters.getReadableFileSizeString(file.size)\n                }).toString(), {\n                title: this.$tc('app.general.title.gcode_preview'),\n                color: 'card-heading',\n                icon: '$error'\n            })"),s){this.$store.dispatch("files/createFileTransferCancelTokenSource");const t=e.dirnameForMoonraker?`gcodes/${e.dirnameForMoonraker}`:"gcodes";return await this.getFile(e.name,t,e.size,{responseType:"text",transformResponse:[e=>e],cancelToken:this.cancelTokenSource.token})}}async getFile(e,t,s=0,n){const i=t?`${t}/${e}`:e,r=performance.now();this.$store.dispatch("files/updateFileDownload",{filepath:i,size:s,loaded:0,percent:0,speed:0,unit:"kB"});const o={...n,onDownloadProgress:e=>{const t=["kB","MB","GB"];let n=0,o=0;const a=performance.now()-r;if(a>0){n=e.loaded/a;while(n>1024)n/=1024,o=Math.min(2,o+1)}const c={filepath:i,loaded:e.loaded,percent:Math.round(e.loaded/s*100),speed:n,unit:t[o]};e.lengthComputable&&(s=c.size=e.total),this.$store.dispatch("files/updateFileDownload",c)}};return await ve.serverFilesGet(i,o)}async downloadFile(e,t){try{const s=await this.createFileUrlWithToken(e,t),n=document.createElement("a");n.href=s,n.setAttribute("download",e),n.setAttribute("target","_blank"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch{}}createFileUrl(e,t,s){const n=t?`${t}/${e}`:`${e}`;return`${this.apiUrl}/server/files/${encodeURI(n)}?date=${s||Date.now()}`}async createFileUrlWithToken(e,t,s){const n=this.createFileUrl(e,t,s);return this.isTrustedUser?n:`${n}&token=${(await ve.accessOneshotTokenGet()).data.result}`}async uploadFile(e,t,s,n,i){const r=new FormData;let o=`${t}${e.name}`;o=o.startsWith("/")?o:"/"+o,r.append("file",e,e.name),r.append("path",t),r.append("root",s),n&&r.append("print","true");const a=performance.now();return this.$store.dispatch("files/updateFileUpload",{filepath:o,size:e.size,loaded:0,percent:0,speed:0,unit:"kB",cancelled:!1}),ve.serverFilesUploadPost(r,{...i,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{const t=["kB","MB","GB"];let s=0,n=0;const i=performance.now()-a;if(i>0){s=e.loaded/i;while(s>1024)s/=1024,n=Math.min(2,n+1)}this.$store.dispatch("files/updateFileUpload",{filepath:o,loaded:e.loaded,percent:Math.round(e.loaded/e.total*100),speed:s,unit:t[n]})}}).then((e=>e)).catch((e=>e)).finally((()=>{this.$store.dispatch("files/removeFileUpload",o)}))}getFullPathAndFile(e,t){return"path"in t?[`${e}/${t.path}`,t.file]:[e,t]}async uploadFiles(e,t,s,n){for(const r of e){const[e,s]=this.getFullPathAndFile(t,r);let n=`${e}${s.name}`;n=n.startsWith("/")?n:"/"+n,this.$store.dispatch("files/updateFileUpload",{filepath:n,size:s.size,loaded:0,percent:0,speed:0,unit:"kB",cancelled:!1})}e.length>1&&(n=!1);for(const r of e){const[e,o]=this.getFullPathAndFile(t,r);let a=`${e}${o.name}`;a=a.startsWith("/")?a:"/"+a;const c=this.$store.state.files.uploads.find((e=>e.filepath===a));if(c&&!c?.cancelled)try{this.$store.dispatch("files/createFileTransferCancelTokenSource"),await this.uploadFile(o,e,s,n,{cancelToken:this.cancelTokenSource.token})}catch(i){return i}else this.$store.dispatch("files/removeFileUpload",a)}}async sendProfile(e){return await this.sendDiapasonForServer(e)}async sendDiapasonForServer(e){const t=JSON.stringify(e,null,2),s=new File([t],"selected_diapason.json",{type:"text/plain"}),n=await this.uploadFile(s,"profiles","config",!1);return n}};Se=be([l.wA],Se);var we=Se;const Pe=e=>{let t=-1,s="?",n="?h ?m";const i=e.split("\n");for(const r of i){if(r.includes("layer")){const e=_e(r),s=parseInt(e);isNaN(s)||(t=s)}r.includes("Build time:")&&(n=Ce(r))}return-1!==t&&(s=t+""),[s,n]};function _e(e){let t="";const s=e.indexOf("layer")+5+1;if(e.length>=s){let n=e.slice(s);for(const e of n){const s=parseInt(e);if(isNaN(s))break;t+=s}}return t}function Ce(e){let t="",s="";const n=e.indexOf(":"),i=n+2;e.length>=i&&(t=Ae(e,i));const r=e.indexOf("hours")+5+1;return e.length>=r&&(s=Ae(e,r)),`${t}h ${s}m`}function Ae(e,t){let s="";const n=e.slice(t);for(const r of n){const e=parseInt(r);if(isNaN(e))break;s+=e}const i=parseInt(s);return s=isNaN(i)?"?":i+"",s}const xe=e=>{const t={gas:[],oscilationTypes:[],weldTypes:[],wireDiameters:[],materials:[]},s=Object.keys(t);for(const n in e){const e=s.indexOf(n);-1!=e&&s.splice(e,1)}return 0===s.length},ke=e=>{const t={name:"",profileAdditionalParameters:{},profileMainParameters:{},profileOscilationParameters:{},profileWeldParameters:{}},s=Object.keys(t);for(const n in e){const e=s.indexOf(n);-1!=e&&s.splice(e,1)}return 0===s.length},Fe=e=>Array.from(e.keys()).sort(),Ee={hasNext(e){return Boolean(e.nextDiapason)},hasPrev(e){return Boolean(e.prevDiapason)},next(e){return e.nextDiapason?e.nextDiapason:null},prev(e){return e.prevDiapason?e.prevDiapason:null},createNext(e){let t={isRootDiapason:!1,profile:e.profile};if(t=JSON.parse(JSON.stringify(t)),e.nextDiapason){const s=e.nextDiapason;e.nextDiapason=t,t.prevDiapason=e,t.nextDiapason=s,s.prevDiapason=t}else e.nextDiapason=t,t.prevDiapason=e},deleteCurrent(e){return e.isRootDiapason?e:e.prevDiapason&&e.nextDiapason?(e.prevDiapason.nextDiapason=e.nextDiapason,e.nextDiapason.prevDiapason=e.prevDiapason,e.nextDiapason):e.prevDiapason?(e.prevDiapason.nextDiapason=null,e.prevDiapason):e.nextDiapason?(e.nextDiapason.prevDiapason=null,e.nextDiapason):e},getRootDiapason(e){if(e.isRootDiapason)return e;let t=this.searchInNextDiapasones(e);return t||(t=this.searchInPrevDiapasones(e),t||e)},searchInPrevDiapasones(e){const t=e.prevDiapason;return t?t.isRootDiapason?t:this.searchInPrevDiapasones(t):null},searchInNextDiapasones(e){const t=e.nextDiapason;return t?t.isRootDiapason?t:this.searchInNextDiapasones(t):null},deleteAll(e){const t=this.getRootDiapason(e);let s=t.nextDiapason;t.nextDiapason=null;while(1){if(!s||s.isRootDiapason)break;{s.prevDiapason=null;let e=s.nextDiapason;s.nextDiapason=null,s=e}}let n=t.prevDiapason;t.prevDiapason=null;while(1){if(!n||n.isRootDiapason)break;{n.nextDiapason=null;let e=n.prevDiapason;n.prevDiapason=null,n=e}}return t}},De=(new Map([["profile.profileMainParameters.current","Ток, А"],["profile.profileMainParameters.voltage","Напряжение, В"],["profile.profileMainParameters.feedRate","V подачи, м/мин"],["profile.profileAdditionalParameters.arcLength","Длина дуги"],["profile.profileAdditionalParameters.dynamic","Динамика"],["profile.profileAdditionalParameters.weldingSpeed","V наплавки, м/мин"],["profile.profileOscilationParameters.width","Ширина, мм"],["profile.profileOscilationParameters.period","Период, мм"]]),new Map([["Стали","Fe-C"],["Нержавеющие стали","Cr-Ni"],["Никелевые сплавы","Ni"],["Титановые сплавы","Ti"],["Алюминивые сплавы","Al"],["Медные сплавы","Cu"]])),Oe=e=>{let t=De.get(e);return t||(t=""),t};var Be=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let Re=class extends r.ZP{constructor(...e){super(...e),(0,c.Z)(this,"buttonsInterrups",{firstButton:!1,secondButton:!1,thirdButton:!1,fourthButton:!1,fifthButton:!1,sixthButton:!1})}get gpioSocketConnected(){return this.$store.getters["ourExtension/gpio/getSocketConnected"]}get isFirstButtonPressed(){return this.$store.getters["ourExtension/gpio/getFirstButton"]}set isFirstButtonPressed(e){this.$store.commit("ourExtension/gpio/setFirstButton",e)}get isSecondButtonPressed(){return this.$store.getters["ourExtension/gpio/getSecondButton"]}set isSecondButtonPressed(e){this.$store.commit("ourExtension/gpio/setSecondButton",e)}get isThirdButtonPressed(){return this.$store.getters["ourExtension/gpio/getThirdButton"]}set isThirdButtonPressed(e){this.$store.commit("ourExtension/gpio/setThirdButton",e)}get isFourthButtonPressed(){return this.$store.getters["ourExtension/gpio/getFourthButton"]}set isFourthButtonPressed(e){this.$store.commit("ourExtension/gpio/setFourthButton",e)}get isFifthButtonPressed(){return this.$store.getters["ourExtension/gpio/getFifthButton"]}set isFifthButtonPressed(e){this.$store.commit("ourExtension/gpio/setFifthButton",e)}get isSixthButtonPressed(){return this.$store.getters["ourExtension/gpio/getSixthButton"]}set isSixthButtonPressed(e){this.$store.commit("ourExtension/gpio/setSixthButton",e)}setAllButtonsPressed(e){this.setAllButtonsInterrups(!0),this.isFirstButtonPressed=e,this.isSecondButtonPressed=e,this.isThirdButtonPressed=e,this.isFourthButtonPressed=e,this.isFifthButtonPressed=e,this.isSixthButtonPressed=e,setTimeout((()=>{this.setAllButtonsInterrups(!1)}),100)}setAllButtonsInterrups(e){const t=this.buttonsInterrups;for(const s in t)t[s]=e}get encoder1State(){return this.$store.getters["ourExtension/gpio/getEncoder1"]}get encoder2State(){return this.$store.getters["ourExtension/gpio/getEncoder2"]}};Re=Be([l.wA],Re);var Ie=Re,Le=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let Te=class extends((0,l.Wr)(we,ie,de,Ie)){constructor(...e){super(...e),(0,c.Z)(this,"buttonFlags",{mainButton:!1,moveButton:!1,starButton:!1,settingsButton:!1,backButton:!1})}get fileSelect(){return this.$store.getters["ourExtension/temp/fileSelectWindowFlag"]}get osc(){return this.$store.getters["ourExtension/temp/oscillationWindowFlag"]}get actualTime(){return this.$store.getters["ourExtension/layoutsData/baseLayout/getActualTime"]()}get isFilesLoadingFinished(){return this.$store.getters["ourExtension/files/getFilesLoadingFinishedFlag"]}get alertFlag(){return this.$store.getters["ourExtension/layoutsData/alerts/getAlertFlag"]()}get infoAlertFlag(){return this.$store.getters["ourExtension/layoutsData/alerts/getInfoAlertFlag"]()}get warningFlag(){return!this.klippyReady||!this.klippyConnected}get isProfilesDownloadingFinished(){return this.$store.getters["ourExtension/files/getProfilesDownloadingFinishedFlag"]}get fatalErrorFlag(){return!this.klippyReady||!this.klippyConnected}gpioSocketConnectedWather(){if(this.gpioSocketConnected){const e={message:"GPIO сокет подключен!",type:"green"};ce.showInfoAlert(e)}else{const e={message:"GPIO сокет умер!",type:"red"};ce.showInfoAlert(e)}}mounted(){setTimeout((()=>{console.log(this.$store.getters["ourExtension/files/getFilesMap"])}),5e3),this.$store.dispatch("ourExtension/layoutsData/baseLayout/startTimeRefreshing"),setTimeout((()=>{if(this.printerPrinting||this.printerPaused){const e={message:"Принтер уже печатает. Открыто окно текущей печати",type:"ok"};this.$store.dispatch("ourExtension/layoutsData/alerts/addToAlertQueue",e),this.initExisitingPrintingWindow()}}),1e3)}printerPrintingWather(){this.printerPrinting&&setTimeout((()=>{(this.printerPrinting||this.printerPaused)&&"/print"!==this.$route.path&&(this.initExisitingPrintingWindow(),this.$router.push("/print"))}),2e3)}isFilesLoadingFinishedWather(){if(this.isFilesLoadingFinished){const e=this.$store.getters["ourExtension/files/getFilesMap"];e&&(e.gcodes.forEach((e=>{this.parseGcodes(e)})),this.$store.dispatch("ourExtension/layoutsData/newFileBrowseWindow/setCurrentPath","gcodes"))}}isProfilesDownloadingFinishedWather(){if(this.isProfilesDownloadingFinished){const e=this.$store.getters["ourExtension/files/getProfilesFiles"];if(e){const t=[],s=[];for(const n of e.files){const e=this.getFile(n.name,"config/"+n.dirnameForMoonraker);let i=e.then((e=>{this.handleProfileResponse(e,t)}));s.push(i)}Promise.all(s).then((()=>{this.$store.dispatch("ourExtension/profiles/setProfiles",t)}))}}}handleProfileResponse(e,t){if(200===e.status){const s=e.data;ke(s)?t.push(s):xe(s)&&this.$store.commit("ourExtension/profiles/setProfilesMetadata",s)}}async parseGcodes(e){this.getGcode(e).then((e=>e?.data)).then((t=>{const[s,n]=Pe(t);e.layers=s,e.printingTime=n})).catch((e=>e)).finally((()=>{this.$store.dispatch("files/removeFileDownload")}))}disableButton(e){if(e in this.buttonFlags){const t=this.buttonFlags;t[e]=!1}}warningClickHandler(){const e=this.klippyStateMessage+"<style>.message-holder {text-align:start !important;}</style>",t={message:e,type:"ok",header:"ОШИБКА!"};this.$store.dispatch("ourExtension/layoutsData/alerts/addToAlertQueue",t)}};Le([(0,l.RL)("gpioSocketConnected")],Te.prototype,"gpioSocketConnectedWather",null),Le([(0,l.RL)("printerPrinting")],Te.prototype,"printerPrintingWather",null),Le([(0,l.RL)("isFilesLoadingFinished",{deep:!0})],Te.prototype,"isFilesLoadingFinishedWather",null),Le([(0,l.RL)("isProfilesDownloadingFinished",{deep:!0})],Te.prototype,"isProfilesDownloadingFinishedWather",null),Te=Le([(0,l.wA)({components:{DefaultAlert:v,InfoAlert:x,FatalErrorAlert:ye}})],Te);var Me=Te,We=Me,Ne=(0,g.Z)(We,o,a,!1,null,null,null),Ue=Ne.exports,je=s(408);const He=()=>({apiConnected:!0,open:!1,connecting:!1,disconnecting:!1,ready:!1,acceptingNotifications:!1,error:null,connectionId:null}),Ze=He(),Qe={getConnectionState:e=>e.open,getConnectingState:e=>e.connecting,getApiConnected:e=>e.apiConnected},ze={bus:new r.ZP,$emit:(e,t={})=>{const s={open:!0,timeout:-1,...t};e&&(s.text=e),ze.bus.$emit("flashMessage",s)}};var Je;(function(e){e["success"]="success",e["error"]="error",e["warning"]="warning",e["primary"]="primary",e["secondary"]="secondary"})(Je||(Je={}));var Ke=s(7003),Ge=s(8478);const Ve=(e,t)=>e in t;var Ye=Ve;let qe;const Xe={async reset({commit:e}){e("setReset")},async onSocketOpen({commit:e,rootState:t,dispatch:s},n){e("setSocketOpen",n),!0===n&&(X.serverInfo(),X.identify({client_name:J.APP_NAME,version:`${t.version.fluidd.version||"0.0.0"}-${t.version.fluidd.hash||"unknown"}`.trim(),type:"web",url:J.GITHUB_REPO}),X.serverFilesListRoot("config"),s("ourExtension/files/getAllFilesAndDirs","gcodes",{root:!0}),s("ourExtension/files/getAllFilesAndDirs","config",{root:!0}))},async onSocketClose({dispatch:e,commit:t,state:s},n){const i=s.disconnecting,o=["server","power","webcams","jobQueue","charts","socket","wait","gcodePreview"];n.wasClean&&i&&(await e("reset",o,{root:!0}),t("setSocketConnecting",!0),r.ZP.$socket.connect()),n.wasClean&&!i&&(t("setSocketConnecting",!1),t("setSocketOpen",!1)),n.wasClean||(await e("reset",o,{root:!0}),t("setSocketConnecting",!0),t("setSocketOpen",!1))},async onSocketConnecting({commit:e},t){e("setSocketConnecting",t)},async onSocketError({commit:e},t){if(t.code>=400&&t.code<500){let e="";try{e=JSON.parse(t.message.replace(/'/g,'"')).message}catch(s){e=t.message}ze.$emit(e,{type:Je.error})}503===t.code&&(e("printer/setPrinterInfo",{state:"error",state_message:t.message},{root:!0}),clearTimeout(qe),qe=window.setTimeout((()=>{X.serverInfo()}),J.KLIPPY_RETRY_DELAY))},async onConnectionId({commit:e},{connection_id:t}){e("setConnectionId",t)},async onServerRead({dispatch:e},t){const{namespace:s,key:n,value:i}=t;if(Ye(s,J.MOONRAKER_DB)){const t=J.MOONRAKER_DB[s].ROOTS,r=n&&Ye(n,t)?t[n]:Object.values(t)[0];e(r.dispatch,i,{root:!0})}},async notifyStatusUpdate({state:e,commit:t,dispatch:s},n){s("printer/onNotifyStatusUpdate",n,{root:!0}).then((()=>{e.ready||t("setSocketReadyState",!0)}))},async notifyGcodeResponse({dispatch:e},t){e("console/onAddConsoleEntry",{message:`${J.CONSOLE_RECEIVE_PREFIX}${t}`},{root:!0})},async notifyKlippyDisconnected(){X.serverInfo()},async notifyKlippyShutdown(){X.serverInfo()},async notifyKlippyReady(){i().debug("Klippy Ready")},async notifyFilelistChanged({dispatch:e},t){e("files/notify"+(0,Ke.Z)((0,Ge.Z)(t.action)),t,{root:!0}),t.action&&e("ourExtension/files/onFileListChanged",t,{root:!0})},async notifyMetadataUpdate({dispatch:e},t){e("files/onFileMetaData",t,{root:!0})},async notifyPowerChanged({dispatch:e},t){e("power/onStatus",{[t.device]:t.status},{root:!0})},async notifyUpdateResponse({dispatch:e},t){e("version/onUpdateResponse",t,{root:!0})},async notifyUpdateRefreshed({dispatch:e},t){e("version/onUpdateStatus",t,{root:!0})},async notifyHistoryChanged({dispatch:e},t){e("history/onHistoryChange",t,{root:!0})},async notifyCpuThrottled({dispatch:e},t){e("server/onMachineThrottledState",t,{root:!0})},async notifyProcStatUpdate({dispatch:e},t){e("server/onMachineProcStats",t,{root:!0})},async notifyUserCreated({dispatch:e},t){e("auth/onUserCreated",t,{root:!0})},async notifyUserDeleted({dispatch:e},t){e("auth/onUserDeleted",t,{root:!0})},async notifyServiceStateChanged({dispatch:e},t){e("server/onServiceStateChanged",t,{root:!0})},async notifyTimelapseEvent({dispatch:e},t){e("timelapse/onEvent",t,{root:!0})},async notifyAnnouncementUpdate({dispatch:e},t){e("announcements/onAnnouncementUpdate",t,{root:!0})},async notifyAnnouncementDismissed({dispatch:e},t){e("announcements/onAnnouncementDismissed",t,{root:!0})},async notifyAnnouncementWake({dispatch:e},t){e("announcements/onAnnouncementWake",t,{root:!0})},async notifyWebcamsChanged({dispatch:e},t){e("webcams/onWebcamsChanged",t,{root:!0})},async notifyJobQueueChanged({dispatch:e},t){e("jobQueue/onJobQueueChanged",t,{root:!0})}},$e={setReset(e){Object.assign(e,He())},setSocketOpen(e,t){e.open!==t&&(e.open=t),e.disconnecting&&(e.disconnecting=!1)},setSocketConnecting(e,t){e.connecting!==t&&(e.connecting=t)},setSocketReadyState(e,t){e.ready=t},setAcceptNotifications(e,t){e.acceptingNotifications=t},setSocketDisconnecting(e,t){e.disconnecting=t},setApiConnected(e,t){e.apiConnected=t},setConnectionId(e,t){e.connectionId=t}},et=!0,tt={namespaced:et,state:Ze,getters:Qe,actions:Xe,mutations:$e},st=()=>({authenticated:!1,token:null,refresh_token:null,currentUser:null,users:[],apiKey:""}),nt=st(),it={getAuthenticated:e=>e.authenticated,getCurrentUser:e=>e.currentUser,getUsers:e=>e.users,getToken:e=>e.token,getRefreshToken:e=>e.refresh_token,getApiKey:e=>e.apiKey},rt={async reset({commit:e}){e("setReset")},async init({commit:e}){await ve.accessCurrentUserGet().then((e=>e.data.result)).then((t=>e("setCurrentUser",t))),await ve.accessUsersListGet().then((e=>e.data.result.users)).then((t=>e("setUsers",t))),await ve.accessApiKeyGet().then((e=>e.data.result)).then((t=>e("setApiKey",t)))},async initAuth({commit:e,rootState:t,rootGetters:s}){if(""===t.config.apiUrl)return void e("setAuthenticated",!0);const n=s["config/getTokenKeys"],i=localStorage.getItem(n["refresh-token"]),r=localStorage.getItem(n["user-token"]);r&&i?(e("setToken",r),e("setRefreshToken",i),ve.defaults.headers.common.Authorization=`Bearer ${r}`):delete ve.defaults.headers.common.Authorization},async checkToken({state:e}){if(e.token?.exp){const t=e.token.exp,s=Date.now()/1e3,n=t-s<300;return!!n&&(i().debug("checkToken - isExpiring",new Date(1e3*s),new Date(1e3*t)),!0)}return!1},async refreshTokens({commit:e,rootGetters:t}){const s=t["config/getTokenKeys"],n=localStorage.getItem(s["refresh-token"]);return ve.accessRefreshJwtPost(n||"",{withAuth:!1}).then((e=>e.data.result)).then((t=>(localStorage.setItem(s["user-token"],t.token),e("setToken",t.token),ve.defaults.headers.common.Authorization=`Bearer ${t.token}`,Promise.resolve(t.token)))).catch((()=>Promise.resolve()))},async getAuthInfo(){return ve.accessInfoGet({withAuth:!1}).then((e=>({defaultSource:e.data.result.default_source,availableSources:e.data.result.available_sources}))).catch((()=>({})))},async login({commit:e,rootGetters:t},{username:s,password:n,source:i}){const r=t["config/getTokenKeys"];return ve.accessLoginPost(s,n,i).then((e=>e.data.result)).then((t=>(localStorage.setItem(r["user-token"],t.token),localStorage.setItem(r["refresh-token"],t.refresh_token),ve.defaults.headers.common.Authorization=`Bearer ${t.token}`,e("setAuthenticated",!0),e("setCurrentUser",{username:t.username,source:t.source}),e("setToken",t.token),e("setRefreshToken",t.refresh_token),Promise.resolve(t)))).catch((e=>(localStorage.removeItem(r["user-token"]),localStorage.removeItem(r["refresh-token"]),delete ve.defaults.headers.common.Authorization,Promise.reject(e))))},async logout({commit:e,rootGetters:t},s){const n={invalidate:!1,partial:!1,...s},i=t["config/getTokenKeys"];n.invalidate&&await ve.accessLogoutPost(),localStorage.removeItem(i["user-token"]),localStorage.removeItem(i["refresh-token"]),delete ve.defaults.headers.common.Authorization,e("setCurrentUser",null),e("setToken",null),e("setRefreshToken",null),n.partial||(r.ZP.$socket&&r.ZP.$socket.close(),e("setAuthenticated",!1),console.log("if (router.currentRoute.path !== '/login') router.push('/login')"))},async checkTrust({dispatch:e,commit:t,rootGetters:s}){const n=s["config/getTokenKeys"],i=localStorage.getItem(n["user-token"]);delete ve.defaults.headers.common.Authorization,await ve.accessCurrentUserGet({withAuth:!1}).then((e=>e.data.result)).then((s=>{ve.defaults.headers.common.Authorization=`Bearer ${i}`,e("logout",{partial:!0}),t("setCurrentUser",s)})).catch((()=>{e("logout")}))},async addUser(e,t){return ve.accessUserPost(t.username,t.password).then((()=>Promise.resolve(t)))},async removeUser(e,t){return ve.accessUserDelete(t.username).then((()=>Promise.resolve(t)))},async onUserCreated({commit:e},t){e("setAddUser",t)},async onUserDeleted({commit:e},t){e("setRemoveUser",t)},async refreshApiKey({commit:e}){return ve.accessApiKeyPost().then((e=>e.data.result)).then((t=>e("setApiKey",t)))}};var ot=s(6865);const at={setReset(e){Object.assign(e,st())},setCurrentUser(e,t){e.currentUser=t},setToken(e,t){e.token=t?(0,ot.Z)(t):null},setRefreshToken(e,t){e.refresh_token=t?(0,ot.Z)(t):null},setAuthenticated(e,t){e.authenticated=t},setUsers(e,t){e.users=t},setAddUser(e,t){e.users.push({source:"moonraker",...t})},setRemoveUser(e,t){const s=e.users.findIndex((e=>e.username===t.username));s>=0&&e.users.splice(s,1)},setApiKey(e,t){e.apiKey=t}},ct=!0,lt={namespaced:ct,state:nt,getters:it,actions:rt,mutations:at},ut=()=>({klippy_retries:0,info:{failed_components:[],klippy_connected:!1,klippy_state:"",components:[],registered_directories:[],warnings:[]},system_info:null,config:{authorization:{enabled:!0},server:{}},moonraker_stats:[],throttled_state:{bits:0,flags:[]},cpu_temp:null}),dt=ut();var pt=s(7552);const mt={getInfo:e=>e.info,getIsMinApiVersion:e=>t=>{const s=e.info.api_version_string;return s&&(0,pt.valid)(s)&&(0,pt.valid)(t)&&(0,pt.gte)(s,t)},getSystemInfo:e=>e.system_info,getConfig:e=>e.config,getProcessStats:e=>e.moonraker_stats,componentSupport:e=>t=>e.info.components.includes(t),getServices:e=>{const t=e.system_info?.available_services||[],s=e.system_info?.service_state||{},n=[...t].sort().map((e=>e in s?{name:e,...s[e]}:{name:e}));return n},getConfigMapByFilename:(e,t,s)=>e=>{const n=J.CONFIG_SERVICE_MAP;let i=n.find((t=>t.filename?.toLowerCase()===e.toLowerCase()));if(i||(i=n.find((t=>t.prefix&&e.toLowerCase().startsWith(t.prefix.toLowerCase())))),i||(i=n.find((t=>t.suffix&&e.endsWith(t.suffix.toLowerCase())))),i){const e=i?.service,n=s.server.system_info?.instance_ids;return{serviceSupported:n&&e in n||t.getServices.some((t=>t.name===e)),...i}}return{}}};s(2087);var ft=s(5730);const ht=(e={})=>{const t={countryCodeOnly:!1},s={...t,...e},n=void 0!==navigator.languages?navigator.languages[0]:navigator.language;if(!n)return;const i=s.countryCodeOnly?n.trim().split(/-|_/)[0]:n.trim();return i};var gt=ht;r.ZP.use(ft.Z);const yt=()=>{const e=gt({countryCodeOnly:!0});return e&&G.findIndex((t=>t.code===e))>=0?e:J.VUE_APP_I18N_LOCALE||"en"},vt=yt(),bt=new ft.Z({locale:vt,fallbackLocale:J.VUE_APP_I18N_FALLBACK_LOCALE||"en",messages:{}}),St=[],wt=async e=>{if(St.length>0&&bt.locale===e)return e;if(St.includes(e))return bt.locale=e,e;try{return St.push(e),bt.locale=e,e}catch{return bt.locale}};wt(vt);var Pt=bt;let _t;const Ct={async reset({commit:e}){e("setReset")},async resetKlippy({commit:e}){e("setResetKlippy")},async initComponents({dispatch:e},t){if(t.components&&t.components.length>0){const s=J.MOONRAKER_COMPONENTS;for(const n in s){const i=s[n];t.components.includes(i.name)&&e(i.dispatch,void 0,{root:!0})}}},async onServerInfo({commit:e,dispatch:t,state:s},n){X.printerInfo(),X.serverConfig(),X.machineProcStats(),X.machineSystemInfo(),e("setServerInfo",n),"ready"!==n.klippy_state?(0===s.klippy_retries&&t("initComponents",n),e("setKlippyRetries",s.klippy_retries+1),clearTimeout(_t),_t=window.setTimeout((()=>{X.serverInfo()}),J.KLIPPY_RETRY_DELAY)):(e("setKlippyRetries",0),t("initComponents",n),X.printerObjectsList())},async onServerConfig({commit:e},t){t.config&&e("setServerConfig",t.config)},async onLogsRollOver(e,t){if(t?.failed&&Object.keys(t.failed).length>0){const e=Object.values(t.failed).join("\n");ze.$emit(e,{type:Je.error})}else if(t?.rolled_over&&t.rolled_over.length){const e=t.rolled_over.map(r.ZP.$filters.startCase).join(", "),s=Pt.tc("app.general.msg.rolledover_logs",0,{applications:e});ze.$emit(s,{type:Je.success})}},async onMachineProcStats({commit:e,dispatch:t},s){if(s&&s.throttled_state&&await t("onMachineThrottledState",s.throttled_state),e("setMoonrakerStats",s),s.moonraker_stats&&"cpu_usage"in s.moonraker_stats&&!Array.isArray(s.moonraker_stats)){const t=s.moonraker_stats;t.cpu_usage<=100&&e("charts/setChartEntry",{type:"moonraker",retention:600,data:{date:new Date(1e3*t.time),load:t.cpu_usage.toFixed(2)}},{root:!0})}},async onMachineSystemInfo({commit:e},t){e("setSystemInfo",t)},async onServiceStateChanged({commit:e},t){e("setServiceState",t)},async onMachineThrottledState({commit:e,dispatch:t,state:s},n){n&&(n&&n.flags.length>0&&n.flags.forEach((e=>{if(s.throttled_state&&!s.throttled_state.flags.includes(e)){const n=e.toLowerCase().startsWith("previously");let i={id:e,title:e,description:"This may lead to a throttle condition and result in a failed print",to:"https://www.raspberrypi.com/documentation/computers/raspberry-pi.html#frequency-management-and-thermal-control",type:n?"info":"error",snackbar:!n,merge:!0,clear:!n,noCount:n};"Temperature Limit Active"!==e&&"Frequency Capped"!==e||!s.cpu_temp||(i={...i,suffix:`${s.cpu_temp.toFixed(0)}<small>°C</small>`,suffixIcon:"$tempError"}),n||(i={...i,description:"This may lead to a failed print"}),t("notifications/pushNotification",i,{root:!0})}})),e("setMoonrakerStats",{throttled_state:n}))}},At={setReset(e){Object.assign(e,ut())},setResetKlippy(e){const{klippy_retries:t,info:s}=ut();Object.assign(e,{klippy_retries:t,info:s})},setServerInfo(e,t){r.ZP.set(e,"info",t)},setSystemInfo(e,t){t.system_info&&r.ZP.set(e,"system_info",t.system_info)},setServiceState(e,t){t&&e.system_info?.service_state&&Object.assign(e.system_info.service_state,t)},setServerConfig(e,t){e.config={...e.config,...t}},setMoonrakerStats(e,t){if(t.cpu_temp&&r.ZP.set(e,"cpu_temp",t.cpu_temp),t.throttled_state&&(e.throttled_state={...e.throttled_state,...t.throttled_state}),t.moonraker_stats&&Array.isArray(t.moonraker_stats))r.ZP.set(e,"moonraker_stats",t.moonraker_stats);else if(e.moonraker_stats){e.moonraker_stats.push(t.moonraker_stats);while(e.moonraker_stats.length>30)e.moonraker_stats.splice(0,1)}},setKlippyRetries(e,t){e.klippy_retries=t}},xt=!0,kt={namespaced:xt,state:dt,getters:mt,actions:Ct,mutations:At},Ft=()=>({printer:{endstops:{},bed_mesh:{profile_name:""},heaters:{available_heaters:[],available_sensors:[]},info:{state:"",state_message:""},configfile:{warnings:[],save_config_pending:!1,save_config_pending_items:{},config:{virtual_sdcard:{},pause_resume:{},display_status:{},"gcode_macro CANCEL_PRINT":{}},settings:{bed_mesh:{},fan:{},printer:{max_accel_to_decel:500,max_accel:1e3,max_velocity:100,square_corner_velocity:3,kinematics:"none"},virtual_sdcard:{},pause_resume:{},display_status:{},"gcode_macro cancel_print":{},extruder:{max_extrude_only_velocity:100,max_extrude_only_distance:100}}},objects:[],idle_timeout:{state:""},print_stats:{state:"",print_duration:0,total_duration:0,filament_used:0,filename:""},display_status:{progress:0,message:""},virtual_sdcard:{file_position:0,is_active:!1,progress:0},toolhead:{estimated_print_time:0,homed_axes:"",max_accel:0,max_accel_to_decel:0,max_velocity:0,position:[0,0,0,0],print_time:0,square_corner_velocity:0,extruder:""},motion_report:{live_position:[0,0,0,0],live_velocity:0,live_extruder_velocity:0},firmware_retraction:{retract_length:0,unretract_extra_length:0,unretract_speed:0,retract_speed:0},current_file:{estimated_time:0,filament_total:0,thumbnails:[]},gcode_move:{gcode_position:[0,0,0,0],homing_origin:[],speed:0},manual_probe:{is_active:!1,z_position:null,z_position_lower:null,z_position_upper:null},bed_screws:{is_active:!1,state:null,current_screw:0,accepted_screws:0},fan:{speed:0},webhooks:{state:"",state_message:""}}}),Et=Ft();var Dt=s(9654),Ot=e=>{const t=["temperature_fan","controller_fan","heater_fan","fan_generic","fan"],s=["temperature_sensor","temperature_probe","z_thermal_adjust"],n=["heater_generic","extruder"],i=["heater_bed"];return t.some((t=>e.startsWith(t)))?"fan":s.some((t=>e.startsWith(t)))?"sensor":n.some((t=>e.startsWith(t)))?"heater":i.some((t=>e.startsWith(t)))?"bed":""};const Bt={getklippyReady:(e,t,s,n)=>{const i=n["server/getInfo"],r=i.klippy_state||"",o=i.klippy_connected||!1;return!("ready"!==r||!o)},getKlippyState:(e,t,s,n)=>{const i=n["server/getInfo"],o=i.klippy_state||"";return r.ZP.$filters.capitalize(o)},getKlippyStateMessage:(e,t,s,n)=>{const i=/(?:\r\n|\r|\n)/g,r=n["server/getInfo"];return!1===r.klippy_connected?"Klippy not connected.":e.printer.info.state_message&&""!==e.printer.info.state_message?e.printer.info.state_message.trim().replace(i,"<br />"):e.printer.webhooks.state_message&&""!==e.printer.webhooks.state_message?e.printer.webhooks.state_message.trim().replace(i,"<br />"):"Unknown"},getPrinterState:e=>{const t=e.printer.idle_timeout.state,s=e.printer.print_stats.state;return t&&s?"paused"===s.toLowerCase()||"cancelled"===s.toLowerCase()?s.toLowerCase():"printing"===t.toLowerCase()&&"printing"!==s.toLowerCase()?"busy":t.toLowerCase():"loading"},getPrintProgress:e=>{const{gcode_start_byte:t,gcode_end_byte:s,filename:n}=e.printer.current_file??{},{file_position:i}=e.printer.virtual_sdcard??{};if(t&&s&&i&&n===e.printer.print_stats.filename){if(i<=t)return 0;if(i>=s)return 1;const e=i-t,n=s-t;if(e>0&&n>0)return e/n}return e.printer.display_status.progress||0},getPrintLayers:e=>{const t=e.printer.print_stats.info?.total_layer;if("number"===typeof t)return t;const s=e.printer.current_file;if("layer_count"in s)return s.layer_count;if("first_layer_height"in s&&"layer_height"in s&&"object_height"in s){const e=Math.ceil((s.object_height-s.first_layer_height)/s.layer_height+1);if(e>0)return e}return 0},getPrintLayer:e=>{const t=e.printer.print_stats.info?.current_layer;if("number"===typeof t)return t;const s=e.printer.current_file,n=e.printer.print_stats.print_duration||0,i=e.printer.gcode_move.gcode_position;if(s&&n>0&&"first_layer_height"in s&&"layer_height"in s&&i&&i.length>=3){const t=e.printer.gcode_move.gcode_position[2],n=Math.ceil((t-s.first_layer_height)/s.layer_height+1);if(n>0)return n}return 0},getTimeEstimates:(e,t)=>{const s=t.getPrintProgress,n=Math.floor(Date.now()/1e3),i="print_stats"in e.printer&&"print_duration"in e.printer.print_stats?e.printer.print_stats.print_duration:0,r=e.printer.gcode_move.speed_factor||1;let o=0,a=0,c=0;s>0&&i>0&&(o=i/s,a=(o-i)/r,c=n+a);let l=0,u=0,d=0;"current_file"in e.printer&&"history"in e.printer.current_file&&"completed"===e.printer.current_file.history.status&&(l=e.printer.current_file.history.total_duration,u=(l-i)/r,d=n+u);let p=0,m=0,f=0;"current_file"in e.printer&&"estimated_time"in e.printer.current_file&&(p=e.printer.current_file.estimated_time,m=(p-i)/r,f=n+m);let h=c;return f>0&&(h=f),d>0&&(h=d),{progress:(100*s).toFixed(),duration:i,slicer:m,file:a,actual:u,eta:h}},getSystemStats:e=>e.printer.system_stats,getMcus:e=>{const t=[];return Object.keys(e.printer).filter((e=>e.startsWith("mcu"))).sort().forEach((s=>{t.push({name:s,...e.printer[s]})})),t},getExtruders:e=>{const t=Object.keys(e.printer).filter((e=>/^extruder\d{0,2}$/.exec(e))).length;return[...Array(t).keys()].map((e=>({key:`extruder${0===e?"":e}`,name:1===t?"Extruder":`Extruder ${e}`})))},getActiveExtruder:(e,t)=>{const s=e.printer.toolhead.extruder||"extruder";return t.getExtruderByName(s)},getExtruderByName:(e,t)=>s=>{const n=e.printer[s]||void 0,i=t.getPrinterSettings(s);if(!n||!i)return;const{min_extrude_temp:r}="extruder"===s?i:t.getPrinterSettings("extruder"),o={min_extrude_temp:r,config:{...i},...n};return o},getExtruderSteppers:(e,t)=>{const s=[];for(const n in e.printer){const[i,o]=n.split(" ",2);if("extruder_stepper"===i){const i=e.printer[n],a=t.getPrinterSettings(n);s.push({name:o,prettyName:r.ZP.$filters.startCase(o),key:n,enabled:e.printer.stepper_enable?.steppers[n],...i,config:{...a}})}}return s.sort(((e,t)=>e.name.localeCompare(t.name)))},getHomedAxes:e=>t=>{if(t&&t.length>0){let s=!1;const n=t.split("");return n.forEach((t=>{s=e.printer.toolhead.homed_axes.includes(t)})),s}return!1},getRunoutSensors:e=>{const t=["filament_switch_sensor","filament_motion_sensor"],s=[];for(const n in e.printer){const[i,r]=n.split(" ",2);if(t.includes(i)){const t=r??n,i=(0,Dt.Z)(e.printer,n,void 0);s.push({name:t,...i})}}return s},getEndstops:e=>{const t=[];return Object.keys(e.printer.endstops).sort().forEach((s=>{t.push({name:s,state:e.printer.endstops[s]})})),t},getProbe:(e,t)=>{const s=e.printer.probe;if(s&&!s.name){const e=["bltouch","smart_effector","probe"];for(const n of e){const e=t.getPrinterSettings(n);if(void 0!==e?.z_offset){const e={...s,name:n};return e}}}return s},getHeaters:(e,t)=>{const s=e.printer.heaters.available_heaters||[];if(s.length){const n=[];return s.forEach((s=>{const i=e.printer[s];if(i&&Object.keys(i).length>0){const e=t.getPrinterSettings(s),o=["heater_generic"],[a,c]=s.split(" ",2),l=c&&o.includes(a)?c:s,u=r.ZP.$colorset.next(Ot(s),s),d=r.ZP.$filters.startCase(l);n.push({...i,name:l,color:u,prettyName:d,key:s,minTemp:e?.min_temp,maxTemp:e?.max_temp})}})),n.sort(((e,t)=>e.name.localeCompare(t.name)))}return[]},getAllLeds:(e,t)=>t.getOutputs(["led","neopixel","dotstar"]),getAllFans:(e,t)=>t.getOutputs(["temperature_fan","controller_fan","heater_fan","fan_generic","fan"]),getToolHeadFans:(e,t)=>t.getOutputs(["heater_fan","fan"]),getOtherFans:(e,t)=>t.getOutputs(["temperature_fan","controller_fan","fan_generic"]),getPins:(e,t)=>{const s=t.getOutputs(["output_pin"]);return s.sort((e=>e.pwm?1:-1))},getPinByName:(e,t)=>e=>{const s=t.getPins;return s.find((t=>t.name===e))},getOutputs:(e,t)=>s=>{const n=["temperature_fan","controller_fan","heater_fan","fan_generic","fan"],i=["output_pin"],o=["led","neopixel","dotstar"],a=["fan","fan_generic","output_pin","led","neopixel","dotstar"],c=["temperature_fan"],l=["output_pin","temperature_fan","controller_fan","heater_fan","fan_generic","led","neopixel","dotstar"],u=s&&s.length?s:[...n,...i,...o],d=[];for(const p in e.printer){const[s,o]=p.split(" ",2),m=o??p;if(u.includes(s)&&(!l.includes(s)||!m.startsWith("_"))){const o="fan"===m?"Part Fan":r.ZP.$filters.startCase(m),l=c.includes(s)?r.ZP.$colorset.next(Ot(p),p):void 0,u=t.getPrinterSettings(p);let f={...e.printer[p],...t.getExtraSensorData(u?.sensor_type?.toLowerCase(),m),config:{...u},name:m,prettyName:o,key:p,color:l,type:s,controllable:a.includes(s)};n.includes(s)&&(f={...f,minTemp:u?.min_temp,maxTemp:u?.max_temp}),i.includes(s)&&(f={...f,pwm:!(!u||!u.pwm)&&u.pwm,scale:u&&u.scale?u.scale:1,controllable:(!u||!u.static_value)&&a.includes(s)}),d.push(f)}}return d.sort(((e,t)=>e.type.localeCompare(t.type)||e.name.localeCompare(t.name)))},getSensors:(e,t)=>{const s=["temperature_sensor","temperature_probe","z_thermal_adjust"],n=Object.keys(e.printer).reduce(((n,i)=>{const[o,a]=i.split(" ",2);if(s.includes(o)){const s=a??i,c=r.ZP.$filters.startCase(s),l=r.ZP.$colorset.next(Ot(i),i),u=t.getPrinterSettings(i);n[s]={...e.printer[i],...t.getExtraSensorData(u?.sensor_type?.toLowerCase(),s),config:{...u},minTemp:u?.min_temp??null,maxTemp:u?.max_temp??null,name:s,key:i,prettyName:c,color:l,type:o}}return n}),{});return Object.values(n).sort(((e,t)=>e.type.localeCompare(t.type)||e.name.localeCompare(t.name)))},getExtraSensorData:e=>(t,s)=>{const n=["bme280","htu21d"];if(n.includes(t)){const n=e.printer[`${t} ${s}`];if(n){const{pressure:e,humidity:t,gas:s}=n;return{pressure:e,humidity:t,gas:s}}}},getChartableSensors:e=>{const t=[["temperature_fan"],["temperature_probe","z_thermal_adjust","temperature_sensor"]],s=["temperature_fan"],n=Object.keys(e.printer),i=t.flatMap((e=>{const t=e.map((e=>new RegExp(s.includes(e)?`^${e}(?! _)`:`^${e}`)));return n.filter((e=>t.some((t=>t.test(e))))).sort(((e,t)=>e.localeCompare(t)))})),r=[...e.printer.heaters.available_heaters].sort(((e,t)=>e.localeCompare(t)));return[...r,...i]},getBedScrews:(e,t)=>{const s=t.getPrinterSettings("bed_screws"),n=[];for(let i=1;i<=99;i++){const e=s[`screw${i}`];if(!e)break;n.push({adjust:e,fine:s[`screw${i}_fine_adjust`],name:s[`screw${i}_name`]})}return n},getPrinterSettings:e=>t=>{if(e.printer&&e.printer.configfile&&e.printer.configfile.settings)return t?(0,Dt.Z)(e.printer.configfile.settings,t.toLowerCase(),void 0):e.printer.configfile.settings},getPrinterConfig:e=>t=>{if(e.printer&&e.printer.configfile&&e.printer.configfile.config)return t?(0,Dt.Z)(e.printer.configfile.config,t,void 0):e.printer.configfile.config},getHasWarnings:(e,t,s)=>!!(s.socket&&s.socket.open&&s.socket.ready&&(t.getPrinterWarnings.length>0||t.getKlipperWarnings.length>0||t.getMoonrakerFailedComponents.length>0||t.getMoonrakerWarnings.length>0)),getPrinterWarnings:(e,t)=>{const s=t.getPrinterConfig(),n=[];return s&&!("virtual_sdcard"in s)&&n.push({message:"[virtual_sdcard] not found in printer configuration."}),s&&!("pause_resume"in s)&&n.push({message:"[pause_resume] not found in printer configuration."}),!s||"display"in s||"display_status"in s||n.push({message:"[display_status] is required if you do not have a [display] defined."}),s&&!("gcode_macro CANCEL_PRINT"in s)&&n.push({message:"CANCEL_PRINT macro not found in configuration."}),n},getKlipperWarnings:e=>e.printer.configfile?.warnings||[],getMoonrakerFailedComponents:(e,t,s,n)=>n["server/getInfo"].failed_components||[],getMoonrakerWarnings:(e,t,s,n)=>n["server/getInfo"].warnings||[],getSaveConfigPending:e=>e.printer.configfile?.save_config_pending||!1,getSaveConfigPendingItems:e=>e.printer.configfile?.save_config_pending_items,getHasHomingOverride:(e,t)=>{const s=t.getPrinterConfig();return!(!s||!("homing_override"in s))},getIsManualProbeActive:e=>e.printer.manual_probe?.is_active||!1,getIsBedScrewsAdjustActive:e=>e.printer.bed_screws?.is_active||!1},Rt=(e,t)=>void 0!==e[t],It=(e,t,s)=>{"exclude_object"in e&&s("parts/onPartUpdate",e.exclude_object,{root:!0}),"print_stats"in e&&("state"in e.print_stats||"filename"in e.print_stats)&&s("parts/onPrintStatsUpdate",e.print_stats,{root:!0})},Lt=(e,t,s)=>{"print_stats"in e&&"state"in e.print_stats&&("printing"!==t.printer.printer.print_stats.state&&"printing"===e.print_stats.state?s("printer/onPrintStart",e,{root:!0}):("printing"===t.printer.printer.print_stats.state&&"complete"===e.print_stats.state||"printing"===t.printer.printer.print_stats.state&&"standby"===e.print_stats.state)&&s("printer/onPrintEnd",e,{root:!0}))},Tt=(e,t,s)=>{"print_stats"in e&&"filename"in e.print_stats&&e.print_stats.filename!==t.printer.printer.print_stats.filename&&(s("printer/setResetCurrentFile",void 0,{root:!0}),""!==e.print_stats.filename&&null!==e.print_stats.filename&&X.serverFilesMetaData(e.print_stats.filename))},Mt=(e,t,s)=>{const n=Object.keys(e).filter((e=>e.startsWith("mcu")));n.length>0&&n.forEach((n=>{const i={...t.printer.printer[n],...e[n]};if(i.last_stats){const e=new Date;let r;t.charts[n]&&(r=t.charts[n][t.charts[n].length-1]);const o=.0025,a=5,c=100*(i.last_stats.mcu_task_avg+3*i.last_stats.mcu_task_stddev)/o,l=i.last_stats.mcu_awake/a*100,u=25e3,d=r?e.getTime()-r.date.getTime():1e3;let p=i.last_stats.bytes_write+i.last_stats.bytes_retransmit,m=r?parseFloat(r.bw):p;p<m&&(m=p),p=100*(p-m)/(u*d),s("charts/setChartEntry",{type:n,retention:600,data:{date:e,load:c.toFixed(2),awake:l.toFixed(2),bw:p.toFixed(2)}},{root:!0})}}))},Wt=(e,t,s)=>{if("system_stats"in e){const n={...t.printer.printer.system_stats,...e.system_stats},i=new Date;if("memavail"in n&&t.server.system_info?.cpu_info?.total_memory){const e=t.server.system_info?.cpu_info?.total_memory||0,r=e-n.memavail,o=Math.ceil(r/e*100);s("charts/setChartEntry",{type:"memory",retention:600,data:{date:i,memused:o.toFixed(2)}},{root:!0})}if("cputime"in n&&"sysload"in n){const e=n.cputime,r=t.printer.printer.system_stats?.cputime||n.cputime||0;s("charts/setChartEntry",{type:"klipper",retention:600,data:{date:i,load:n.sysload.toFixed(2),cputime_change:(100*(e-r)).toFixed(2)}},{root:!0})}}},Nt=(e,t,s,n)=>{const i=()=>{const e=new Date,s={date:e},i=n.getChartableSensors;return i.forEach((e=>{const n=e.split(" ",2).pop()||"",i=t.printer.printer[e].temperature,r=t.printer.printer[e].target,o=t.printer.printer[e].power,a=t.printer.printer[e].speed;s[n]=i,void 0!==r&&(s[`${n}Target`]=r),void 0!==o&&(s[`${n}Power`]=o),void 0!==a&&(s[`${n}Speed`]=a)})),s};if(t.charts.ready){const t=i();s("charts/setChartEntry",{type:"chart",data:t,retention:e},{root:!0})}},Ut={};function jt(e,t){let s;t?Ut[t]?s=Ut[t]:Ut[t]||(Ut[t]=s=Ht()):s=Ht();const n=new s.contentWindow.Function(e)();return t||s.remove(),n}function Ht(){const e=document.createElement("iframe");return e.style.display="none",document.body.appendChild(e),e}const Zt={async reset({commit:e}){e("setReset")},async onPrinterInfo({commit:e},t){e("setPrinterInfo",t)},async onQueryEndstops({commit:e},t){e("setQueryEndstops",t)},async onPrintCancel(){i().debug("Print Cancelled")},async onPrintPause(){i().debug("Print Paused")},async onPrintResume(){i().debug("Print Resumed")},async onPrintStart(e,t){i().debug("Print start detected",t)},async onPrintEnd(e,t){i().debug("Print end detected",t)},async onPrinterObjectsList({commit:e},t){let s={};t.objects.forEach((t=>{t.includes("menu")||(s={...s,[t]:null});let n=t;t.includes(" ")&&(n=n.replace(" ",".")),e("printer/setPrinterObjectList",n,{root:!0})})),X.printerObjectsSubscribe(s)},async onPrinterObjectsSubscribe({commit:e,dispatch:t},s){e("socket/setAcceptNotifications",!0,{root:!0}),await t("onNotifyStatusUpdate",s.status),X.serverGcodeStore(),X.printerGcodeHelp(),X.serverTemperatureStore()},async onNotifyStatusUpdate({rootState:e,commit:t,getters:s,dispatch:n},i){if(i&&e.socket.acceptingNotifications){Tt(i,e,t),Lt(i,e,n),It(i,e,n),Wt(i,e,t),Mt(i,e,t);for(const e in i){const s=i[e];t("printer/setSocketNotify",{key:e,payload:s},{root:!0})}const r=e.server.config,o=r?.data_store?.temperature_store_size??r?.server?.temperature_store_size??J.CHART_HISTORY_RETENTION;Nt(o,e,t,s),n("onDiagnosticsMetricsUpdate")}},async onFastNotifyStatusUpdate({rootState:e,commit:t,dispatch:s},n){n&&e.socket.acceptingNotifications&&(t("printer/setSocketNotify",n,{root:!0}),s("onDiagnosticsMetricsUpdate"))},async onDiagnosticsMetricsUpdate({rootState:e,commit:t,rootGetters:s}){if(!e.config.uiSettings.general.enableDiagnostics)return;const n=e.layout.layouts.diagnostics,i=Object.values(n).flat().map((e=>e.axes)).flat().filter((e=>e.enabled)).map((e=>e.metrics)).flat(),r=Array.from(new Set(i.map((e=>e.collector))));let o;try{if(o=jt(`\n      const printer = ${JSON.stringify(e.printer.printer)}\n      const collectors = ${JSON.stringify(r)}\n      const result = { }\n\n      for (const collector of collectors) {\n        try {\n          result[collector] = eval(collector)\n        } catch (err) {\n          result[collector] = err.message\n        }\n      }\n\n      return JSON.stringify(result) // in order to only return serializable data\n    `,"metrics"),"string"!==typeof o)throw new Error("Metrics collector returned invalid data");o=JSON.parse(o)}catch(a){o=Object.fromEntries(r.map((e=>[e,a?.message??"Unknown Error"])))}o.date=new Date,t("charts/setChartEntry",{type:"diagnostics",retention:s["charts/getChartRetention"],data:o},{root:!0})}},Qt={setReset(e){Object.assign(e,Ft())},setPrinterInfo(e,t){r.ZP.set(e.printer,"info",t)},setQueryEndstops(e,t){e.printer.endstops=t},setPrinterBusy(e,t){e.printer.busy=t},setPrinterObjectList(e,t){e.printer.objects.includes(t)||e.printer.objects.push(t)},setClearEndStops(e){e.printer.endstops={}},setResetCurrentFile(e){const t=Ft().printer.current_file;i().debug("resetting current file",t),r.ZP.set(e.printer,"current_file",t)},setSocketNotify(e,t){if("object"===typeof t.payload){const s=(0,Dt.Z)(e.printer,t.key);void 0===s?r.ZP.set(e.printer,t.key,t.payload):Object.keys(t.payload).forEach((n=>{s[n]!==t.payload[n]&&r.ZP.set(e.printer[t.key],n,t.payload[n])}))}else(0,Dt.Z)(e.printer,t.key)!==t.payload&&r.ZP.set(e.printer,t.key,t.payload)}},zt=!0,Jt={namespaced:zt,state:Et,getters:Bt,actions:Zt,mutations:Qt},Kt=()=>({apiUrl:"",socketUrl:"",layoutMode:!1,containerColumnCount:2,hostConfig:{endpoints:[],blacklist:[],hosted:!1,themePresets:[]},instances:[],uiSettings:{general:{instanceName:J.APP_NAME,locale:"en",chartVisible:!0,hideTempWaits:!0,axis:{x:{inverted:!1},y:{inverted:!1},z:{inverted:!1}},defaultExtrudeLength:10,defaultExtrudeSpeed:5,defaultToolheadMoveLength:1,defaultToolheadXYSpeed:130,defaultToolheadZSpeed:10,toolheadMoveDistances:[.1,1,10,25,50,100],useGcodeCoords:!1,zAdjustDistances:[.005,.01,.025,.05],enableVersionNotifications:!0,confirmOnEstop:!1,confirmOnPowerDeviceChange:!1,confirmOnSaveConfigAndRestart:!0,dateFormat:"iso",timeFormat:"iso",textSortOrder:"default",showRateOfChange:!1,showRelativeHumidity:!0,showBarometricPressure:!0,showGasResistance:!0,showSaveConfigAndRestart:!0,showUploadAndPrint:!0,flipConsoleLayout:!1,cameraFullscreenAction:"embed",topNavPowerToggle:null,showManualProbeDialogAutomatically:!0,showBedScrewsAdjustDialogAutomatically:!0,forceMoveToggleWarning:!0,enableDiagnostics:!1,thumbnailSize:32},theme:{isDark:!0,logo:{src:"/logo_fluidd.svg",dynamic:!0},currentTheme:{primary:"#2196F3"}},editor:{confirmDirtyEditorClose:!0,autoEditExtensions:[".cfg",".conf",".ini",".log",".md",".sh",".txt"],codeLens:!0},dashboard:{tempPresets:[]},tableHeaders:{gcodes_dashboard:[{value:"first_layer_extr_temp",visible:!1},{value:"first_layer_bed_temp",visible:!1},{value:"chamber_temp",visible:!1},{value:"history.total_duration",visible:!1},{value:"history.print_duration",visible:!1},{value:"estimated_time",visible:!1},{value:"nozzle_diameter",visible:!1},{value:"slicer_version",visible:!1},{value:"slicer",visible:!1},{value:"history.filament_used",visible:!1},{value:"filament_name",visible:!1},{value:"filament_type",visible:!1},{value:"filament_total",visible:!1},{value:"filament_weight_total",visible:!1},{value:"object_height",visible:!1},{value:"first_layer_height",visible:!1},{value:"layer_height",visible:!1}],gcodes_jobs:[{value:"first_layer_height",visible:!1},{value:"history.filament_used",visible:!1},{value:"slicer_version",visible:!1},{value:"history.print_duration",visible:!1},{value:"chamber_temp",visible:!1},{value:"first_layer_extr_temp",visible:!1},{value:"first_layer_bed_temp",visible:!1}],history:[{value:"print_duration",visible:!1},{value:"filament_used",visible:!1}],job_queue:[{value:"time_added",visible:!0},{value:"time_in_queue",visible:!1}]},gcodePreview:{extrusionLineWidth:.3,moveLineWidth:.1,retractionIconSize:.6,drawBackground:!0,showAnimations:!0,minLayerHeight:.1,autoLoadOnPrintStart:!1,autoLoadMobileOnPrintStart:!1,autoFollowOnFileLoad:!0,autoZoom:!1,flip:{horizontal:!1,vertical:!0}},fileSystem:{activeFilters:{gcodes:[],config:[]}},toolhead:{forceMove:!1,extrudeSpeed:-1,extrudeLength:-1}}}),Gt=Kt();var Vt=s(7243),Yt=s(2573),qt=s.n(Yt);const Xt={getCurrentInstance:e=>e.instances.find((e=>e.active)),getInstances:e=>{const t=[...e.instances].sort(((e,t)=>e.active?-1:t.active?1:e.name.localeCompare(t.name)));return t},getHostConfig:e=>e.hostConfig,getTempPresets:(e,t,s,n)=>{const i=e.uiSettings.dashboard.tempPresets,r=[],o=n["printer/getHeaters"],a=n["printer/getOutputs"](["temperature_fan"]);return i.forEach((e=>{const t={...e,values:{}};o.forEach((s=>{e.values[s.name]?t.values[s.name]={...e.values[s.name]}:t.values[s.name]={value:0,type:"heater",active:!1}})),a.forEach((s=>{e.values[s.name]?t.values[s.name]={...e.values[s.name]}:t.values[s.name]={value:0,type:"fan",active:!1}})),r.push(t)})),r.sort(((e,t)=>e.name.localeCompare(t.name)))},getTheme:e=>{const t=e.uiSettings.theme,s=e.uiSettings.theme,n={...e.uiSettings.theme,currentTheme:{...t.currentTheme,...s.currentTheme}};for(const i in n.currentTheme)n.currentTheme[i+"Offset"]=(0,Vt.ZP)(s.currentTheme.primary).desaturate(5).darken(10).toHexString();return n},getCustomThemeFile:(e,t,s,n)=>(e,t)=>{const s=n["files/getRootFiles"]("config");if(s)for(const n of t){const t=`.fluidd-theme/${e}${n}`;if(s.some((e=>e.path===t)))return t}},getDefaultThemePreset:e=>e.hostConfig.themePresets.length>0?e.hostConfig.themePresets[0]:{name:"Fluidd",logo:{src:"/logo_fluidd.svg",changeWithTheme:!0},color:"#2196F3"},getCurrentThemePreset:(e,t)=>{const s=e.hostConfig.themePresets,n=t.getTheme;return s.find((e=>e.logo.src===n.logo.src))},getMergedTableHeaders:(e,t)=>(e,s)=>{const n=t.getConfiguredTableHeaders(s);if(!n)return e;const i=[];return e.forEach((e=>{const t=e.key?"key":"value",s={visible:!0,configurable:!1,...e,...n.find((s=>s[t]===e[t]))};i.push(s)})),i},getConfiguredTableHeaders:e=>t=>e.uiSettings.tableHeaders[t],getTokenKeys:e=>{const t=e.apiUrl,s=t?qt()(t):"";return{"user-token":`user-token-${s}`,"refresh-token":`refresh-token-${s}`}}},$t={async reset({commit:e}){e("setReset")},async initUiSettings({commit:e,dispatch:t,state:s},n){e("setInitUiSettings",n),s.uiSettings.theme&&console.log("vuetify.framework.theme.dark = state.uiSettings.theme.isDark\nvuetify.framework.theme.currentTheme.primary = state.uiSettings.theme.currentTheme.primary"),n.general&&n.general.locale&&t("onLocaleChange",n.general.locale)},async onLocaleChange({dispatch:e,state:t},s){e("wait/addWait",K.onLoadLanguage,{root:!0});const n=yt(),i="default"!==s?await wt(s):await wt(n);t.uiSettings.general.locale!==s&&e("saveByPath",{path:"uiSettings.general.locale",value:"default"!==s?i:s,server:!0}),e("wait/removeWait",K.onLoadLanguage,{root:!0})},async initHost({commit:e},t){e("setInitHostConfig",t.hostConfig)},async initLocal({commit:e},t){e("setInitInstances",t)},async onInitApiConfig({commit:e},t){e("setInitApiConfig",t)},async removeInstance({commit:e},t){e("setRemoveInstance",t)},async updateInstance({commit:e,dispatch:t,state:s,getters:n},i){t("saveByPath",{path:"uiSettings.general.instanceName",value:i,server:!0});let r=n.getCurrentInstance;r&&(r={...r,name:s.uiSettings.general.instanceName},e("setUpdateInstanceName",r))},async saveByPath({commit:e},t){e("setSaveByPath",t),t.server&&X.serverWrite(t.path,t.value)},async updatePreset({commit:e,state:t},s){e("setPreset",s),X.serverWrite("uiSettings.dashboard.tempPresets",t.uiSettings.dashboard.tempPresets)},async removePreset({commit:e,state:t},s){e("setRemovePreset",s),X.serverWrite("uiSettings.dashboard.tempPresets",t.uiSettings.dashboard.tempPresets)},async updateHeader({commit:e,state:t},s){e("setUpdateHeader",s),t.uiSettings.tableHeaders[s.name]&&X.serverWrite(`uiSettings.tableHeaders.${s.name}`,t.uiSettings.tableHeaders[s.name])}};var es=s(5578),ts=s(3595),ss=s(9853);const ns={setReset(e){Object.assign(e,Kt())},setInitUiSettings(e,t){if(t){const s=(0,es.Z)(e.uiSettings,t);t.general&&t.general.zAdjustDistances&&r.ZP.set(s.general,"zAdjustDistances",t.general.zAdjustDistances),t.general&&t.general.toolheadMoveDistances&&r.ZP.set(s.general,"toolheadMoveDistances",t.general.toolheadMoveDistances),t.editor&&t.editor.autoEditExtensions&&r.ZP.set(s.editor,"autoEditExtensions",t.editor.autoEditExtensions),r.ZP.set(e,"uiSettings",s)}},setInitApiConfig(e,t){e.apiUrl=t.apiUrl,e.socketUrl=t.socketUrl,t.name&&""!==t.name&&(e.uiSettings.general.instanceName=t.name)},setInitHostConfig(e,t){if(e.hostConfig.blacklist=t.blacklist,e.hostConfig.endpoints=t.endpoints,e.hostConfig.hosted=t.hosted,e.hostConfig.themePresets=t.themePresets,t.themePresets&&t.themePresets.length>=1){const s=t.themePresets[0];r.ZP.set(e.uiSettings,"theme",{isDark:s.isDark,logo:s.logo,currentTheme:{primary:s.color},...e.uiSettings.theme})}},setInitInstances(e,t){let s=[];const n=t.apiConfig,i=e.uiSettings;J.LOCAL_INSTANCES_STORAGE_KEY in localStorage&&(s=JSON.parse(localStorage[J.LOCAL_INSTANCES_STORAGE_KEY]));const o=s.findIndex((e=>e.apiUrl===t.apiConfig.apiUrl));-1===o?(i||null===i)&&n&&""!==n.apiUrl&&""!==n.socketUrl&&(s.forEach((e=>{e.active=!1})),s.push({...n,active:!0,name:e.uiSettings.general.instanceName})):s.forEach(((t,s)=>{t.active=s===o,s===o&&""!==t.name&&(t.name=e.uiSettings.general.instanceName)})),localStorage.setItem(J.LOCAL_INSTANCES_STORAGE_KEY,JSON.stringify(s)),r.ZP.set(e,"instances",s)},setUpdateInstanceName(e,t){const s=e.instances.findIndex((e=>e.apiUrl===t.apiUrl));if(s>-1){const n=e.instances[s];r.ZP.set(e.instances,s,{...n,...t})}localStorage.setItem(J.LOCAL_INSTANCES_STORAGE_KEY,JSON.stringify(e.instances))},setRemoveInstance(e,t){const s=e.instances,n=s.findIndex((e=>e.apiUrl===t.apiUrl));n>=0&&(s.splice(n,1),r.ZP.set(e,"instances",s),localStorage.setItem(J.LOCAL_INSTANCES_STORAGE_KEY,JSON.stringify(s)))},setSaveByPath(e,t){(0,ts.Z)(e,t.path,t.value)},setPreset(e,t){if(-1===t.id)t.id=(0,ss.Z)(),e.uiSettings.dashboard.tempPresets.push(t);else{const s=e.uiSettings.dashboard.tempPresets.findIndex((e=>e.id===t.id));s>=0&&r.ZP.set(e.uiSettings.dashboard.tempPresets,s,t)}},setRemovePreset(e,t){const s=e.uiSettings.dashboard.tempPresets.findIndex((e=>e.id===t.id));e.uiSettings.dashboard.tempPresets.splice(s,1)},setLayoutMode(e,t){e.layoutMode=t},setContainerColumnCount(e,t){e.containerColumnCount=t},setUpdateHeader(e,t){const s=t.header,n=s.key?"key":"value",i=s[n],o=e.uiSettings.tableHeaders[t.name];if(o){const e=o.findIndex((e=>e[n]===i));if(e>=0)r.ZP.set(o,e,{...o[e],visible:s.visible});else{const e={value:s.value,visible:s.visible};"key"===n&&(e.key=s.key),o.push(e)}}}},is=!0,rs={namespaced:is,state:Gt,getters:Xt,actions:$t,mutations:ns},os=()=>({uploads:[],download:null,fileTransferCancelTokenSource:null,currentPaths:{},disk_usage:{total:0,used:0,free:0},rootFiles:{gcodes:[],config:[],config_examples:[],docs:[],logs:[],timelapse:[]},gcodes:[],config:[],config_examples:[],docs:[],logs:[],timelapse:[]}),as=os(),cs={getDirectory:e=>(t,s)=>{const n=e[t]?.find((e=>e.path===s));return n},getRootFiles:e=>t=>e.rootFiles[t],isRootAvailable:(e,t,s)=>e=>s.server.info.registered_directories.includes(e),getRootProperties:()=>e=>{switch(e){case"gcodes":return{readonly:!1,accepts:[".gcode",".g",".gc",".gco",".ufp",".nc"],canEdit:!0,canView:!1,canPrint:!0,canConfigure:!0,filterTypes:["hidden_files","print_start_time"]};case"config":return{readonly:!1,accepts:[".conf",".cfg",".md",".css",".jpg",".jpeg",".png",".gif"],canEdit:!0,canView:!1,canPrint:!1,canConfigure:!1,filterTypes:["hidden_files","klipper_backup_files"]};case"config_examples":return{readonly:!0,accepts:[],canEdit:!1,canView:!0,canPrint:!1,canConfigure:!1,filterTypes:[]};case"docs":return{readonly:!0,accepts:[],canEdit:!1,canView:!0,canPrint:!1,canConfigure:!1,filterTypes:[]};case"logs":return{readonly:!0,accepts:[],canEdit:!1,canView:!0,canPrint:!1,canConfigure:!1,filterTypes:[]};case"timelapse":return{readonly:!0,accepts:[],canEdit:!1,canView:!0,canPrint:!1,canConfigure:!1,canDelete:!0,canCreateDirectory:!0,filterTypes:["hidden_files"]};default:return{readonly:!0,accepts:[],canEdit:!1,canView:!0,canPrint:!1,canConfigure:!1,filterTypes:[]}}},getFile:(e,t)=>(e,s,n)=>{const i=t.getDirectory(e,s),r=i?.items?.find((e=>"file"===e.type&&e.filename===n));return r},getCurrentPathByRoot:e=>t=>e.currentPaths[t]||"",getLowOnSpace:e=>e.disk_usage.free<1073741824,getUsage:e=>e.disk_usage,getFilesList:e=>e.gcodes[0].items};var ls=s(8428),us=s.n(ls),ds=(e,t)=>{let s=e.substr(0,e.lastIndexOf("/"));return s=s&&s.startsWith(t)?s.substring(t.length):s,{filename:e.split("/").pop()||"",path:s,rootPath:0===s.length?t:t+"/"+s}},ps=(e,t)=>{if("path"in t){const s=ds(t.path,e);return{type:"file",filename:s.filename,extension:s.filename.split(".").pop()||"",name:s.filename,path:s.path,size:t.size,modified:t.modified}}const s=ds(t.filename,e);return{...t,type:"file",filename:s.filename,extension:s.filename.split(".").pop()||"",name:s.filename,path:s.path,modified:new Date(t.modified).getTime()}};const ms={async reset({commit:e}){e("setReset")},async onServerFilesGetDirectory({commit:e,rootState:t},s){const n=s.__request__.params.path,i=s.__request__.params.root,r=n.length>i.length?n.substring(i.length+1):n.substring(i.length),o=[];n&&n.indexOf("/")>=0&&o.push({type:"directory",dirname:"..",name:"..",size:0,modified:0}),s.dirs&&s.dirs.forEach((e=>{J.FILTERED_FILES_PREFIX.some((t=>e.dirname.startsWith(t)))||J.FILTERED_FILES_EXTENSION.some((t=>e.dirname.endsWith(t)))||o.push({...e,type:"directory",name:e.dirname,modified:new Date(e.modified).getTime()})})),s.files&&s.files.forEach((e=>{if(!J.FILTERED_FILES_PREFIX.some((t=>e.filename.startsWith(t)))&&!J.FILTERED_FILES_EXTENSION.some((t=>e.filename.endsWith(t)))){let s={};if(e.job_id){const n=t.history.jobs.find((t=>t.job_id===e.job_id));n&&(s=n)}o.push({...e,type:"file",name:e.filename,extension:e.filename.split(".").pop()||"",modified:new Date(e.modified).getTime(),path:"/"===r?"":r,history:s})}})),e("setDiskUsage",s.disk_usage),e("setServerFilesGetDirectory",{root:i,directory:{path:n,items:o}}),n.startsWith("gcodes")&&e("ourExtension/layoutsData/fileBrowseWindow/setFiles",{items:o,path:n},{root:!0})},async onServerFilesListRoot({commit:e},t){const s=t.__request__.params.root;e("setServerFilesListRoot",{root:s,files:t})},async onFileMetaData({commit:e,rootState:t,rootGetters:s},n){const i="gcodes",r=ds(n.filename,i);let o=ps(i,n);const a=o.path?`${o.path}/${o.filename}`:`${o.filename}`;if(a===t.printer.printer.print_stats.filename){const t=s["history/getHistoryByFilename"](a);t&&(o={...o,history:t}),e("printer/setSocketNotify",{key:"current_file",payload:o},{root:!0})}const c={paths:r,root:i,file:o};e("setFileUpdate",c)},async notifyCopyItem({dispatch:e},t){e("notifyModifyFile",t)},async notifyMoveItem({dispatch:e},t){e("notifyMoveFile",t)},async notifyUploadFile({dispatch:e},t){e("notifyCreateFile",t)},async notifyRootUpdate({commit:e},t){const s=t.item.root;e("setResetRoot",s),X.serverFilesGetDirectory(s,s)},async notifyModifyFile(e,t){const s=t.item.root,n=ds(t.item.path,s);if(X.serverFilesGetDirectory(s,n.rootPath),t.source_item){const e=ds(t.source_item.path,s);n.rootPath!==e.rootPath&&X.serverFilesGetDirectory(s,e.rootPath)}},async notifyCreateFile({commit:e,dispatch:t,rootState:s},n){const i=n.item.root,r=ps(i,n.item);if("gcode"===r.extension){const e=s.gcodePreview.file;e&&e.path===r.path&&e.filename===r.filename&&t("gcodePreview/reset",void 0,{root:!0}),X.serverFilesMetaData(n.item.path)}else{const t=ds(n.item.path,i),s={paths:t,root:i,file:r};e("setFileUpdate",s)}},async notifyCreateDir(e,t){const s=t.item.root,n=ds(t.item.path,s);X.serverFilesGetDirectory(s,n.rootPath)},async notifyMoveFile(e,t){const s=t.item.root,n=ds(t.item.path,s);if(X.serverFilesGetDirectory(s,n.rootPath),t.source_item){const e=ds(t.source_item.path,s);n.rootPath!==e.rootPath&&X.serverFilesGetDirectory(s,e.rootPath)}},async notifyMoveDir(e,t){const s=t.item.root,n=ds(t.item.path,s);if(X.serverFilesGetDirectory(s,n.rootPath),t.source_item){const e=ds(t.source_item.path,s);n.rootPath!==e.rootPath&&X.serverFilesGetDirectory(s,e.rootPath)}},async notifyDeleteFile({commit:e},t){const s=t.item.root,n=ds(t.item.path,s),i=ps(s,t.item),r={paths:n,root:s,file:i};e("setItemDelete",r)},async notifyDeleteDir({commit:e},t){const s=t.item.root,n=ds(t.item.path,s),i=ps(s,t.item),r={paths:n,root:s,file:i};e("setItemDelete",r),e("setPathDelete",{path:`${n.rootPath}/${n.filename}`,root:s})},async updateFileUpload({commit:e},t){e("setUpdateFileUpload",t)},async removeFileUpload({commit:e},t){e("setRemoveFileUpload",t)},async updateFileDownload({commit:e},t){e("setUpdateFileDownload",t)},async removeFileDownload({commit:e},t){e("setRemoveFileDownload",t)},async createFileTransferCancelTokenSource({commit:e}){const t=us().CancelToken.source();e("setFileTransferCancelTokenSource",t)},async cancelFileTransferWithTokenSource({commit:e,state:t},s){t.fileTransferCancelTokenSource&&t.fileTransferCancelTokenSource.cancel(s),e("setFileTransferCancelTokenSource",null)},async updateCurrentPathByRoot({commit:e},t){e("setCurrentPath",t)}},fs=(e,t,s)=>{const n=ds(s.filename,e);return s.filename=n.filename,{...t,...s}};var hs=fs;const gs={setReset(e){Object.assign(e,os())},setResetRoot(e,t){r.ZP.set(e,t,[]),e.currentPaths[t]&&r.ZP.set(e.currentPaths,t,void 0)},setServerFilesGetDirectory(e,t){const s=t.directory.path,n=t.root,i=e[n].findIndex((e=>e.path===s));i>=0?e[n].splice(i,1,t.directory):e[n].push(t.directory)},setServerFilesListRoot(e,t){const s=t.root;e.rootFiles[s]=t.files},setFileUpdate(e,t){const s=t.root,n=t.paths,i=e[s].find((e=>e.path===n.rootPath));if(i){const e=i.items.findIndex((e=>"file"===e.type&&e.filename===n.filename)),o=i.items[e],a=J.FILTERED_FILES_PREFIX.some((e=>t.paths.filename.startsWith(e)))||J.FILTERED_FILES_EXTENSION.some((e=>t.paths.filename.endsWith(e)));a||(e>=0?r.ZP.set(i.items,e,hs(s,o,t.file)):i.items.push(hs(s,{},t.file)))}},setItemDelete(e,t){const s=t.root,n=t.paths,i=e[s].find((e=>e.path===n.rootPath));if(i){const e=i.items.findIndex((e=>e.name===n.filename));e>=0&&i.items.splice(e,1)}},setPathDelete(e,t){const s=t.root,n=t.path,i=e[s].filter((e=>e.path.startsWith(n)));i.forEach((t=>{const n=e[s].findIndex((e=>t===e));n>=0&&e[s].splice(n,1)}))},setUpdateFileUpload(e,t){const s=e.uploads.findIndex((e=>e.filepath===t.filepath));s>=0?r.ZP.set(e.uploads,s,{...e.uploads[s],...t}):e.uploads.push(t)},setRemoveFileUpload(e,t){const s=e.uploads.findIndex((e=>e.filepath===t));s>=0&&e.uploads.splice(s,1)},setUpdateFileDownload(e,t){e.download&&null!==e.download?e.download={...e.download,...t}:e.download=t},setRemoveFileDownload(e){e.download=null},setFileTransferCancelTokenSource(e,t){e.fileTransferCancelTokenSource=t},setCurrentPath(e,t){r.ZP.set(e.currentPaths,t.root,t.path)},setDiskUsage(e,t){r.ZP.set(e,"disk_usage",t)}},ys=!0,vs={namespaced:ys,state:as,getters:cs,actions:ms,mutations:gs},bs=()=>({layouts:{dashboard:{container1:[{id:"printer-status-card",enabled:!0,collapsed:!1},{id:"camera-card",enabled:!0,collapsed:!1},{id:"toolhead-card",enabled:!0,collapsed:!1},{id:"macros-card",enabled:!0,collapsed:!1},{id:"outputs-card",enabled:!0,collapsed:!1},{id:"printer-limits-card",enabled:!0,collapsed:!1},{id:"retract-card",enabled:!0,collapsed:!1}],container2:[{id:"temperature-card",enabled:!0,collapsed:!1},{id:"console-card",enabled:!0,collapsed:!1},{id:"jobs-card",enabled:!0,collapsed:!1},{id:"job-queue-card",enabled:!1,collapsed:!1},{id:"gcode-preview-card",enabled:!0,collapsed:!1},{id:"bed-mesh-card",enabled:!1,collapsed:!1}]},diagnostics:{container1:[{id:(0,ss.Z)(),enabled:!0,title:"Speeds",collapsed:!1,height:300,icon:"motion",axes:[{enabled:!0,unit:"mm/s",showLegend:!0,metrics:[{collector:"printer.motion_report.live_velocity",name:"Velocity",style:{lineStyle:"solid",lineColor:"#2196f3",fillOpacity:0,displayLegend:!0}},{collector:"printer.toolhead.max_velocity",name:"Max Velocity",style:{lineStyle:"dotted",lineColor:"#0075d2",fillOpacity:0,displayLegend:!1}}]},{enabled:!0,unit:"mm³/s",showLegend:!0,max:20,metrics:[{collector:"printer.motion_report.live_extruder_velocity * Math.PI * (printer.configfile.settings.extruder.filament_diameter / 2) ** 2",name:"Flow",style:{lineStyle:"solid",lineColor:"#b12f36",fillOpacity:5,displayLegend:!0}},{collector:"12",name:"Max Flow",style:{lineStyle:"dashed",lineColor:"#820007",fillOpacity:0,displayLegend:!1}}]}]}]}}}),Ss=bs();var ws=s(9049);const Ps={getLayoutConfigById:e=>(t,s)=>{let n;for(const i in e.layouts[t]){if(n)break;const r=e.layouts[t][i];n=r.find((e=>e.id===s))}return n},getLayout:e=>t=>e.layouts[t]?(0,ws.Z)(e.layouts[t]):t.startsWith("dashboard")?(0,ws.Z)(e.layouts.dashboard):void 0,isEnabledInLayout:(e,t)=>(e,s)=>{const n=Object.values(t.getLayout(e)??{}).flat();return n.find((e=>e.id===s))?.enabled??!1},isEnabledInCurrentLayout:(e,t)=>e=>{const s=t.getSpecificLayoutName;return t.isEnabledInLayout(s,e)},getContainer:e=>(t,s)=>{if(e.layouts[t][s])return[...e.layouts[t][s]]},getConfig:(e,t)=>(e,s)=>{const n=t.getLayout(e);if(n)for(const t in n){const e=n[t].find((e=>e.id===s));if(e)return{...e}}},getSpecificLayoutName:(e,t,s,n)=>{const i=n["auth/getCurrentUser"];if(!i)return"dashboard";const r=-1;return`dashboard-${r}-${i.username}`}},_s={async reset({commit:e}){e("setReset")},async initLayout({commit:e},t){e("setInitLayout",t)},async onLayoutChange({commit:e,state:t},s){const n=t.layouts[s.name];(n||s.name.startsWith("dashboard"))&&(e("setLayoutChange",s),await X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.layout.name+".layouts",t.layouts))},async onUpdateConfig({commit:e,state:t,dispatch:s},n){let i=t.layouts[n.name];if(i||(s("onLayoutChange",{name:n.name,value:t.layouts.dashboard}),i=t.layouts[n.name]),i)for(const r in i){const s=i[r].findIndex((e=>e.id===n.value.id));s>=0&&(e("setUpdateConfig",{name:n.name,container:r,i:s,value:n.value}),await X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.layout.name+`.layouts.${n.name}.${r}`,t.layouts[n.name][r]))}}},Cs={setReset(e){Object.assign(e,bs())},setInitLayout(e,t){if(t&&Object.keys(t).length>0){const s=bs(),n=["dashboard"];for(const[e,i]of Object.entries(s.layouts))if(t.layouts[e]){if(n.includes(e)){const s=Object.values(i).flat().map((e=>e.id)),n=Object.values(t.layouts[e]).flat().map((e=>e.id));for(const[r,o]of Object.entries(i)){const i=t.layouts[e][r]||[];t.layouts[e][r]=[...i.filter((e=>s.includes(e.id))),...o.filter((e=>!n.includes(e.id)))]}}}else t.layouts[e]=i;Object.assign(e,t)}},setLayoutChange(e,t){r.ZP.set(e.layouts,t.name,t.value)},setUpdateConfig(e,t){r.ZP.set(e.layouts[t.name][t.container],t.i,t.value)}},As=!0,xs={namespaced:As,state:Ss,getters:Ps,actions:_s,mutations:Cs},ks=()=>({ready:!1,chart:[],selectedLegends:{}}),Fs=ks(),Es={getChartData:e=>e.chart,getSelectedLegends:e=>e.selectedLegends,getChartRetention:(e,t,s,n)=>{const i=n["server/getConfig"];return i.data_store?.temperature_store_size??i.server?.temperature_store_size??J.CHART_HISTORY_RETENTION},getBaseChartOptions:(e,t,s,n)=>(e={})=>{const t=s.config.uiSettings.theme.isDark,i=!1,o=t?"rgba(255,255,255,0.65)":"rgba(0,0,0,0.45)",a=i?13:14,c={color:t?"#ffffff":"#000000",opacity:.05},l={color:t?"#ffffff":"#000000",opacity:.5},u={show:!0,borderWidth:1,borderColor:t?"rgba(255,255,255,0.25)":"rgba(0,0,0,0.15)"},d={backgroundColor:t?"rgba(15,15,15,0.75)":"rgba(255,255,255,0.75)",borderColor:t?"rgba(0,0,0,0.85)":"rgba(255,255,255,0.85)",textStyle:{color:o,fontSize:a}},p=n["config/getTheme"],m=[p.currentTheme.primary,p.currentTheme.accent,p.currentTheme.info];return{color:m,grid:u,tooltip:{...d,show:!0,trigger:"axis",position:["-8px","-8px"],formatter:t=>{let s=!1,n="<div>";return t.forEach((t=>{const i=t.dimensionNames[t.encode.x],c=t.dimensionNames[t.encode.y],l=e[c]||"";i&&c&&t.seriesName&&(s||(n+=`\n                  <span style="font-size:${a}px;color:${o};font-weight:400;margin-left:2px">\n                    ${r.ZP.$filters.formatTimeWithSeconds(t.value[i])}\n                  </span>\n                  `,s=!0),n+=`\n                  <div style="white-space: nowrap;">\n                    ${t.marker}\n                    <span style="font-size:${a}px;color:${o};font-weight:400;margin-left:2px">\n                      ${t.seriesName}:\n                    </span>\n                    <span style="float:right;margin-left:20px;font-size:${a}px;color:${o};font-weight:900">\n                      ${t.value[c]}${l}\n                    </span>\n                    <div style="clear: both"></div>\n                  </div>\n                  <div style="clear: both"></div>\n                `)})),n+="</div>",n}},xAxis:{type:"time",boundaryGap:!1,min:e=>e.max-6e5,max:"dataMax",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1,formatter:"{value}%"},splitLine:{show:!0,lineStyle:c},axisPointer:{lineStyle:l}},yAxis:{type:"value",min:0,max:e=>e.max<=100?100:e.max,axisLabel:{show:!1,formatter:"{value}%"},splitLine:{show:!0,lineStyle:c}}}},getBaseSeries:()=>e=>{const t={type:"line",smooth:!0,animation:!1,showSymbol:!1,symbol:"emptyCircle",areaStyle:{type:"solid",opacity:.3},lineStyle:{type:"solid",width:1.5,opacity:1},emphasis:{lineStyle:{width:1.5}},...e};return t}};var Ds=s(5362);const Os={async reset({commit:e}){e("setReset")},async initTempStore({commit:e,rootGetters:t,rootState:s},n){const i=new Date,r=t["charts/getChartRetention"],o=["temperature_probe","temperature_sensor"];if(n&&0===Object.keys(n).length)return void e("setChartStore",[]);for(const l in n)o.some((e=>l.startsWith(e)))&&delete n[l].targets,["temperatures","targets","powers","speeds"].forEach((e=>{const t=n[l][e];if(t&&t.length)if(t.length<r){const s=r-t.length,i=n[l][e][0];n[l][e]=[...Array.from({length:s},(()=>i)),...n[l][e]]}else n[l][e]=n[l][e].splice(t.length-r)}));const a=Object.keys(n),c=[];for(let l=0;l<r;l++){const e=new Date(i.getTime()-1e3*(r-l)-2e3),t={date:e};a.forEach((e=>{const i=e.split(" ",2).pop()||"";if(s.printer.printer[e]){const r=s.printer.printer[e].temperature||0,o=s.printer.printer[e].target||0,a=s.printer.printer[e].power||0,c=s.printer.printer[e].speed||0;t[i]=n[e].temperatures[l]||r,"targets"in n[e]&&(t[`${i}Target`]=n[e].targets[l]||o),"powers"in n[e]&&(t[`${i}Power`]=n[e].powers[l]||a),"speeds"in n[e]&&(t[`${i}Speed`]=n[e].speeds[l]||c)}})),c.push(t)}e("setChartStore",c)},initCharts({commit:e},t){e("setInitCharts",t)},saveSelectedLegends({commit:e,state:t},s){(0,Ds.Z)(t.selectedLegends,s)||(e("setSelectedLegends",s),X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.charts.name+".selectedLegends",s))}},Bs={setReset(e){const t=ks();Object.keys(e).forEach((s=>{Object.keys(t).includes(s)||delete e[s]})),Object.assign(e,ks())},setInitCharts(e,t){t&&Object.assign(e,t)},setChartStore(e,t){e.chart=t,e.ready=!0},setChartEntry(e,t){e[t.type]||r.ZP.set(e,t.type,[]),e[t.type].push(t.data);const s=e[t.type].findIndex((e=>(Date.now()-e.date.valueOf())/1e3<t.retention));s>0&&e[t.type].splice(0,s)},setSelectedLegends(e,t){e.selectedLegends=t}},Rs=!0,Is={namespaced:Rs,state:Fs,getters:Es,actions:Os,mutations:Bs},Ls=()=>({consoleCommand:"",consoleEntryCount:0,console:[],availableCommands:{},commandHistory:[],autoScroll:!0,lastCleared:0,consoleFilters:[],consoleFiltersRegexp:[]}),Ts=Ls(),Ms=/^(?:ok\s+)?(b|t\d+):\d+\.\d+ \/\d+\.+\d+/i,Ws={getConsoleEntries:(e,t,s)=>{const n=s.config.uiSettings.general.hideTempWaits||!0,i=e.console.filter((t=>(!t.time||1e3*t.time>e.lastCleared)&&(!n||!Ms.test(t.message))&&!e.consoleFilters.some(((s,n)=>s.enabled&&e.consoleFiltersRegexp[n].test(t.message)))));return i},getFilters:e=>e.consoleFilters,getAvailableCalibrationCommands:e=>Object.keys(e.availableCommands).filter((e=>e.endsWith("CALIBRATE"))).reduce(((t,s)=>({...t,[s]:e.availableCommands[s]})),{}),getAllGcodeCommands:e=>{const t=e.availableCommands,s=["TESTZ","ABORT","ACCEPT","ADJUSTED"];return s.forEach((e=>{e in t!==!0&&(t[e]="")})),t}},Ns={async reset({commit:e}){e("setReset")},async initConsole({commit:e},t){e("setInitConsole",t)},async onUpdateCommandHistory({state:e,commit:t},s){t("setUpdateCommandHistory",s),X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.console.name+".commandHistory",e.commandHistory)},async onGcodeScript({dispatch:e},t){t&&t.result&&"ok"!==t.result&&e("onAddConsoleEntry",{message:J.CONSOLE_RECEIVE_PREFIX+t.result})},async onAddConsoleEntry({commit:e},t){t.message=t.message.replace(/(?:\r\n|\r|\n)/g,"<br />"),(!t.time||t.time<=0)&&(t.time=Date.now()/1e3|0),t.type||(t.type="response"),e("setConsoleEntry",t)},async onGcodeStore({commit:e},t){if(t&&t.gcode_store){const s=t.gcode_store.map(((e,t)=>(e.message=J.CONSOLE_RECEIVE_PREFIX+e.message,e.message=e.message.replace(/(?:\r\n|\r|\n)/g,"<br />"),e.id=t,e)));e("setAllEntries",s)}},async onGcodeHelp({commit:e},t){e("setGcodeHelp",t)},async onUpdateAutoScroll({commit:e},t){e("setAutoScroll",t),X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.console.name+".autoScroll",t)},async onRemoveFilter({commit:e,state:t},s){e("setRemoveFilter",s),X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.console.name+".consoleFilters",t.consoleFilters)},async onSaveFilter({commit:e,state:t},s){e("setFilter",s),X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.console.name+".consoleFilters",t.consoleFilters)},async onClear({commit:e,state:t}){e("setLastCleared"),X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.console.name+".lastCleared",t.lastCleared)}};var Us;(function(e){e[e["Contains"]=0]="Contains",e[e["StartsWith"]=1]="StartsWith",e[e["Expression"]=2]="Expression"})(Us||(Us={}));const js=e=>{function t(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}switch(e.type){case Us.Contains:return new RegExp(`.*${t(e.value)}.*`,"i");case Us.StartsWith:return new RegExp(`^${t(e.value)}.*`,"i");case Us.Expression:return new RegExp(e.value)}},Hs={setReset(e){Object.assign(e,Ls())},setConsoleEntry(e,t){void 0===t.id&&(e.consoleEntryCount++,t.id=e.consoleEntryCount);while(e.console.length>=J.CONSOLE_HISTORY_RETENTION)e.console.shift();e.console.push(t)},setAllEntries(e,t){e.consoleEntryCount=t.length,e.console=t},setGcodeHelp(e,t){r.ZP.set(e,"availableCommands",t)},setInitConsole(e,t){t&&(t.consoleFilters&&(t.consoleFiltersRegexp=t.consoleFilters.map((e=>js(e)))),Object.assign(e,t))},setUpdateCommandHistory(e,t){t&&(e.commandHistory=[...t])},setConsoleCommand(e,t){e.consoleCommand=t},setAutoScroll(e,t){e.autoScroll=t},setFilter(e,t){const s=js(t);if(t.id){const n=e.consoleFilters.findIndex((e=>e.id===t.id));n>=0&&(r.ZP.set(e.consoleFilters,n,t),r.ZP.set(e.consoleFiltersRegexp,n,s))}else t.id=(0,ss.Z)(),e.consoleFilters.push(t),e.consoleFiltersRegexp.push(s)},setRemoveFilter(e,t){const s=e.consoleFilters.findIndex((e=>e.id===t.id));s>=0&&(e.consoleFilters.splice(s,1),e.consoleFiltersRegexp.splice(s,1))},setLastCleared(e){r.ZP.set(e,"lastCleared",Date.now())}},Zs=!0,Qs={namespaced:Zs,state:Ts,getters:Ws,actions:Ns,mutations:Hs},zs=()=>({stored:[],categories:[],expanded:[0]}),Js=zs(),Ks={getMacros:(e,t,s)=>{const n=Object.keys(s.printer.printer).filter((e=>/^gcode_macro (?!_)/.test(e))).map((t=>{const n=t.toLocaleLowerCase(),i=n.split(" ",2)[1],r=s.printer.printer.configfile.settings[n],o=e.stored.find((e=>e.name===i)),a=s.printer.printer[t],c={name:i,alias:"",visible:!0,disabledWhilePrinting:!1,color:"",categoryId:"0",variables:a,...o,config:r};if(o?.categoryId){const t=e.categories.find((e=>e.id===o.categoryId));t?c.category=t:c.categoryId="0"}return c}));return n},getVisibleMacros:(e,t)=>{const s={id:"0",name:null},n=[...e.categories,s];return n.map((({id:e,name:s})=>({id:e,name:s,macros:t.getMacrosByCategory(e).filter((e=>e.visible))}))).filter((e=>e.macros.length>0)).sort(((e,t)=>e.name?t.name?e.name.localeCompare(t.name):-1:1))},getMacrosByCategory:(e,t)=>e=>{const s=e||"0",n=t.getMacros;return n.filter((e=>e.categoryId===s)).sort(((e,t)=>void 0!==e.order&&void 0!==t.order&&e.order!==t.order?e.order-t.order:e.name.localeCompare(t.name)))},getCategories:(e,t)=>{const s=e.categories.map((e=>{const{id:s,name:n}=e,i=t.getMacrosByCategory(s),r=i.length,o=i.filter((e=>e.visible)).length;return{id:s,name:n,visible:o,count:r}})).sort(((e,t)=>e.name.localeCompare(t.name)));return s}},Gs={async reset({commit:e}){e("setReset")},initMacros({commit:e},t){e("initMacros",t)},saveMacro({state:e,commit:t},s){t("setUpdateMacro",s),X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.macros.name+".stored",e.stored)},saveAllOrder({state:e,commit:t},s){s.forEach(((e,s)=>{t("setUpdateMacro",{...e,order:s})})),X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.macros.name+".stored",e.stored)},saveAllOn({state:e,commit:t},s){t("setUpdateAllVisible",{macros:s,visible:!0}),X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.macros.name+".stored",e.stored)},saveAllOff({state:e,commit:t},s){t("setUpdateAllVisible",{macros:s,visible:!1}),X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.macros.name+".stored",e.stored)},addCategory({commit:e,state:t},s){e("setAddCategory",s),X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.macros.name+".categories",t.categories)},editCategory({commit:e,state:t},s){e("setEditCategory",s),X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.macros.name,t)},removeCategory({commit:e,state:t},s){e("setRemoveCategory",s),X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.macros.name,t)},saveExpanded({commit:e,state:t},s){e("setExpanded",s),X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.macros.name+".expanded",t.expanded)}},Vs={setReset(e){Object.assign(e,zs())},initMacros(e,t){t&&t.categories&&"string"===typeof t.categories[0]&&(t.categories=[]),t&&Object.assign(e,t)},setUpdateMacro(e,t){const s={...t};delete s.config,delete s.category;const n=e.stored.findIndex((e=>e.name===t.name));n<0?e.stored.push(s):r.ZP.set(e.stored,n,s)},setUpdateAllVisible(e,t){t.macros.forEach((s=>{const n=e.stored.findIndex((e=>e.name===s.name)),i={...s,visible:t.visible};delete i.config,delete i.category,n<0?e.stored.push(i):r.ZP.set(e.stored,n,i)}))},setAddCategory(e,t){e.categories.push({id:(0,ss.Z)(),name:t})},setEditCategory(e,t){const s=e.categories.findIndex((e=>e.id===t.id));r.ZP.set(e.categories,s,{id:t.id,name:t.name}),e.stored.forEach(((s,n)=>{s.categoryId===t.id&&r.ZP.set(e.stored,n,{...s,categoryId:t.id})}))},setRemoveCategory(e,t){const s=e.categories.findIndex((e=>e.id===t.id));s>=0&&(e.categories.splice(s,1),e.stored.forEach(((s,n)=>{if(s.categoryId===t.id){const t={...s};delete t.categoryId,r.ZP.set(e.stored,n,t)}})))},setExpanded(e,t){r.ZP.set(e,"expanded",t)}},Ys=!0,qs={namespaced:Ys,state:Js,getters:Ks,actions:Gs,mutations:Vs},Xs=()=>({devices:[]}),$s=Xs(),en={},tn={async reset({commit:e}){e("setReset")},async init(){X.machineDevicePowerDevices()},async onInit({commit:e},t){t.devices&&t.devices.length>0&&e("setDevices",t)},async onStatus({commit:e},t){e("setStatus",t)},async onToggle({commit:e},t){e("setStatus",t)}},sn={setReset(e){Object.assign(e,Xs())},setDevices(e,t){e.devices=t.devices},setStatus(e,t){for(const s in t){const n=e.devices.findIndex((e=>e.device===s));n>=0&&r.ZP.set(e.devices[n],"status",t[s])}}},nn=!0,rn={namespaced:nn,state:$s,getters:en,actions:tn,mutations:sn},on=()=>({count:0,jobs:[],job_totals:{total_jobs:0,total_time:0,total_print_time:0,total_filament_used:0,longest_job:0,longest_print:0}}),an=on(),cn={getHistory:e=>e.jobs&&e.jobs.length?[...e.jobs].sort(((e,t)=>t.start_time-e.start_time)):[],getHistoryById:e=>t=>e.jobs.find((e=>e.job_id===t)),getHistoryByFilename:e=>t=>e.jobs.find((e=>e.filename===t&&"completed"===e.status&&!0===e.exists)),getUniqueHistory:(e,t)=>(e=3)=>{const s=[],n=t.getHistory;for(const t of n)if(t.exists){const n=s.some((e=>t.filename===e.filename));if(n||s.push(t),s.length===e)break}return s},getRollUp:e=>{const t=e.job_totals;return{...t,filament_avg:t.total_filament_used?t.total_filament_used/t.total_jobs:0,print_avg:t.total_print_time?t.total_print_time/t.total_jobs:0,total_avg:t.total_time?t.total_time/t.total_jobs:0}}},ln={async reset({commit:e}){e("setReset")},async init(){X.serverHistoryList({limit:J.JOB_HISTORY_LOAD}),X.serverHistoryTotals()},async updateHistory({commit:e},t){t&&e("setUpdateHistory",t)},async clearHistoryThumbnails({commit:e},t){t&&e("setClearHistoryThumbnails",t)},async onHistoryTotals({commit:e},t){t&&e("setHistoryTotals",t)},async onHistoryList({commit:e,rootGetters:t},s){s&&(e("setHistoryList",s),t["files/isRootAvailable"]("gcodes")&&X.serverFilesGetDirectory("gcodes","gcodes"))},async onHistoryChange({commit:e},t){X.serverHistoryTotals(),t&&("added"===t.action&&e("setAddHistory",t.job),"finished"===t.action&&e("setUpdateHistory",t.job))},async onDelete({commit:e},t){e("setDeleteJob",t.deleted_jobs)}},un={setReset(e){Object.assign(e,on())},setHistoryTotals(e,t){t&&r.ZP.set(e,"job_totals",t.job_totals)},setHistoryList(e,t){void 0!==t.jobs&&r.ZP.set(e,"jobs",t.jobs),void 0!==t.count&&r.ZP.set(e,"count",t.count)},setAddHistory(e,t){t&&(e.jobs.push(t),e.count++)},setUpdateHistory(e,t){if(t){const s=e.jobs.findIndex((e=>e.job_id===t.job_id));s>=0&&r.ZP.set(e.jobs,s,t)}},setClearHistoryThumbnails(e,t){if(t){const s=e.jobs.findIndex((e=>e.job_id===t));if(s>=0){const t=e.jobs[s];r.ZP.set(e.jobs,s,{...t,metadata:{...t.metadata,thumbnails:[]}})}}},setDeleteJob(e,t){t&&t.forEach((t=>{const s=e.jobs.findIndex((e=>e.job_id===t));s>=0&&e.jobs.splice(s,1)}))}},dn=!0,pn={namespaced:dn,state:an,getters:cn,actions:ln,mutations:un},mn=()=>({busy:!1,github_limit_reset_time:0,github_rate_limit:0,github_requests_remaining:0,responses:[],version_info:{},fluidd:{version:"",hash:""}}),fn=mn(),hn={getVisibleComponents:e=>{const t=Object.keys(e.version_info).map((t=>{const s=e.version_info[t];return s.key=t,s})).sort(((e,t)=>e.key.localeCompare(t.key)));return t},hasUpdates:(e,t,s)=>{const n=s.config.uiSettings.general.enableVersionNotifications;let i=!1;for(const r in e.version_info){if(i)break;"system"!==r&&n&&(i=t.hasUpdate(r))}return i},hasUpdate:e=>t=>{if(e.version_info[t]&&Rt(e.version_info[t],"name")){const s=e.version_info[t],n=(0,pt.valid)(s.version),i=(0,pt.valid)(s.remote_version);return!(!n||!i)&&(0,pt.gt)(i,n)}if(e.version_info[t]&&Rt(e.version_info[t],"package_count")){const s=e.version_info[t];return s.package_count>0}const s=e.version_info[t];return s.current_hash!==s.remote_hash},getResponses:e=>[...e.responses],getCommitHistory:e=>t=>{const s=e.version_info[t];if(e.version_info[t]&&Rt(s,"git_messages")){const e=[...s.commits_behind].reduce(((e,t)=>{const s=new Date(1e3*+t.date),n=+new Date(s.getFullYear(),s.getMonth(),s.getDate());return n in e?e[n].push(t):e[n]=[t],e}),{});return{keys:Object.keys(e).map((e=>parseInt(e))).sort().reverse(),result:e}}}},gn={async reset({commit:e}){e("setReset")},async init(){X.machineUpdateStatus()},async onUpdateStatus({commit:e,dispatch:t,getters:s},n){e("setUpdateStatus",n),s.hasUpdates?t("notifications/pushNotification",{id:"updates-available",title:Pt.t("app.version.label.updates_available"),to:"/settings#versions",btnText:Pt.t("app.version.btn.view_versions"),type:"info",merge:!0},{root:!0}):t("notifications/clearNotification","updates-available",{root:!0})},async onUpdateResponse({commit:e},t){e("setUpdateResponse",t)},async onUpdatedMoonraker({commit:e},t){i().debug("Finished updating moonraker",t),X.machineUpdateStatus(),e("socket/setSocketDisconnecting",!0,{root:!0})},async onUpdatedKlipper(e,t){i().debug("Finished updating klipper",t),X.machineUpdateStatus()},async onUpdatedClient(e,t){i().debug("Finished updating a client",t),X.machineUpdateStatus()},async onUpdatedFluidd(e,t){i().debug("Finished updating fluidd, reloading",t),window.location.reload()},async onUpdatedSystem(e,t){i().debug("Finished updating system",t),X.machineUpdateStatus()},async onUpdatedAll(e,t){i().debug("Finished updating all services",t),window.location.reload()}},yn={setReset(e){Object.assign(e,mn())},setUpdateStatus(e,t){if(t){"busy"in t&&(e.busy=t.busy),"github_limit_reset_time"in t&&(e.github_limit_reset_time=t.github_limit_reset_time),"github_rate_limit"in t&&(e.github_rate_limit=t.github_rate_limit),"github_requests_remaining"in t&&(e.github_requests_remaining=t.github_requests_remaining);const s=Object.assign({},e.version_info,t.version_info);r.ZP.set(e,"version_info",s)}},setUpdateResponse(e,t){if(t.complete)e.busy=!1;else{const s=e.responses.length;e.responses.push({...t,id:s})}},setClearUpdateResponse(e){e.responses=[]},setVersion(e,t){e.fluidd.version=t},setHash(e,t){e.fluidd.hash=t}},vn=!0,bn={namespaced:vn,state:fn,getters:hn,actions:gn,mutations:yn},Sn=()=>({activeCamera:"all",cameras:[{id:(0,ss.Z)(),enabled:!1,name:"Default",service:"mjpegstreamer-adaptive",targetFps:15,targetFpsIdle:5,urlStream:"/webcam/?action=stream",urlSnapshot:"/webcam/?action=snapshot",flipX:!1,flipY:!1,rotation:0,aspectRatio:"16:9"}]}),wn=Sn(),Pn={getCameras:(e,t)=>{const s=t.getCamerasInConfig;return[...e.cameras,...s].sort(((e,t)=>e.name.localeCompare(t.name)))},getCamerasInConfig:(e,t,s,n)=>{const i=n["webcams/getWebcamsInConfig"];return i.map((e=>({name:e.name,location:e.location,service:e.service,targetFps:e.target_fps,urlStream:e.stream_url,urlSnapshot:e.snapshot_url,flipX:e.flip_horizontal,flipY:e.flip_vertical,rotation:e.rotation??0,source:e.source,enabled:!0,id:`config-${e.name}`})))},getEnabledCameras:(e,t)=>[...t.getCameras].filter((e=>e.enabled)),getVisibleCameras:(e,t)=>"all"===t.getActiveCamera?[...t.getEnabledCameras]:[...t.getEnabledCameras].filter((e=>e.id===t.getActiveCamera)),getCameraById:e=>t=>e.cameras.find((e=>e.id===t)),getActiveCamera:e=>e.activeCamera},_n=(e,t,s)=>{const n="http://fake.fake",i=new URL(e,n);return i.searchParams.set(t,s),i.origin===n?i.pathname+i.search:i.href};var Cn=_n;const An={mjpgstream:"mjpegstreamer",mjpgadaptive:"mjpegstreamer-adaptive",iframe:"iframe",ipstream:"ipstream"},xn=["mjpegstreamer","mjpegstreamer-adaptive"],kn={async reset({commit:e}){e("setReset")},async initLegacyCameras({commit:e},t){const{cameras:s,activeCamera:n}=t;if(s){for(const e of s){const t=An[e.type],s=xn.includes(t),n={name:e.name,service:t,targetFps:e.fpstarget,urlStream:s?Cn(e.url,"action","stream"):e.url,urlSnapshot:s?Cn(e.url,"action","snapshot"):e.url,flipX:e.flipX,flipY:e.flipY,rotation:e.rotate?+e.rotate:0,enabled:e.enabled,height:e.height,targetFpsIdle:e.fpsidletarget};await ve.serverDatabaseItemPost(J.MOONRAKER_DB.webcams.NAMESPACE,e.id,n)}await ve.serverDatabaseItemPost(J.MOONRAKER_DB.fluidd.NAMESPACE,J.MOONRAKER_DB.fluidd.ROOTS.cameras.name,{activeCamera:n||"all"})}e("setActiveCamera",n||"all")},async initCameras({commit:e},t){const s=Object.entries(t).map((([e,t])=>(void 0===t.enabled&&(t.enabled=!1),void 0===t.rotation&&(t.rotate?(t.rotation=t.rotate||0,delete t.rotate):t.rotation=0),{id:e,...t})));e("setInitCameras",{cameras:s})},async updateCamera({commit:e},t){""===t.id&&(t.id=(0,ss.Z)()),e("setCamera",t);const{id:s,...n}=t;X.serverWrite(s,n,J.MOONRAKER_DB.webcams.NAMESPACE)},async removeCamera({commit:e,state:t},s){e("setRemoveCamera",s);const{id:n}=s;X.serverDelete(n,J.MOONRAKER_DB.webcams.NAMESPACE),X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.cameras.name+".activeCamera",t.activeCamera)},async updateActiveCamera({commit:e,state:t},s){e("setActiveCamera",s||"all"),X.serverWrite(J.MOONRAKER_DB.fluidd.ROOTS.cameras.name+".activeCamera",t.activeCamera)},async reloadMoonrakerWebcamsNamespace(){X.serverRead(void 0,J.MOONRAKER_DB.webcams.NAMESPACE)}},Fn={setReset(e){Object.assign(e,Sn())},setInitCameras(e,t){t&&Object.assign(e,t)},setCamera(e,t){const s=e.cameras.findIndex((e=>e.id===t.id));s>=0?r.ZP.set(e.cameras,s,t):e.cameras.push(t)},setRemoveCamera(e,t){const s=e.cameras.findIndex((e=>e.id===t.id));s>=0&&e.cameras.splice(s,1),e.activeCamera===t.id&&(e.activeCamera="all")},setActiveCamera(e,t){e.activeCamera=t}},En=!0,Dn={namespaced:En,state:wn,getters:Pn,actions:kn,mutations:Fn},On=()=>({variance:0,wireframe:!1,scale:.2,boxScale:2,flatSurface:!1,matrix:"mesh_matrix"}),Bn=On(),Rn=(e,t,s=!1)=>{const n=e[t],i=[];let r=0,o=0,a=0,c=0;if(n&&n.length>=3&&n[0]&&n[0].length>=3&&e.mesh_min&&e.mesh_max){const t=(e.mesh_max[0]-e.mesh_min[0])/(n[0].length-1),l=(e.mesh_max[1]-e.mesh_min[1])/(n.length-1);let u=0,d=0;r=Math.min(...n.map((e=>Math.min(...e)))),a=Math.max(...n.map((e=>Math.max(...e)))),o=r<=0&&a>=0?0:(a+r)/2,c=Math.abs(r-a);for(const r of n){u=0;const n=e.mesh_min[1]+d*l;for(const a of r){const r=e.mesh_min[0]+u*t;u++,i.push({name:`x${u}_y${d}`,value:[r,n,s?o:a]})}d++}}return{coordinates:i,min:r,mid:o,max:a,variance:c}},In={getSupportsBedMesh:(e,t,s,n)=>void 0!==n["printer/getPrinterSettings"]("bed_mesh"),getLegacyBedMeshProfiles:(e,t,s,n)=>{const i={},r=n["printer/getPrinterConfig"](),o=Object.keys(r).filter((e=>e.startsWith("bed_mesh ")));for(const a of o){const e=a.split(" ").splice(1).join(" "),t=r[a],s={points:t.points.split("\n").filter((e=>e.length)).map((e=>e.split(",").map(Number))),mesh_params:{algo:t.algo,max_x:+t.max_x,max_y:+t.max_y,mesh_x_pps:+t.mesh_x_pps,mesh_y_pps:+t.mesh_y_pps,min_x:+t.min_x,min_y:+t.min_y,tension:+t.tension,x_count:+t.x_count,y_count:+t.y_count}};i[e]=s}return i},getBedMeshProfiles:(e,t,s)=>{const n=[],i=s.printer.printer.bed_mesh,r=i.profiles??t.getLegacyBedMeshProfiles;for(const[o,a]of Object.entries(r)){const e=a.points.flatMap((e=>e)),t=Math.min(...e),s=Math.max(...e);n.push({name:o,active:o===i.profile_name,min:t,max:s,variance:Math.abs(t-s),...a})}return n.sort(((e,t)=>"default"===e.name?-1:"default"===t.name?1:e.name.localeCompare(t.name)))},getCurrentMeshData:(e,t,s)=>{const n=s.printer.printer.bed_mesh;return{mesh_matrix:Rn(n,"mesh_matrix"),probed_matrix:Rn(n,"probed_matrix"),mesh_matrix_flat:Rn(n,"mesh_matrix",!0),probed_matrix_flat:Rn(n,"probed_matrix",!0)}}},Ln={async reset({commit:e}){e("setReset")},async onMatrix({commit:e},t){e("setMatrix",t)},async onScale({commit:e},t){e("setScale",t)},async onBoxScale({commit:e},t){e("setBoxScale",t)},async onWireframe({commit:e},t){e("setWireframe",t)},async onFlatSurface({commit:e},t){e("setFlatSurface",t)}},Tn={setReset(e){Object.assign(e,On())},setMatrix(e,t){e.matrix=t},setScale(e,t){e.scale=t},setBoxScale(e,t){e.boxScale=t},setWireframe(e,t){e.wireframe=t},setFlatSurface(e,t){e.flatSurface=t}},Mn=!0,Wn={namespaced:Mn,state:Bn,getters:In,actions:Ln,mutations:Tn},Nn=()=>({notifications:[]}),Un=Nn(),jn={getNotifications:(e,t)=>{let s=[...e.notifications].sort(((e,t)=>t.timestamp-e.timestamp));return s=s.concat(t.getAnnouncementsAsNotifications),[...s.filter((e=>"error"===e.type)),...s.filter((e=>"error"!==e.type))]},getAnnouncementsAsNotifications:(e,t,s,n)=>{const i=n["announcements/getAnnouncements"];return i.map((e=>({id:e.entry_id,type:"announcement",to:e.url,title:e.title,description:e.description,timestamp:e.date,clear:!0,merge:!0})))}},Hn={async reset({commit:e}){e("setReset")},async pushNotification({commit:e,state:t},s){const n={id:(0,ss.Z)(),type:"info",timestamp:Date.now()/1e3,clear:!0,merge:!1,...s};if(n.title&&"?"!==n.title&&n.id){const i=t.notifications.findIndex((e=>e.title===s.title));n.merge&&i>=0?e("setMergeNotification",{n:n,i:i}):e("setPushNotification",n),s.snackbar&&ze.$emit(n.title,{type:Je.error})}},async clearNotification({commit:e,dispatch:t},s){"object"!==typeof s||"announcement"!==s.type?e("setClearNotification",s):t("announcements/dismiss",{entry_id:s.id},{root:!0})},async clearAll({commit:e,dispatch:t}){e("setClearAllNotifications"),t("announcements/dismissAll",{},{root:!0})}},Zn={setReset(e){Object.assign(e,Nn())},setPushNotification(e,t){e.notifications.push(t)},setMergeNotification(e,t){t&&t.n&&t.i>=0&&r.ZP.set(e.notifications,t.i,t.n)},setClearNotification(e,t){let s=-1;s="string"===typeof t?e.notifications.findIndex((e=>e.id===t)):e.notifications.findIndex((e=>e===t)),s>=0&&e.notifications.splice(s,1)},setClearAllNotifications(e){r.ZP.set(e,"notifications",[...e.notifications.filter((e=>!e.clear))])}},Qn=!0,zn={namespaced:Qn,state:Un,getters:jn,actions:Hn,mutations:Zn},Jn=()=>({entries:[],feeds:[]}),Kn=Jn(),Gn={getAnnouncements:e=>e.entries.filter((e=>!e.dismissed))},Vn={async reset({commit:e}){e("setReset")},async init(){X.serverAnnouncementsList()},async onAnnouncementsList({commit:e},t){t&&e("setAnnouncementsList",t)},async onAnnouncementUpdate({commit:e},t){t&&e("setAnnouncementsList",t)},async onAnnouncementDismissed({commit:e},t){t&&e("setAnnouncementDismissed",{entry_id:t.entry_id,dismissed:!0})},async onAnnouncementWake({commit:e},t){t&&e("setAnnouncementDismissed",{entry_id:t.entry_id,dismissed:!1})},async dismiss(e,t){X.serverAnnouncementsDismiss(t.entry_id,t.wake_time)},async dismissAll({state:e}){const t=[...e.entries];t.forEach((async e=>await X.serverAnnouncementsDismiss(e.entry_id)))}},Yn={setReset(e){Object.assign(e,Jn())},setAnnouncementsList(e,t){t.entries&&r.ZP.set(e,"entries",t.entries),t.feeds&&r.ZP.set(e,"feeds",t.feeds)},setAnnouncementDismissed(e,t){const s=[...e.entries],n=s.find((e=>e.entry_id===t.entry_id));n&&(n.dismissed=t.dismissed,t.dismissed?n.date_dismissed=Date.now():(n.date_dismissed=null,n.dismiss_wake=null)),r.ZP.set(e,"entries",s)}},qn=!0,Xn={namespaced:qn,state:Kn,getters:Gn,actions:Vn,mutations:Yn},$n=()=>({waits:[]}),ei=$n(),ti={hasWait:e=>t=>{if(Array.isArray(t)&&t.length){let s=t;return s=s.filter((t=>e.waits.includes(t))),s.length>0}return e.waits.includes(t)},hasWaits:e=>e.waits.length>0,hasWaitsBy:e=>t=>{const s=e.waits.filter((e=>e.startsWith(t)));return s.length>0}},si={async reset({commit:e}){e("setReset")},async addWait({commit:e},t){e("setAddWait",t)},async removeWait({commit:e},t){e("setRemoveWait",t)}},ni={setReset(e){Object.assign(e,$n())},setAddWait(e,t){const s=e.waits.indexOf(t);-1===s&&e.waits.push(t)},setRemoveWait(e,t){const s=e.waits.indexOf(t);-1!==s&&e.waits.splice(s,1)}},ii=!0,ri={namespaced:ii,state:ei,getters:ti,actions:si,mutations:ni},oi=()=>({moves:[],layers:[],parts:[],file:void 0,parserProgress:0,parserWorker:null,viewer:{showCurrentLayer:!0,showNextLayer:!1,showPreviousLayer:!1,showMoves:!0,showExtrusions:!0,showRetractions:!0,showParts:!0,followProgress:!1}}),ai=oi();var ci,li;(function(e){e["Clockwise"]="clockwise",e["CounterClockwise"]="counter-clockwise"})(ci||(ci={})),function(e){e["Relative"]="relative",e["Absolute"]="absolute"}(li||(li={}));const ui=(e,t,s=!1)=>{if(e.length<=1)return 0;let n=Math.floor(e.length/2),i=e.length-1,r=0;while(r<=i){const s=t(e[n],n,e);if(s>0)r=n+1;else{if(!(s<0))return n;i=n-1}n=Math.floor((r+i)/2)}return s?n:-1};function di(e,t){const s=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return Math.sqrt(s**2+n**2)}function pi(e,t){return Math.atan2(t.y-e.y,t.x-e.x)*(180/Math.PI)}function mi(e,t){const s={x:t.x??e.x,y:t.y??e.y},n={x:e.x+(t.i??0),y:e.y+(t.j??0)},i=di(e,n);let r=pi(n,e)-pi(n,s);switch(r>180?r-=360:r<-180&&(r+=360),t.direction){case ci.Clockwise:return"A"+[i,i,0,Number(r<0),0,s.x,s.y].join(",");case ci.CounterClockwise:return"M"+[s.x,s.y].join(",")+"A"+[i,i,0,Number(r>0),0,e.x,e.y].join(",")+"M"+[s.x,s.y].join(",");default:throw new TypeError("move has no direction")}}function fi(e,t){if(void 0!==t.i&&void 0!==t.j)return mi(e,t);if(void 0!==t.r)throw new Error("Arcs with the R parameter are currently not supported. Please make a Github issue with some sample gcode so we can resolve this");throw new TypeError("Move is not a valid arc")}function hi(e,t){return Object.hasOwnProperty.call(t,"direction")?fi(e,t):`L${t.x??e.x},${t.y??e.y}`}const gi={getMoves:e=>e.moves,getFile:e=>e.file,getViewerOption:e=>t=>e.viewer[t],getParserProgress:e=>e.parserProgress,getLayers:(e,t,s)=>{if(e.layers.length)return e.layers;const n=[],i=t.getMoves;let r=NaN,o=0,a=NaN,c=NaN;const{minLayerHeight:l}=s.config.uiSettings.gcodePreview;return i.forEach(((e,t)=>{void 0!==e.z&&r!==e.z&&(r=e.z,o=t),e.e&&e.e>0&&(Number.isNaN(a)||r<a||r>=c)&&["x","y","i","j"].some((t=>Ye(t,e)&&0!==e[t]))&&(a=r,c=Math.round(1e4*(r+l))/1e4,n.push({z:r,move:o,filePosition:e.filePosition}))})),0===n.length&&i.length&&n.push({z:0,move:0,filePosition:i[0].filePosition}),n},getParts:e=>e.parts,getBounds:(e,t)=>{let s=t.getMoves;const n=t.getLayers,i=n[n.length>1?1:0]?.move,r=n[n.length-1]?.move;i&&r&&(s=s.slice(i,r));const o={x:{min:NaN,max:NaN},y:{min:NaN,max:NaN}},a=Number.isFinite;let c=0;for(;c<s.length&&!Object.values(o).every(a);c++){const e=s[c];a(e.x)&&(o.x.min=a(o.x.min)?Math.min(o.x.min,e.x):e.x,o.x.max=a(o.x.max)?Math.max(o.x.max,e.x):e.x),a(e.y)&&(o.y.min=a(o.y.min)?Math.min(o.y.min,e.y):e.y,o.y.max=a(o.y.max)?Math.max(o.y.max,e.y):e.y)}for(;c<s.length;c++){const e=s[c];a(e.x)&&(o.x.min=Math.min(o.x.min,e.x),o.x.max=Math.max(o.x.max,e.x)),a(e.y)&&(o.y.min=Math.min(o.y.min,e.y),o.y.max=Math.max(o.y.max,e.y))}return{x:{min:a(o.x.min)?o.x.min:0,max:a(o.x.max)?o.x.max:0},y:{min:a(o.y.min)?o.y.min:0,max:a(o.y.max)?o.y.max:0}}},getToolHeadPosition:(e,t)=>e=>{const s=Number.isFinite,n=t.getMoves,i={x:NaN,y:NaN,z:NaN};for(let t=e;t>=0&&(!s(i.x)||!s(i.y)||!s(i.z));t--)s(i.x)||void 0===n[t].x||(i.x=n[t].x),s(i.y)||void 0===n[t].y||(i.y=n[t].y),s(i.z)||void 0===n[t].z||(i.z=n[t].z);return{x:s(i.x)?i.x:0,y:s(i.y)?i.y:0,z:s(i.z)?i.z:0}},getPaths:(e,t)=>(e,s)=>{const n=t.getToolHeadPosition(e),i=t.getMoves,r={extrusions:"",moves:`M${n.x},${n.y}`,retractions:[],extrusionStarts:[],toolhead:{x:0,y:0}};let o=!0;for(let t=e;t<=s&&t<i.length;t++){const e=i[t];e.e>0?(o&&(r.extrusions+=`M${n.x},${n.y}`,r.extrusionStarts.push({x:n.x,y:n.y}),o=!1),r.extrusions+=hi(n,e),Object.assign(n,e)):(o||(r.moves+=`M${n.x},${n.y}`,o=!0),e.e<0&&r.retractions.push({x:n.x,y:n.y}),r.moves+=hi(n,e),Object.assign(n,e))}return r.toolhead={x:n.x,y:n.y},r},getLayerPaths:(e,t)=>e=>{const s=t.getLayers;return t.getPaths(s[e]?.move??0,(s[e+1]?.move??1/0)-1)},getPartPaths:(e,t)=>{const s=t.getParts;return s.map((e=>{const t=[];return e.polygon.forEach(((e,s)=>{t.push(`${0===s?"M":"L"}${e.x},${e.y}`)})),t.push("z"),t.join()}))},getMoveIndexByFilePosition:(e,t)=>e=>e<=0?0:ui(t.getMoves,(t=>e-t.filePosition),!0),getLayerNrByFilePosition:(e,t)=>e=>{const s=t.getLayers;for(let t=0;t<s.length-1;t++)if(e<s[t+1].filePosition)return t;return s.length-1}},yi={async reset({commit:e}){e("setReset")},async terminateParserWorker({commit:e,state:t}){if(t.parserWorker){const s=t.parserWorker;e("setParserWorker",null),s.terminate(),e("clearFile")}},async loadGcode({commit:e,dispatch:t,getters:n,state:r},o){const a=new Worker(new URL(s.p+s.u(331),s.b));e("setParserWorker",a),a.addEventListener("message",(t=>{const s=t.data;switch(console.log("ОТ ВОРКЕРА",s),s.action){case"progress":e("setParserProgress",s.filePosition);break;case"result":try{e("setMoves",s.moves),e("setLayers",s.layers),e("setParts",s.parts),e("setParserProgress",o.file.size??o.gcode.length)}catch(c){i().error("Parser worker error",c)}r.parserWorker&&(e("setParserWorker",null),a.terminate()),0===n.getMoves.length&&e("clearFile");break}})),e("setParserProgress",0),e("setMoves",[]),e("setLayers",[]),e("setFile",o.file);const c={action:"parse",gcode:o.gcode};a.postMessage(c)}},vi={setReset(e){Object.assign(e,oi())},setMoves(e,t){r.ZP.set(e,"moves",Object.freeze(t.map(Object.freeze)))},setLayers(e,t){r.ZP.set(e,"layers",Object.freeze(t.map(Object.freeze)))},setParts(e,t){r.ZP.set(e,"parts",Object.freeze(t.map(Object.freeze)))},setFile(e,t){e.file=t},clearFile(e){e.file=void 0},setViewerState(e,t){for(const s of Object.keys(e.viewer))void 0!==t[s]&&r.ZP.set(e.viewer,s,t[s])},setParserProgress(e,t){e.parserProgress=t},setParserWorker(e,t){e.parserWorker=t}},bi=!0,Si={namespaced:bi,state:ai,getters:gi,actions:yi,mutations:vi},wi=()=>({enabled:!0,mode:"layermacro",camera:"",stream_delay_compensation:.05,gcode_verbose:!1,parkhead:!1,parkpos:"back_left",park_custom_pos_x:10,park_custom_pos_y:10,park_custom_pos_dz:0,park_travel_speed:100,park_retract_speed:15,park_extrude_speed:15,park_retract_distance:1,park_extrude_distance:1,park_time:.1,fw_retract:!1,hyperlapse_cycle:30,autorender:!1,constant_rate_factor:23,output_framerate:30,pixelformat:"yuv420p",time_format_code:"%Y%m%d_%H%M",extraoutputparams:"",variable_fps:!1,targetlength:10,variable_fps_min:5,variable_fps_max:60,duplicatelastframe:5,previewimage:!0,saveframes:!1}),Pi=()=>({lastFrame:void 0,settings:{...wi(),snapshoturl:"http://localhost:8080/?action=snapshot",rotation:0,flip_x:!1,flip_y:!1,blockedsettings:[]},renderStatus:void 0}),_i=Pi(),Ci={getSettings:e=>e.settings,getLastFrame:e=>e.lastFrame,getRenderStatus:e=>e.renderStatus,isBlockedSetting:e=>t=>e.settings?.blockedsettings.includes(t)??!0},Ai={async reset({commit:e}){e("setReset")},async init(){X.timelapseState()},async onSettings({commit:e},t){e("setSettings",t)},async onLastFrame({commit:e},t){const s=+(t.lastframefile?.match(/\d+/)?.[0]??0);e("setLastFrame",{count:t.framecount,uniqueCount:s,file:t.lastframefile})},async onEvent({commit:e},t){switch(t.action){case"newframe":if("error"===t.status)ze.$emit(Pt.tc("app.timelapse.error.newframe"),{type:Je.error});else{const s=parseInt(t.frame);e("setLastFrame",{count:s,uniqueCount:s,file:t.framefile})}break;case"render":{let s;switch(t.status){case"started":s={status:"started",count:t.framecount,settings:{frameRate:t.framerate,crf:t.crf,pixelFormat:t.pixelformat}};break;case"running":s={status:"running",progress:t.progress};break;case"success":s={status:"success",frameCount:t.framecount,fileName:t.filename,printFile:t.printfile,previewImage:t.previewimage,message:t.msg};break;default:return void i().warn("unhandled timelapse render status",t)}e("setRenderStatus",s);break}default:i().warn("unhandled timelapse event",t);break}}},xi={setReset(e){Object.assign(e,Pi())},setSettings(e,t){e.settings=t},setLastFrame(e,t){e.lastFrame=t,e.renderStatus=void 0},setRenderStatus(e,t){e.renderStatus=t}},ki=!0,Fi={namespaced:ki,state:_i,getters:Ci,actions:Ai,mutations:xi},Ei=()=>({parts:{},excludedParts:[],printState:"unknown"}),Di=Ei(),Oi={getParts:e=>e.parts,getIsPartCurrent:e=>t=>e.currentPart===t,getIsPartExcluded:e=>t=>e.excludedParts.includes(t),getPartPos:(e,t)=>e=>{const s=t.getParts[e];return s.target},getPartSVG:(e,t)=>e=>{const s=t.getParts[e];let n="",i="M";return s.outline.forEach((e=>{n+=`${i}${e.x},${e.y}`,i="L"})),n+="z",n},getPrintState:e=>e.printState},Bi={async reset({commit:e}){e("setReset")},async onPartUpdate({commit:e},t){e("partUpdate",t)},async onPrintStatsUpdate({commit:e},t){e("printStatsUpdate",t)}},Ri={setReset(e){Object.assign(e,Ei())},partUpdate(e,t){if("current_object"in t&&r.ZP.set(e,"currentPart",t.current_object),"excluded_objects"in t&&r.ZP.set(e,"excludedParts",t.excluded_objects),"objects"in t){const s={};t.objects.forEach((e=>{const t=e.name,n={name:t,outline:[],target:null};"center"in e&&2===e.center.length&&(n.target={x:e.center[0],y:e.center[1]}),"polygon"in e&&(n.outline=e.polygon.map((e=>({x:e[0],y:e[1]})))),s[t]=n})),r.ZP.set(e,"parts",Object.freeze(s))}},printStatsUpdate(e,t){"state"in t&&r.ZP.set(e,"printState",t.state)}},Ii=!0,Li={namespaced:Ii,state:Di,getters:Oi,actions:Bi,mutations:Ri},Ti=()=>({webcams:[]}),Mi=Ti(),Wi={getWebcamsInConfig:e=>e.webcams.filter((e=>"config"===e.source))},Ni={async reset({commit:e}){e("setReset")},async init(){X.serverWebcamsList()},async onWebcamsList({commit:e},t){t&&e("setWebcamsList",t)},async onWebcamsChanged({dispatch:e}){e("cameras/reloadMoonrakerWebcamsNamespace",void 0,{root:!0})}},Ui={setReset(e){Object.assign(e,Ti())},setWebcamsList(e,t){e.webcams=t.webcams||[]}},ji=!0,Hi={namespaced:ji,state:Mi,getters:Wi,actions:Ni,mutations:Ui},Zi=()=>({queue_state:"paused",queued_jobs:[]}),Qi=Zi(),zi={getQueueState:e=>e.queue_state,getQueuedJobs:e=>e.queued_jobs,getQueuedJob:e=>t=>e.queued_jobs.findIndex((e=>e.job_id===t))},Ji={async reset({commit:e}){e("setReset")},async init(){X.serverJobQueueStatus()},async onJobQueueStatus({commit:e},t){t&&(e("setQueueState",t.queue_state),e("setQueuedJobs",t.queued_jobs))},async onJobQueueChanged({commit:e},t){if(t){const{queue_state:s,updated_queue:n}=t;s&&e("setQueueState",s),void 0!==n&&null!==n&&e("setQueuedJobs",n)}}},Ki={setReset(e){Object.assign(e,Zi())},setQueueState(e,t){e.queue_state=t},setQueuedJobs(e,t){e.queued_jobs=t||[]}},Gi=!0,Vi={namespaced:Gi,state:Qi,getters:zi,actions:Ji,mutations:Ki};s(541);const Yi=e=>{let t=e;return e.startsWith("/")&&(t=t.slice(1)),e.endsWith("/")&&(t=t.slice(0,-1)),t.split("/")},qi=(e,t)=>{if(0==t.length)return!0;for(const s of e)if(s.name==t[0])return qi(s.dirs,t.slice(1));return!1},Xi=(e,t,s)=>{if(1==t.length)return e.push({dirs:er(s),files:$i(s),modified:"--.--.----",name:t[0],permissions:"?",sizeInKb:"?",computedSize:"?kb",isSelected:!1}),sr(s);for(const n of e)if(n.name==t[0])return Xi(n.dirs,t.slice(1),s);return[]};function $i(e){const t=[];if(e.files||e.files.length)for(const s of e.files)t.push({name:s.filename,modified:nr(s.modified),permissions:s.permissions,sizeInKb:ir(s.size),size:s.size,computedSize:Pr(s.size),layers:"?",isSelected:!1,printingTime:"?h ?m",pathForMoonraker:ar(e.__request__.params.path,s.filename),dirnameForMoonraker:cr(e.__request__.params.path)});return t}function er(e){const t=[];if(e.dirs||e.dirs.length)for(const s of e.dirs)t.push({dirs:[],files:[],name:s.dirname,modified:nr(s.modified),permissions:s.permissions,sizeInKb:ir(s.size),computedSize:Pr(s.size),isSelected:!1});return t}const tr=(e,t,s)=>{if(1==t.length){for(const n of e)if(n.name==t[0])return n.files=$i(s),n.dirs=er(s),sr(s);return[]}for(const n of e)if(n.name==t[0])return tr(n.dirs,t.slice(1),s);return[]};function sr(e){const t=[];if(e.dirs&&e.dirs.length)for(const s of e.dirs)s.dirname&&t.push(s.dirname);return t}function nr(e){if("undefined"===typeof e)return"--.--.----";const t=new Date(1e3*e);let s=t.getDate().toString(),n=t.getMonth()+1+"";return 1===s.length&&(s="0"+s),1===n.length&&(n="0"+n),`${s}.${n}.${t.getFullYear()}`}function ir(e){return"undefined"===typeof e||"number"!==typeof e?"?":Math.round(e/1e3)+""}const rr=(e,t)=>{if(1==t.length){for(const s of e)if(s.name==t[0])return s;return e.push(or(t[0])),e[e.length-1]}for(const s of e)if(s.name==t[0])return rr(s.dirs,t.slice(1));return e.push(or(t[0])),rr(e[e.length-1].dirs,t.slice(1))};function or(e){return{dirs:[],files:[],modified:"--:--:----",name:e,permissions:"?",sizeInKb:"?",computedSize:"?kb",isSelected:!1}}const ar=(e,t)=>{if(e.startsWith("gcodes/"))return e.slice(7)+"/"+t;if("gcodes"===e)return t;const s=e.indexOf("/");return-1!==s?e.slice(s+1)+"/"+t:t},cr=e=>{if(e.startsWith("gcodes/"))return e.slice(7);if("gcodes"===e)return"";const t=e.indexOf("/");return-1!==t?e.slice(t+1):""},lr=(e,t)=>{for(const s of t)switch(s.name){case"gcodes":ur(e.gcodes,s);break;case"config":e.config&&ur(e.config,s);break;default:break}};function ur(e,t){for(const s of t.files)e.set(s.pathForMoonraker,s);for(const s of t.dirs)ur(e,s)}const dr=(e,t)=>{if(pr(t))return;const s=Yi(t.item.path);s.unshift(t.item.root);const n=s[s.length-1],i=rr(e,s.slice(0,s.length-1));i?.files.push({dirnameForMoonraker:cr(s.slice(0,s.length-1).join("/")),isSelected:!1,layers:"?",modified:nr(t.item.modified),name:n,pathForMoonraker:ar(s.slice(0,s.length-1).join("/"),n),permissions:t.item.permissions,printingTime:"?h ?m",size:t.item.size,sizeInKb:ir(t.item.size),computedSize:Pr(t.item.size)})};function pr(e){return"config"===e.item.root&&"profiles/selected_diapason.json"===e.item.path}const mr=(e,t)=>{const s=Yi(t.item.path);s.unshift(t.item.root);const n=rr(e,s.slice(0,s.length-1)),i=s[s.length-1];if(n){let e=0;for(const t of n.files){if(t.name===i){n.files.splice(e,1);break}e++}}},fr=(e,t)=>{const s=Yi(t.item.path);s.unshift(t.item.root);const n=rr(e,s.slice(0,s.length-1)),i=s[s.length-1];if(n){let e=0;for(const s of n.files){if(s.name===i){s.modified=nr(t.item.modified),s.permissions=t.item.permissions,s.sizeInKb=ir(t.item.size),s.size=t.item.size;break}e++}}},hr=(e,t)=>{const s=t.source_item.path,n=Yi(s);n.unshift(t.source_item.root);const i=gr(e,n);if(i){const s=t.item.path,n=Yi(s);n.unshift(t.item.root);const r=n[n.length-1];i.modified=nr(t.item.modified),i.name=r,i.pathForMoonraker=t.item.path,i.dirnameForMoonraker=cr(n.slice(0,n.length-1).join("/")),i.isSelected=!1,yr(e,n,i)}};function gr(e,t){const s=t.slice(0,t.length-1),n=t[t.length-1],i=rr(e,s);if(i){let e=0;for(const t of i.files){if(t.name===n)return i.files.splice(e,1),t;e++}}return null}function yr(e,t,s){const n=t.slice(0,t.length-1),i=rr(e,n);i?.files.push(s)}const vr=(e,t)=>{const s=t.item.path,n=Yi(s);n.unshift(t.item.root);const i=rr(e,n);i&&(i.modified=nr(t.item.modified),i.permissions=t.item.permissions,i.sizeInKb=ir(t.item.size))},br=e=>{for(const t of e)Sr(t)};function Sr(e){let t=0;for(const s of e.files){const e=+s.sizeInKb;isNaN(e)||(t+=+s.sizeInKb)}for(const s of e.dirs){const e=Sr(s);t+=+e}return e.sizeInKb=t+"",e.computedSize=Pr(1e3*t),+t}const wr=(e,t)=>{const s=t.item.path,n=Yi(s);n.unshift(t.item.root);const i=n[n.length-1],r=n.slice(0,n.length-1),o=rr(e,r);if(o){let e=0;for(const t of o.dirs){if(t.name===i){o.dirs.splice(e,1);break}e++}}};function Pr(e){if(isNaN(parseInt(e+"")))return"?";let t=Math.round(e/1e3);if(t<1e3)return t+"kb";let s=_r(t/1e3);if(s<1e3)return s+"MB";let n=_r(s/1e3);return n+"GB"}function _r(e){return Math.round(10*e)/10}const Cr=(e,t)=>{const s=t.source_item.path,n=Yi(s);n.unshift(t.source_item.root);const i=Ar(e,n);if(i){const s=t.item.path,n=Yi(s);n.unshift(t.item.root);const r=n[n.length-1];i.modified=nr(t.item.modified),i.name=r,xr(e,n,i)}};function Ar(e,t){const s=t.slice(0,t.length-1),n=t[t.length-1],i=rr(e,s);if(i){let e=0;for(const t of i.dirs){if(t.name===n)return i.dirs.splice(e,1),t;e++}}return null}function xr(e,t,s){const n=t.slice(0,t.length-1),i=rr(e,n);i?.dirs.push(s)}const kr=(e,t="")=>{for(const s of e){const e=Fr(s.name,t);for(const t of s.files)t.pathForMoonraker=e+t.name,t.dirnameForMoonraker=e.slice(0,-1);0!==s.dirs.length&&kr(s.dirs,e)}};function Fr(e,t){return["config","gcodes"].includes(e)?t:t?t+e+"/":e+"/"}const Er=e=>new Map(JSON.parse(JSON.stringify(Array.from(e)))),Dr=(e,t)=>{const s=rr(e,["gcodes"]);Or(s,t)};function Or(e,t){const s=t.profiles;for(const n of e.files)n.profiles||(n.profiles={profiles:Er(s)});for(const n of e.dirs)Or(n,t)}const Br={getAllFilesAndDirs({state:e},t){e.isLoadingFinish=!1,e.recursiveFlag.push(1);const s=Yi(t);X.serverGetAllFilesAndDirs(t,s[0])},onGetAllFilesAndDirs({dispatch:e,state:t},s){const n=s.__request__.params.path;if(n){const i=Yi(n);let r=[];if(r=qi(t.dirs,i)?tr(t.dirs,i,s):Xi(t.dirs,i,s),r.length>0)for(const t of r)t&&e("getAllFilesAndDirs",`${n}/${t}`)}t.recursiveFlag.pop(),0==t.recursiveFlag.length&&(e("ourExtension/layoutsData/newFileBrowseWindow/refresh",null,{root:!0}),e("createFilesMap"),e("refreshDirectoriesSize"),t.isLoadingFinish=!0,t.isProfilesDownloadingFinished=!0,e("setPrintingProfilesForNewFiles"))},createFilesMap({state:e}){kr(e.dirs),e.fileSystem.gcodes.clear(),e.fileSystem.config?.clear(),lr(e.fileSystem,e.dirs)},setLayersByMoonrakerPath({commit:e,dispatch:t},s){e("setLayersByMoonrakerPath",s)},refreshDirectoriesSize({state:e}){br(e.dirs)},refreshGcodeParser({commit:e,dispatch:t,state:s}){kr(s.dirs),t("createFilesMap"),e("refreshGcodeParser")},onFileListChanged({state:e,dispatch:t,commit:s},n){switch(n.action){case"create_file":dr(e.dirs,n),"gcodes"===n.item.root&&(s("refreshGcodeParser"),t("setPrintingProfilesForNewFiles"));break;case"delete_file":mr(e.dirs,n),"gcodes"===n.item.root&&s("refreshGcodeParser");break;case"modify_file":fr(e.dirs,n),"gcodes"===n.item.root&&s("refreshGcodeParser");break;case"move_file":hr(e.dirs,n),"gcodes"===n.item.root&&s("refreshGcodeParser");break;case"create_dir":vr(e.dirs,n),e.recursiveFlag=[],t("getAllFilesAndDirs",n.item.root+"/"+n.item.path);break;case"delete_dir":wr(e.dirs,n);break;case"move_dir":Cr(e.dirs,n),kr(e.dirs),"gcodes"===n.item.root&&s("refreshGcodeParser");break}t("createFilesMap"),t("refreshDirectoriesSize")},setProfilesForAllGcodes({state:e,rootGetters:t},s){for(const n of e.fileSystem.gcodes.values()){const e=Er(s),t={profiles:e};n.profiles=t}e.isProfiesSetupFinished=!0},setPrintingProfilesForNewFiles({state:e,rootGetters:t}){if(e.isProfiesSetupFinished){const s=t["ourExtension/profiles/getDefaultProfilesMap"],n=Er(s),i={profiles:n};Dr(e.dirs,i)}}},Rr={getListOfFilesAndDirs(e){return e.dirs[0]&&"gcodes"===e.dirs[0].name?e.dirs[0]:[]},getDirs(e){return e.dirs},getFilesLoadingFinishedFlag:e=>e.isLoadingFinish,getProfilesDownloadingFinishedFlag:e=>e.isProfilesDownloadingFinished,getFilesMap(e){return e.fileSystem},getProfilesFiles(e){return qi(e.dirs,Yi("config/profiles"))?rr(e.dirs,Yi("config/profiles")):null},getSelectedFile(e){return e.selectedFile},isFileSelected(e){return Boolean(e.selectedFile)},getLastPrintingFile:e=>()=>e.lastPrintingFile},Ir={setLayersByMoonrakerPath(e,t){if(t.path&&"layers"in t&&e.fileSystem.gcodes.has(t.path)){const s=e.fileSystem.gcodes.get(t.path);s&&(s.layers=t.layers)}},refreshGcodeParser(e){e.isLoadingFinish=!1,e.isLoadingFinish=!0},setSelectedFile(e,t){e.selectedFile=t},setLastPrintingFile(e,t){e.lastPrintingFile=t}},Lr=()=>({dirs:[],files:[],recursiveFlag:[],fileSystem:{gcodes:new Map,config:new Map},isLoadingFinish:!0,isProfilesDownloadingFinished:!1,isProfiesSetupFinished:!1,selectedFile:null}),Tr=Lr(),Mr=!0,Wr={namespaced:Mr,state:Tr,actions:Br,getters:Rr,mutations:Ir},Nr=()=>({alertQueue:[],infoAlertState:{cancellationToken:!1,currentMessage:null}}),Ur=Nr(),jr={addToAlertQueue({state:e},t){e.alertQueue.push(t)},confirmClick({state:e}){const t=e.alertQueue[0];t&&t.confirmCallback&&t.confirmCallback(),e.alertQueue.shift()},rejectClick({state:e}){const t=e.alertQueue[0];t&&t.rejectCallback&&t.rejectCallback(),e.alertQueue.shift()},showInfoAlert({state:e,dispatch:t},s){if(e.infoAlertState.currentMessage)return e.infoAlertState.cancellationToken=!0,void setTimeout((()=>{t("showInfoAlert",s)}),10);e.infoAlertState.cancellationToken=!1,e.infoAlertState.currentMessage=s},onSocketError({state:e,dispatch:t},s){const n=s.message;let i;if(n){const e=n.message;i=e?{message:e,type:"red"}:{message:n,type:"red"}}else i={message:s,type:"red"};let r=i.message.split("\\n").join("<br>");i.message=r,t("showInfoAlert",i)}},Hr={getAlertQueue(e){return e.alertQueue},getAlertFlag:e=>()=>Boolean(e.alertQueue.length),getFirstAlert:e=>()=>e.alertQueue[0],getInfoAlertCancellationToken:e=>()=>e.infoAlertState.cancellationToken,getInfoAlert:e=>()=>e.infoAlertState.currentMessage,getInfoAlertFlag:e=>()=>Boolean(e.infoAlertState.currentMessage)},Zr=!0,Qr={namespaced:Zr,state:Ur,actions:jr,getters:Hr},zr={startTimeRefreshing({commit:e,dispatch:t}){e("refreshTime"),setTimeout((()=>t("startTimeRefreshing")),1e4)}},Jr={getActualTime:e=>()=>e.actualTime},Kr={refreshTime(e){const t=new Date;let s=t.getHours()+"",n=t.getMinutes()+"";1===s.length&&(s="0"+s),1===n.length&&(n="0"+n),e.actualTime=`${s}:${n}`}},Gr=()=>({actualTime:"00:00"}),Vr=Gr(),Yr=!0,qr={namespaced:Yr,getters:Jr,actions:zr,mutations:Kr,state:Vr},Xr={openDirectory({rootState:e,getters:t},s){const n=t["getCurrentPath"];n?X.serverGetGcodes(n+"/"+s.name):X.serverGetGcodes(s.name)},openPreviousDirectory({getters:e}){let t=e["getCurrentPath"];if(t){const e=t.lastIndexOf("/");t=-1!==e?t.slice(0,e):"",X.serverGetGcodes(t)}},onSetGcodeFiles({dispatch:e,commit:t,rootGetters:s},n){e("files/onServerFilesGetDirectory",n,{root:!0}),s["ourExtension/windowFlags/getFileBrowseWindowFlag"]||e("ourExtension/windowFlags/onOpenFileBrowseWindow",null,{root:!0})}};var $r={getListOfFiles(e){return e.fileList},getListOfDirectories(e){return e.directoryList},getCurrentPath(e){return e.currentPath.slice(7)}};const eo=e=>{const t=new Date(1e3*e);let s=t.getDate().toString(),n=t.getMonth()+1+"";return 1===s.length&&(s="0"+s),1===n.length&&(n="0"+n),`${s}.${n}.${t.getFullYear()}`};var to={chooseFile(e,t){const s=!e.fileList[t].isActive;for(const n of e.fileList)n.fileId===t?n.isActive=s:n.isActive=!1},deactivateFiles(e){for(const t of e.fileList)t.isActive=!1},setFiles(e,t){e.fileList=[],e.directoryList=[],e.currentPath=t.path;let s=0,n=0;for(const i of t.items){if(!i.name||".."==i.name)continue;const t=eo(i.modified);if("directory"===i.type){const s={directoryId:n,name:i.name,date:t,size:Math.round(i.size/1e3)};e.directoryList.push(s),++n}else{const n={fileId:s,name:i.name,date:t,size:Math.round(i.size/1e3),isActive:!1};e.fileList.push(n),++s}}}};const so=()=>({currentPath:"gcodes",directoryList:[],fileList:[{fileId:0,name:"some_file.gcode",date:"03.04.23",size:12,isActive:!1},{fileId:1,name:"some_file1.gcode",date:"03.04.23",size:12,isActive:!1},{fileId:2,name:"some_file2.gcode",date:"03.04.23",size:12,isActive:!1}]}),no=so(),io=!0;var ro={namespaced:io,state:no,getters:$r,mutations:to,actions:Xr};const oo={getFileData:e=>()=>{const t=e.fileData;return t||{name:"---",sizeInKb:"?",computedSize:"?kb",size:-1,modified:"--:--:----",isSelected:!1,layers:"?",permissions:"?",printingTime:"?h ?m",pathForMoonraker:"",dirnameForMoonraker:""}},getFile:e=>()=>e.fileData,getSelectedDiapason:e=>()=>e.selectedDiapason},ao={setFileData(e,t){e.fileData=t,e.selectedDiapason=null},setSelectedDiapason(e,t){e.selectedDiapason=t}},co=()=>({selectedDiapason:null}),lo=co(),uo=!0;var po={namespaced:uo,state:lo,getters:oo,mutations:ao};const mo={defaultImplementation:!0,notDefaultImplementation:!1},fo=()=>({inputWindowData:{initValue:0,coordName:"",dispachAfterConfirm:"void"},processingValue:"0",finalValue:0,keyboardFlag:!0,valcoderStep:1,flags:mo,rejectPointClick:!1}),ho=fo(),go={toSeconds(e){let[t,s]=e.split(":");t=t.replace("-","0"),s=s.replace("-","0");let n=+t,i=+s;return isNaN(n)&&(n=0),isNaN(i)&&(i=0),60*n+i},toTime(e){let t=Math.floor(e/60),s=(e-60*t)%60,n=t+"",i=s+"";return 1===n.length&&(n="0"+n),1===i.length&&(i="0"+i),n+":"+i},digitButton(e,t,s,n){const i=e.indexOf("-");let r=e;return-1!==i&&(r=this.replaceAt(e,i,t)),this.isSatisfiedLength(r,s,n)?("-"!==r[0]&&+r[0]>5&&(r=this.replaceAt(r,0,"5")),"-"!==r[3]&&+r[3]>5&&(r=this.replaceAt(r,3,"5")),r):this.makeSatisfiesLength(r,s,n)},isSatisfiedLength(e,t,s){const n=e.indexOf("-");if(-1!==n)return!0;let i=this.toSeconds(e);if("undefined"!==typeof t&&i>t)return!1;if("undefined"!==typeof s&&i<s)return!1;if(i<0)return!1;if(i>6039)return!1;const r=+e.split(":")[1];return!(r>60)&&!("-"!==e[0]&&+e[0]>5)},makeSatisfiesLength(e,t,s){const n=e.indexOf("-");if(-1!==n)return this.toTime(this.toSeconds(e));let i=this.toSeconds(e);"undefined"!==typeof t&&i>t&&(i=t),"undefined"!==typeof s&&i<s&&(i=s),i<0&&(i=0),i>5999&&(i=5999);let[r,o]=e.split(":");+o>59&&(i=60*+r+59);let a=this.toTime(i);return"-"!==a[0]&&+a[0]>5&&(a=this.replaceAt(a,0,"5")),a},replaceAt(e,t,s){return e.substring(0,t)+s+e.substring(t+1)},deleteButton(e){let t=e.indexOf("-");return-1===t?(e=this.replaceAt(e,e.length-1,"-"),e):(0!==t&&(":"===e[t-1]&&(t-=1),e=this.replaceAt(e,t-1,"-")),e)},confirm(e,t,s){let n=this.toSeconds(e);return"undefined"!==typeof s&&"undefined"!==typeof t&&(n<s&&(n=s),n>t&&(n=t)),this.toTime(n)},isMaxAndMinCheck(e,t){return"number"!==typeof e||isNaN(e)||"number"!==typeof t||isNaN(t)}},yo={initInputWindow({commit:e},t){e("reset"),e("setInputWindowData",t.inputWindowData),e("setProcessingValue",t.inputWindowData.initValue+""),e("setFinalValue",t.inputWindowData.initValue),e("setValcoderStep",t.valcoderStep);const s=JSON.parse(JSON.stringify(mo));e("setFlags",s),t.inputWindowData.rejectPointClick&&e("rejectPointClick")},initNotDefaultInputWindow({commit:e},t){e("reset"),e("setInputWindowData",t.inputWindowData),e("setProcessingValue",t.inputWindowData.initValue+""),e("setFinalValue",t.inputWindowData.initValue),e("setValcoderStep",t.valcoderStep);const s=JSON.parse(JSON.stringify(mo));s.defaultImplementation=!1,s.notDefaultImplementation=!0,e("setFlags",s),t.inputWindowData.rejectPointClick&&e("rejectPointClick")},confirm({dispatch:e,commit:t,state:s}){e("ourExtension/windowFlags/openPreviousWindow",null,{root:!0}),s.inputWindowData?.isItTime?s.finalValue=go.toSeconds(s.processingValue):s.finalValue=+s.processingValue;const n=s.inputWindowData?.callbackAfterConfirm;n&&n(s.finalValue);const i=s.inputWindowData?.dispachAfterConfirm;"void"!==i&&i&&e(i,s.finalValue,{root:!0})}},vo={getInputWindowData(e){return e.inputWindowData},getProcessingValue(e){return e.processingValue},getKeyboardFlag:e=>()=>e.keyboardFlag,getValcoderStep(e){return e.valcoderStep},getFlags(e){return e.flags},getFinalValue(e){return e.finalValue}},bo={setInputWindowData(e,t){const s=t.callbackAfterConfirm;e.inputWindowData=JSON.parse(JSON.stringify(t)),e.inputWindowData&&(e.inputWindowData.callbackAfterConfirm=s)},setProcessingValue(e,t){e.processingValue=t},setFinalValue(e,t){e.finalValue=t},reset(e){Object.assign(e,fo())},setKeyboardFlag(e,t){t||(e.inputWindowData?.isItTime?e.processingValue=go.toTime(go.toSeconds(e.processingValue)):e.processingValue=+e.processingValue+""),e.keyboardFlag=t},setValcoderStep(e,t){e.valcoderStep=t},setFlags(e,t){e.flags=t},rejectPointClick(e){e.rejectPointClick=!0}},So=!0,wo={namespaced:So,state:ho,actions:yo,mutations:bo,getters:vo},Po=()=>({buttonList:[{buttonId:0,buttonName:"Открыть файл",buttonImage:s(9930)},{buttonId:1,buttonName:"Допечатная подготовка",activeButtonImage:s(6365),buttonImage:s(7803)},{buttonId:2,buttonName:"Конфигурация",buttonImage:s(2095)},{buttonId:3,buttonName:"Печать",buttonImage:s(5302),activeButtonImage:s(6381)}]}),_o=Po();var Co={getButtonList(e){return e.buttonList}};const Ao=!0;var xo={namespaced:Ao,state:_o,getters:Co};const ko={reset({commit:e}){e("setReset")},setX({commit:e},t){e("setX",t)},setY({commit:e},t){e("setY",t)},setZ({commit:e},t){e("setZ",t)},setNeedToSendGcodeMove({commit:e}){e("setNeedToSendGcodeMove",!0)}},Fo=e=>Math.round(10*+e)/10,Eo={getCoordinates:(e,t,s)=>()=>{const e=s.printer.printer.toolhead.position,t=[];for(let s of e)t.push(Fo(s));return t},getMaxCoordinates:(e,t,s)=>()=>{let e=s.printer.printer.toolhead.axis_maximum;e&&e.length||(e=[1e3,1e3,1e3]);const t=[];for(let s of e)t.push(Fo(s));return t},getMinCoordinates:(e,t,s)=>()=>{let e=s.printer.printer.toolhead.axis_minimum;e&&e.length||(e=[-1e3,-1e3,-1e3]);const t=[];for(let s of e)t.push(Fo(s));return t},getStepSelectorInfo(e){return e.stepSelectorInfo},getCurrentStep(e){return e.stepSelectorInfo.currentStep},getNeedToSendGCodeMove(e){return e.needToSendGcodeMove}},Do=()=>({coordinates:{x:0,y:0,z:0},stepSelectorInfo:{currentStep:1,stepValues:[.1,.5,1,2,5,10,50],percentValues:[0,17,33.5,50,66.5,83.5,100]},needToSendGcodeMove:!1}),Oo=Do(),Bo={setReset(e){Object.assign(e,Do())},setCurrentStep(e,t){e.stepSelectorInfo.currentStep=t},setX(e,t){e.coordinates.x=t},setY(e,t){e.coordinates.y=t},setZ(e,t){e.coordinates.z=t},setNeedToSendGcodeMove(e,t){e.needToSendGcodeMove=t}},Ro=!0,Io={namespaced:Ro,state:Oo,mutations:Bo,getters:Eo,actions:ko},Lo={refresh({dispatch:e,commit:t,getters:s}){t("setSelectedFile",null),e("setCurrentPath",s["getCurrentPath"])},setCurrentPath({commit:e,dispatch:t,rootGetters:s,getters:n},i){e("setCurrentPath",i);const r=s["ourExtension/files/getDirs"],o=Yi(n["getCurrentPath"]);if(qi(r,o)){const t=rr(r,o);e("setFilesAndDirs",t)}}},To={getCurrentPath(e){return e.currentPath},getFileList:e=>()=>e.fileList,getDirectoryList(e){return e.directoryList},getSelectedFile(e){return e.selectedFile},getUsualSelectedFile(e){for(const t of e.fileList)if(t.isSelected)return t;return null},getUsualSelectedDirectory(e){for(const t of e.directoryList)if(t.isSelected)return t;return null}},Mo={setCurrentPath(e,t){e.currentPath=t},setFilesAndDirs(e,t){e.directoryList=t.dirs,e.fileList=t.files},deactivateFiles(e){for(const t of e.fileList)t.isSelected=!1;for(const t of e.directoryList)t.isSelected=!1},setSelectedFile(e,t){if(t){const s={fileData:t,pathForMoonraker:ar(e.currentPath,t.name)};e.selectedFile=s}else e.selectedFile=null}},Wo=()=>({currentPath:"",directoryList:[],fileList:[],selectedFile:null}),No=Wo(),Uo=!0,jo={namespaced:Uo,state:No,actions:Lo,getters:To,mutations:Mo},Ho=()=>({a1Coords:{x:0,y:0,z:0},a2Coords:{x:0,y:0,z:0},b1Coords:{x:0,y:0,z:0},b2Coords:{x:0,y:0,z:0},dispacement:{x:0,y:0,z:0},rotateAngle:0,scale:1}),Zo=Ho(),Qo={reset({state:e}){Object.assign(e,Ho()),e.file=null},initByFile({state:e,commit:t},s){t("setFile",s)}},zo={isFileInit:e=>()=>Boolean(e.file),getFile:e=>()=>e.file},Jo={setFile(e,t){e.file=t}},Ko=!0,Go={namespaced:Ko,state:Zo,actions:Qo,getters:zo,mutations:Jo},Vo=()=>({file:null,printingDiapason:null,printingSettings:{shiftForAllLayers:!1,pauseBetweenLayers:!1,pauseValue:"00:59",setNextLayer:!1,nextLayerValue:0},shift:0}),Yo=Vo(),qo={getPrintingSettings(e){return e.printingSettings},getPrintingDiapason:e=>()=>e.printingDiapason,getShift(e){return e.shift},getFile:e=>()=>e.file,hasFile:e=>()=>Boolean(e.file),hasPrintingDiapason:e=>()=>Boolean(e.printingDiapason)},Xo={reset({state:e}){Object.assign(e,Vo())},setPrintingDiapason({state:e},t){e.printingDiapason=t},setFile({state:e},t){e.file=t}},$o=!0,ea={namespaced:$o,state:Yo,getters:qo,actions:Xo},ta=()=>({file:null,headerText:"Последняя печать",layersText:"",lastPrintingProfileFlag:!0,layersSetupWindowFlag:!1}),sa=ta(),na={reset({commit:e,state:t}){Object.assign(t,ta()),e("reset")},setFile({commit:e,dispatch:t,rootGetters:s,state:n},i){e("setFile",i);const r=n.file?.profiles,o=r?.selectedDiapason;if(o){e("setSelectedDiapason",o);let t=n.file?.name;t||(t="Профиль печати"),e("setHeaderText",t),n.lastPrintingProfileFlag=!1,ce.profileSelectedAlert(o.profile.name,n.layersText)}else t("setLastPrintingInterval")},setCallback({state:e},t){e.confirmCallback=t},initWithGlobalProfiles({commit:e,dispatch:t,rootGetters:s,state:n}){const i=s["ourExtension/profiles/getDefaultProfilesMap"],r=Er(i);n.globalProfilesInitialisationFlag=!0,n.globalProfilesMap=r;const o={isRootDiapason:!0,profile:s["ourExtension/profiles/getLastPrintingProfile"]()};n.lastPrintingProfileFlag=!0,n.globalLastPrintingDiapason=o,e("setSelectedDiapason",o),ce.lastPrintingProfileSelectedAlert(n.layersText)},setLastPrintingInterval({dispatch:e,commit:t,rootGetters:s,state:n}){if(n.globalProfilesInitialisationFlag)n.lastPrintingProfileFlag=!0,n.selectedDiapason=n.globalLastPrintingDiapason,t("setHeaderText","Последняя печать");else{n.lastPrintingProfileFlag=!0,n.file&&n.file.profiles&&(n.file.profiles.selectedDiapason=null);const e={isRootDiapason:!0,profile:s["ourExtension/profiles/getLastPrintingProfile"]()};t("setSelectedDiapason",e),t("setHeaderText","Последняя печать")}ce.lastPrintingProfileSelectedAlert(n.layersText)},addDiapason({dispatch:e,commit:t,state:s},n){const i=s.selectedDiapason;i&&(Ee.createNext(i),i.nextDiapason&&(i.nextDiapason.firstLayer=n.firstLayer,i.nextDiapason.lastLayer=n.lastLayer,t("setSelectedDiapason",i.nextDiapason),ce.addDiapasonAlert(s.layersText)))},prevDiapason({dispatch:e,commit:t,state:s}){const n=s.selectedDiapason?.prevDiapason;if(n){t("setSelectedDiapason",n);let e=s.layersText;s.selectedDiapason?.isRootDiapason&&(e="(Основной диапазон)"),ce.diapasonSelectedAlert(e)}},nextDiapason({dispatch:e,commit:t,state:s}){const n=s.selectedDiapason?.nextDiapason;if(n){t("setSelectedDiapason",n);let e=s.layersText;s.selectedDiapason?.isRootDiapason&&(e="(Основной диапазон)"),ce.diapasonSelectedAlert(e)}},deleteCurrent({dispatch:e,commit:t,state:s}){const n=s.selectedDiapason;if(n){const e=Ee.deleteCurrent(n);t("setSelectedDiapason",e),ce.deleteDiapasonAlert(n)}},deleteAll({dispatch:e,commit:t,state:s}){const n=s.selectedDiapason;if(n){const e=Ee.deleteAll(n);t("setSelectedDiapason",e),ce.deleteAllDiapasonesAlert()}},refreshToDefault({commit:e,rootGetters:t,state:s}){const n=s.selectedDiapason?.profile.name,i=t["ourExtension/profiles/getDefaultProfilesMap"];if(n){let e=i.get(n)?.profile;e=JSON.parse(JSON.stringify(e)),e&&s.selectedDiapason&&(s.selectedDiapason.profile=e)}},setProfile({commit:e,dispatch:t,state:s},n){if(s.globalProfilesInitialisationFlag)if("Последняя печать"===n){if(s.lastPrintingProfileFlag)return;t("setLastPrintingInterval")}else{const t=s.globalProfilesMap?.get(n);e("setHeaderText","Профиль печати"),s.lastPrintingProfileFlag=!1,e("setSelectedDiapason",t),t&&ce.profileSelectedAlert(t.profile.name,s.layersText)}else if("Последняя печать"===n){if(s.lastPrintingProfileFlag)return;t("setLastPrintingInterval")}else{const t=s.file?.profiles?.profiles.get(n);if(t){let n=s.file?.name;n||(n="Профиль печати"),e("setHeaderText",n),s.lastPrintingProfileFlag=!1,e("setSelectedDiapason",t),ce.profileSelectedAlert(t.profile.name,s.layersText)}}},confirm({state:e,commit:t,dispatch:s}){if(e.globalProfilesInitialisationFlag){const n=e.globalProfilesMap,i=n?.values();if(i){const s=[];for(const e of i)s.push(e.profile);t("ourExtension/profiles/setProfiles",s,{root:!0}),t("ourExtension/profiles/setLastPrintingProfile",e.globalLastPrintingDiapason?.profile,{root:!0})}s("ourExtension/windowFlags/openPreviousWindow",null,{root:!0})}else e.confirmCallback&&e.confirmCallback(e.selectedDiapason),s("ourExtension/windowFlags/openPreviousWindow",null,{root:!0})}},ia={getFile(e){return e.file},getSelectedDiapason:e=>()=>e.selectedDiapason,getLayersSetupWindowFlag(e){return e.layersSetupWindowFlag},getHeaderText(e){return e.headerText},getLayersText(e){return e.layersText},getProfilesNamesList:e=>()=>{const t=e.file?.profiles?.profiles;if(t){const e=t.keys(),s=Array.from(e);return s.sort()}},getProfilesNamesMap:e=>()=>{if(e.globalProfilesInitialisationFlag){const t=e.globalProfilesMap;if(t){const e=t.keys(),s=Array.from(e).sort(),n=new Map;for(const t of s){const e=Oe(t);n.set(t,e)}return n}}else{const t=e.file?.profiles?.profiles;if(t){const e=t.keys(),s=Array.from(e).sort(),n=new Map;for(const t of s){const e=Oe(t);n.set(t,e)}return n}}},isItLastPrintingProfile(e){return e.lastPrintingProfileFlag},isItInitWithGlobalProfiles:e=>()=>e.globalProfilesInitialisationFlag},ra={setFile(e,t){e.file=t,e.globalLastPrintingDiapason=void 0,e.globalProfilesInitialisationFlag=void 0,e.globalProfilesMap=void 0,e.selectedDiapason=void 0},setSelectedDiapason(e,t){if(e.selectedDiapason=t,!e.lastPrintingProfileFlag){const s=e.file?.profiles;s&&(s.selectedDiapason=t)}"number"===typeof t.lastLayer&&"number"===typeof t.firstLayer?e.layersText=`(${t.firstLayer} - ${t.lastLayer})`:(e.layersText="(Все слои)",e.globalProfilesInitialisationFlag&&(e.layersText="(Глобально)"))},setHeaderText(e,t){e.headerText=t},reset(e){e.file=null,e.confirmCallback=null,e.selectedDiapason=null,e.globalLastPrintingDiapason=null,e.globalProfilesInitialisationFlag=null,e.globalProfilesMap=null},openLayersSetupWindow(e){e.layersSetupWindowFlag=!0},closeLayersSetupWindow(e){e.layersSetupWindowFlag=!1}},oa=!0,aa={namespaced:oa,state:sa,getters:ia,mutations:ra,actions:na},ca=()=>({listItems:[]}),la=ca(),ua={reset({state:e}){Object.assign(e,ca()),e.zIndex=void 0},initWithIcons({state:e},t){e.callbackAfterSelect=t.callbackAfterConfirm;const s=t.initMap;if(!s)return;const n=[];for(const[i,r]of s){const e={isActive:!1,name:i,icon:r};n.push(e)}e.listItems=n,e.zIndex=t.zIndex},initWithoutIcons({state:e},t){e.callbackAfterSelect=t.callbackAfterConfirm;const s=t.initList;if(!s)return;const n=[];for(const i of s){const e={isActive:!1,name:i};n.push(e)}e.listItems=n,e.zIndex=t.zIndex},deactivateItems({state:e,getters:t}){for(const s of e.listItems)s.isActive=!1},confirm({state:e,dispatch:t},s){e.callbackAfterSelect&&e.callbackAfterSelect(s),t("ourExtension/windowFlags/openPreviousWindow",null,{root:!0})}},da={isItIconImplementation(e){return!(!e.listItems[0]||!e.listItems[0].icon)},getListItems(e){return e.listItems},getZIndex(e){return e.zIndex}},pa=!0,ma={namespaced:pa,state:la,actions:ua,getters:da},fa=()=>({maintenanceFlag:!1,lastCoords:[]}),ha=fa(),ga={setLastCoords({state:e},t){e.lastCoords=t},setMaintenanceFlag({state:e},t){e.maintenanceFlag=t}},ya={getLastCoords(e){return e.lastCoords},getMaintenanceFlag(e){return e.maintenanceFlag}},va=!0,ba={namespaced:va,state:ha,actions:ga,getters:ya},Sa=!0;var wa={namespaced:Sa,modules:{baseLayout:qr,mainWindow:xo,fileBrowseWindow:ro,newFileBrowseWindow:jo,filePreviewWindow:po,moveWindow:Io,inputWindow:wo,profilesWindow:aa,selectListWindow:ma,preprintingWindow:Go,printingWindow:ea,alerts:Qr,settingsWindow:ba}};const Pa={setProfiles({commit:e,getters:t,dispatch:s},n){e("setProfiles",n);const i=t["getDefaultProfilesMap"];let r=JSON.parse(JSON.stringify(i.get("Нержавеющие стали")));if(!r){const e=Fe(i);r=JSON.parse(JSON.stringify(i.get(e[0])))}e("setLastPrintingProfile",r.profile),s("ourExtension/files/setProfilesForAllGcodes",i,{root:!0})}},_a={getDefaultProfilesMap(e){const t=new Map;for(const s of e.profilesList){const e={isRootDiapason:!0,profile:s};t.set(s.name,e)}return t},getLastPrintingProfile:e=>()=>JSON.parse(JSON.stringify(e.lastPrintingProfile)),getProfilesMetadata(e){return e.profilesMetadata}},Ca={setProfiles(e,t){e.profilesList=t},setProfilesMetadata(e,t){e.profilesMetadata=t},setLastPrintingProfile(e,t){e.lastPrintingProfile=JSON.parse(JSON.stringify(t))}},Aa=()=>({profilesList:[],lastPrintingProfile:null,profilesMetadata:null}),xa=Aa(),ka=!0,Fa={namespaced:ka,state:xa,actions:Pa,mutations:Ca,getters:_a},Ea={clearStack({commit:e,dispatch:t,getters:s,rootState:n}){e("setWindowStack",[s.getInitFlagsObject()])},onOpenFileBrowseWindow({commit:e,dispatch:t,getters:s,rootState:n},i){e("openFileBrowseWindow");const r=s.getCurrentFlagsObject();e("saveCurrentLayoutInStack",r)},openFileBrowseWindow({commit:e,dispatch:t,getters:s,rootState:n},i){e("openFileBrowseWindow");const r=s.getCurrentFlagsObject();e("saveCurrentLayoutInStack",r)},openMainWindow({commit:e,getters:t}){e("openMainWindow"),e("setWindowStack",[t.getInitFlagsObject()])},openMoveWindow({dispatch:e,commit:t,getters:s}){e("ourExtension/layoutsData/moveWindow/reset",null,{root:!0}),t("openMoveWindow");const n=s.getCurrentFlagsObject();t("saveCurrentLayoutInStack",n)},openFilePreviewWindow({commit:e,getters:t}){e("openFilePreviewWindow");const s=t.getCurrentFlagsObject();e("saveCurrentLayoutInStack",s)},openPreviousWindow({commit:e}){e("openPreviousWindow")},openInputWindow({dispatch:e,commit:t,getters:s}){t("openInputWindow");const n=s.getCurrentFlagsObject();t("saveCurrentLayoutInStack",n)},openMainSettingsWindow({dispatch:e,commit:t,getters:s}){t("openMainSettingsWindow");const n=s.getCurrentFlagsObject();t("saveCurrentLayoutInStack",n)},openConsoleWindow({commit:e,getters:t}){e("openConsoleWindow");const s=t.getCurrentFlagsObject();e("saveCurrentLayoutInStack",s)},openProfilesWindow({commit:e,getters:t,state:s,dispatch:n}){e("openProfilesWindow");const i=t.getCurrentFlagsObject();e("saveCurrentLayoutInStack",i)},openSelectListWindow({commit:e,getters:t}){e("openSelectListWindow");const s=t.getCurrentFlagsObject();e("saveCurrentLayoutInStack",s)},openPreprintingWindow({commit:e,getters:t}){e("openPreprintingWindow");const s=t.getCurrentFlagsObject();e("saveCurrentLayoutInStack",s)},openPrintingWindow({commit:e,getters:t}){e("openPrintingWindow");const s=t.getCurrentFlagsObject();e("saveCurrentLayoutInStack",s)},openPrintSettingsWindow({commit:e,getters:t}){e("openPrintSettingsWindow");const s=t.getCurrentFlagsObject();e("saveCurrentLayoutInStack",s)},openGorelkaMaintenanceWindow({commit:e,getters:t}){e("openGorelkaMaintenanceWindow");const s=t.getCurrentFlagsObject();e("saveCurrentLayoutInStack",s)},openSystemInfoWindow({commit:e,getters:t}){e("openSystemInfoWindow");const s=t.getCurrentFlagsObject();e("saveCurrentLayoutInStack",s)}},Da={mainWindowFlag:!0,fileBrowseWindowFlag:!1,filePreviewWindowFlag:!1,moveWindowFlag:!1,inputWindowFlag:!1,mainSettingsWindowFlag:!1,consoleWindowFlag:!1,profilesWindowFlag:!1,selectListWindowFlag:!1,preprintingWindowFlag:!1,printingWindowFlag:!1,printSettingsFlag:!1,gorelkaMaintenanceWindowFlag:!1,systemInfoWindow:!1},Oa=()=>({stack:[Da],flags:JSON.parse(JSON.stringify(Da))}),Ba=Oa(),Ra={getMainWindowFlag(e){return e.flags.mainWindowFlag},getFileBrowseWindowFlag(e){return e.flags.fileBrowseWindowFlag},getFilePreviewWindowFlag(e){return e.flags.filePreviewWindowFlag},getMoveWindowFlag(e){return e.flags.moveWindowFlag},getInputWindowFlag(e){return e.flags.inputWindowFlag},getCurrentFlagsObject:e=>()=>JSON.parse(JSON.stringify(e.flags)),getInitFlagsObject:e=>()=>JSON.parse(JSON.stringify(Da)),getMainSettingsWindowFlag(e){return e.flags.mainSettingsWindowFlag},getConsoleWindowFlag(e){return e.flags.consoleWindowFlag},getProfilesWindowFlag(e){return e.flags.profilesWindowFlag},getSelectListWindowFlag(e){return e.flags.selectListWindowFlag},getPreprintingWindowFlag(e){return e.flags.preprintingWindowFlag},getPrintingWindowFlag(e){return e.flags.printingWindowFlag},getPrintSettingsWindowFlag(e){return e.flags.printSettingsFlag},getGorelkaMaintenanceWindowFlag(e){return e.flags.gorelkaMaintenanceWindowFlag},getSystemInfoWindowFlag(e){return e.flags.systemInfoWindow}},Ia={openPreviousWindow(e){if(e.stack.length>1){e.stack.pop();const t=e.stack[e.stack.length-1];t&&(e.flags=JSON.parse(JSON.stringify(t)))}else{const t=e.stack[0];t&&(e.flags=JSON.parse(JSON.stringify(t)))}},saveCurrentLayoutInStack(e,t){e.stack.push(t)},setWindowStack(e,t){e.stack=t},openMainWindow(e){const t=JSON.parse(JSON.stringify(Da));e.flags=t},openFileBrowseWindow(e){e.flags.fileBrowseWindowFlag=!0},openFilePreviewWindow(e){const t=JSON.parse(JSON.stringify(Da));t.mainWindowFlag=!1,t.filePreviewWindowFlag=!0,e.flags=t},openMoveWindow(e){const t=JSON.parse(JSON.stringify(Da));t.mainWindowFlag=!1,t.moveWindowFlag=!0,e.flags=t},openInputWindow(e){e.flags.inputWindowFlag=!0},openMainSettingsWindow(e){const t=JSON.parse(JSON.stringify(Da));t.mainWindowFlag=!1,t.mainSettingsWindowFlag=!0,e.flags=t},openConsoleWindow(e){const t=JSON.parse(JSON.stringify(Da));t.mainWindowFlag=!1,t.consoleWindowFlag=!0,e.flags=t},openProfilesWindow(e){const t=JSON.parse(JSON.stringify(Da));t.mainWindowFlag=!1,t.profilesWindowFlag=!0,e.flags=t},openSelectListWindow(e){e.flags.selectListWindowFlag=!0},openPreprintingWindow(e){const t=JSON.parse(JSON.stringify(Da));t.mainWindowFlag=!1,t.preprintingWindowFlag=!0,e.flags=t},openPrintingWindow(e){const t=JSON.parse(JSON.stringify(Da));t.mainWindowFlag=!1,t.printingWindowFlag=!0,e.flags=t},openPrintSettingsWindow(e){e.flags.printSettingsFlag=!0},openGorelkaMaintenanceWindow(e){const t=JSON.parse(JSON.stringify(Da));t.mainWindowFlag=!1,t.gorelkaMaintenanceWindowFlag=!0,e.flags=t},openSystemInfoWindow(e){const t=JSON.parse(JSON.stringify(Da));t.mainWindowFlag=!1,t.systemInfoWindow=!0,e.flags=t}},La=!0;var Ta={namespaced:La,actions:Ea,mutations:Ia,state:Ba,getters:Ra};const Ma=()=>({isSocketConnected:!1,buttonsState:{firstButton:!1,secondButton:!1,thirdButton:!1,fourthButton:!1,fifthButton:!1,sixthButton:!1},encoderState:{encoder1:{emited:!1,isClockwise:!1},encoder2:{emited:!1,isClockwise:!1}}}),Wa=Ma(),Na={setSocketConnected(e,t){e.isSocketConnected=t},setFirstButton(e,t){e.buttonsState.firstButton=t},setSecondButton(e,t){e.buttonsState.secondButton=t},setThirdButton(e,t){e.buttonsState.thirdButton=t},setFourthButton(e,t){e.buttonsState.fourthButton=t},setFifthButton(e,t){e.buttonsState.fifthButton=t},setSixthButton(e,t){e.buttonsState.sixthButton=t},setEncoder1(e,t){e.encoderState.encoder1=t},setEncoder2(e,t){e.encoderState.encoder2=t}},Ua={getSocketConnected(e){return e.isSocketConnected},getFirstButton(e){return e.buttonsState.firstButton},getSecondButton(e){return e.buttonsState.secondButton},getThirdButton(e){return e.buttonsState.thirdButton},getFourthButton(e){return e.buttonsState.fourthButton},getFifthButton(e){return e.buttonsState.fifthButton},getSixthButton(e){return e.buttonsState.sixthButton},getEncoder1(e){return e.encoderState.encoder1},getEncoder2(e){return e.encoderState.encoder2}},ja=!0,Ha={namespaced:ja,state:Wa,mutations:Na,getters:Ua},Za=!0,Qa={namespaced:Za,modules:{layoutsData:wa,windowFlags:Ta,files:Wr,profiles:Fa,gpio:Ha},actions:{reset(){}}};r.ZP.use(je.ZP);var za=new je.ZP.Store({modules:{socket:tt,auth:lt,server:kt,printer:Jt,config:rs,files:vs,layout:xs,charts:Is,console:Qs,macros:qs,power:rn,history:pn,version:bn,cameras:Dn,mesh:Wn,notifications:zn,announcements:Xn,wait:ri,gcodePreview:Si,timelapse:Fi,parts:Li,webcams:Hi,jobQueue:Vi,ourExtension:Qa},mutations:{},actions:{async reset({dispatch:e},t){r.ZP.$colorset.forceResetAll();const s=[],n=t||Object.keys(this.state);return n.forEach((t=>{this.hasModule(t)&&s.push(e(t+"/reset"))})),Promise.all(s)},async init({dispatch:e,commit:t},s){return ce.dispatch=e,t("version/setVersion",J.VERSION),t("version/setHash",J.HASH),t("socket/setApiConnected",s.apiConnected),[await e("config/initHost",s),await e("config/initLocal",s)]},void(e,t){i().debug("void action",t)}}});const Ja=async(e,t)=>{const s={data:{},apiConnected:!0,apiAuthenticated:!0};if(""!==e.apiUrl&&""!==e.socketUrl)try{const e=await ve.serverDatabaseItemGet(t);s.data=e.data.result.value,i().debug("loaded db",t,s.data)}catch(n){switch(us().isAxiosError(n)?n.response?.status:0){case 404:break;case 401:s.apiAuthenticated=!1;break;default:i().debug("API Down / Not Available:",n),s.apiConnected=!1;break}}else s.apiConnected=!1,s.apiAuthenticated=!1;return s},Ka=async(e,t)=>{let s=console;if(s.defaultError=console.error.bind(console),s.errors=[],console.error=function(){s.defaultError.apply(console,arguments),s.errors.push(Array.from(arguments))},s.defaultLog=console.log.bind(console),s.logs=[],console.log=function(){s.defaultLog.apply(console,arguments),s.logs.push(Array.from(arguments))},s.defaultWarn=console.warn.bind(console),s.warns=[],console.warn=function(){s.defaultWarn.apply(console,arguments),s.warns.push(Array.from(arguments))},s.defaultDebug=console.debug.bind(console),s.debugs=[],console.debug=function(){s.defaultDebug.apply(console,arguments),s.debugs.push(Array.from(arguments))},await za.dispatch("reset",void 0,{root:!0}),t||(t={blacklist:["fluidd.xyz","fluidd.net"],endpoints:[],hosted:!0,themePresets:[]}),!(J.LOCAL_INSTANCES_STORAGE_KEY in localStorage))for(const i of t.endpoints)e=r.ZP.$filters.getApiUrls(i),await za.dispatch("config/initLocal",{apiConfig:e});e||(e={apiUrl:"http://localhost:7125",socketUrl:"http://localhost:7125"}),e.apiUrl&&(ve.defaults.baseURL=e.apiUrl),await za.dispatch("config/onInitApiConfig",e),i().debug("inited apis",za.state.config,e),await za.dispatch("auth/initAuth");let n=!0,o=!0;for(const{NAMESPACE:r,ROOTS:a}of Object.values(J.MOONRAKER_DB)){if(!n&&!o)break;const t=await Ja(e,r);if(o=t.apiAuthenticated,n=t.apiConnected,!n||!o)break;const{data:s}=t,c=Object.values(a),l=c.map((async e=>{const t=e.name?s[e.name]:s;if(e.migrate_only)t&&za.dispatch(e.dispatch,t);else{if(!t)try{await ve.serverDatabaseItemPost(r,e.name,{})}catch(n){i().debug("Error creating database item",n)}await za.dispatch(e.dispatch,t||{})}}));await Promise.all(l)}return await za.dispatch("init",{apiConfig:e,hostConfig:t,apiConnected:n}),{apiConfig:e,hostConfig:t,apiConnected:n,apiAuthenticated:o}};class Ga{constructor(e){if((0,c.Z)(this,"logPrefix","[WEBSOCKET]"),(0,c.Z)(this,"colorList",{}),e.colorList)for(const t in e.colorList)if("base"in e.colorList[t]){const s=e.colorList[t],n=(0,Vt.ZP)(s.base).toHsl();let i=n.h,r=n.l;const o=n.s,a=s.hsplit||0,c=s.lsplit?s.lsplit/100:0;this.colorList[t]=[...Array(s.count).keys()].map((()=>{const e=(0,Vt.ZP)({h:i,s:o,l:r}).toHexString();return i+=a,r-=c,{color:e,used:!1}}))}else{const s=e.colorList[t];this.colorList[t]=s.map((e=>({color:e,used:!1})))}}next(e,t){if(void 0===this.colorList[e])return;const s=this.colorList[e].find((e=>e.name===t));if(s)return s.color;this.colorList[e].findIndex((e=>!e.used))>=0&&this.reset(e);for(const n of this.colorList[e])if(!n.used)return t&&(n.name=t),n.used=!0,n.color}reset(e,t=!1){void 0!==this.colorList[e]&&this.colorList[e].forEach((e=>{e.name&&!t||(e.used=!1,delete e.name)}))}resetAll(){for(const e in this.colorList)this.reset(e)}forceResetAll(){for(const e in this.colorList)this.reset(e,!0)}}const Va={install(e,t){const s={colorList:{heater:{base:"#ff5252",hsplit:20,count:3},bed:{base:"#1fb0ff",hsplit:20,count:2},fan:["#3DC25A","#58FC7C","#10EB40","#7EF297"],sensor:["#D67600","#830EE3","#B366F2","#E06573","#E38819"]}},n=new Ga({...s,...t});e.prototype.$colorset=n,e.$colorset=n}};var Ya=s(2039),qa=s(3476),Xa=s(6429);const $a=/((?:\.[A-Za-z~][A-Za-z0-9~]*)*)$/,ec=48,tc=57,sc=65,nc=90,ic=97,rc=122,oc=126,ac=e=>e>=ec&&e<=tc,cc=e=>e>=sc&&e<=nc||e>=ic&&e<=rc,lc=e=>{const t=[];for(let s=0;s<e.length;s++){const n=e.charCodeAt(s);t.push(255&n)}return t},uc=e=>e?ac(e)?0:cc(e)?e:e===oc?-2:e+256:-1,dc=(e,t)=>{const s=lc(e),n=lc(t),i=s.length,r=n.length;if(0===i||0===r)return i-r;let o=0,a=0;while(o<i&&a<r){let e=0;while(o<i&&!ac(s[o])||a<r&&!ac(n[a])){const e=uc(s[o]),t=uc(n[a]);if(e!==t)return e-t;o++,a++}while(o<i&&s[o]===ec)o++;while(a<r&&n[a]===ec)a++;while(o<i&&a<r&&ac(s[o])&&ac(n[a]))e||(e=s[o]-n[a]),o++,a++;if(o<i&&ac(s[o]))return 1;if(a<r&&ac(n[a]))return-1;if(e)return e}return 0},pc=(e,t)=>{if(e===t)return 0;const s=e.replace($a,""),n=t.replace($a,"");return s===n?dc(e,t):dc(s,n)};var mc=pc;const fc=(e,t,s)=>{const n=t.length-1;if(n<0)return void 0===e?s:e;for(let i=0;i<n;i++){if(null==e)return s;e=e[t[i]]}return null==e||void 0===e[t[n]]?s:e[t[n]]},hc=(e,t,s)=>null!=e&&t&&"string"===typeof t?void 0!==e[t]?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),fc(e,t.split("."),s)):s,gc={formatCounterTime:e=>{e=Number(e),!isNaN(+e)&&(0,Ya.Z)(e)||(e=0);let t=!1;e<0&&(e=Math.abs(e),t=!0);const s=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%3600%60);let r=i+"s";return r=n+"m "+r,s>0&&(r=s+"h "+r),t?"-"+r:r},getDateFormat:e=>({locale:Pt.locale,...V[e??za.state.config.uiSettings.general.dateFormat]}),getTimeFormat:e=>({locale:Pt.locale,...Y[e??za.state.config.uiSettings.general.timeFormat]}),formatDate:(e,t)=>{const s=new Date(e),n=gc.getDateFormat();return s.toLocaleDateString(n.locale,{...n.options,...t})},formatTime:(e,t)=>{const s=new Date(e),n=gc.getTimeFormat();return s.toLocaleTimeString(n.locale,{...n.options,...t})},formatTimeWithSeconds:(e,t)=>gc.formatTime(e,{second:"2-digit",...t}),formatDateTime:(e,t)=>{const s=new Date(e),n=gc.getTimeFormat(),i=gc.getDateFormat();return s.toLocaleDateString(i.locale,{...i.options,...n.options,...t})},formatRelativeTimeToNow(e,t){return gc.formatRelativeTimeToDate(e,Date.now(),t)},formatRelativeTimeToDate(e,t,s){let n=Math.floor(+new Date(e)/1e3),i=Math.floor(+new Date(t)/1e3);const r=[{unit:"second",limit:60},{unit:"minute",limit:60},{unit:"hour",limit:24},{unit:"day",limit:30},{unit:"month",limit:12},{unit:"year",limit:-1}];for(const{unit:o,limit:a}of r){if(-1===a||Math.abs(n-i)<a)return gc.formatRelativeTime(n-i,o,s);n=Math.floor(n/a),i=Math.floor(i/a)}},formatRelativeTime(e,t,s){const n=new Intl.RelativeTimeFormat(Pt.locale,{numeric:"auto",...s});return n.format(e,t)},formatAbsoluteDateTime:(e,t)=>gc.isToday(e)?gc.formatTime(e,t):gc.isThisYear(e)?gc.formatDateTime(e,{year:void 0,...t}):gc.formatDateTime(e,t),isToday:e=>{const t=new Date(e),s=new Date;return t.getDate()===s.getDate()&&t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()},isThisMonth:e=>{const t=new Date(e),s=new Date;return t.getMonth()===s.getMonth()&&t.getFullYear()===s.getFullYear()},isThisYear:e=>{const t=new Date(e),s=new Date;return t.getFullYear()===s.getFullYear()},camelCase:e=>(0,Ge.Z)(e),startCase:e=>(0,qa.Z)(e),capitalize:e=>(e=gc.camelCase(e),(0,Xa.Z)(e)),getReadableFileSizeString(e){let t=-1;const s=[" kB"," MB"," GB"," TB","PB","EB","ZB","YB"];if(0===e)return`0${s[0]}`;do{e/=1024,t++}while(e>1024);return Math.max(e,.1).toFixed(1)+s[t]},getReadableLengthString(e,t=!1){return e>=1e3?(e/1e3).toFixed(2)+" m":e>100?(e/10).toFixed(1)+" cm":e<.1&&t?(1e3*e).toFixed(0)+" μm":e.toFixed(1)+" mm"},getReadableWeightString(e){return e>=1e3?(e/1e3).toFixed(2)+" kg":e.toFixed(2)+" g"},getReadableFrequencyString(e){let t=0;const s=[" Hz"," KHz"," MHz"," GHz"];while(e>=1e3)e/=1e3,t++;return e.toFixed()+s[t]},fileSystemSort(e,t,s,n,i){if(null===t||!t.length)return e;const r=new Intl.Collator(n,{sensitivity:"accent",usage:"sort"});return e.sort(((e,n)=>{if("directory"===e.type&&(".."===e.dirname||"directory"!==n.type))return-1;if("directory"===n.type&&(".."===n.dirname||"directory"!==e.type))return 1;for(let o=0;o<t.length;o++){const a=t[o],c=[hc(e,a),hc(n,a)];if(c[0]===c[1])continue;if(s[o]&&c.reverse(),c.every((e=>"number"===typeof e&&!isNaN(e))))return c[0]-c[1];const l=c.map((e=>(e||"").toString()));if("numeric-prefix"===i){const[e,t]=l.map((e=>e.match(/^\d+/)));if(e&&t&&e[0]!==t[0])return Number(e[0])-Number(t[0])}else if("version"===i)return mc(l[0],l[1]);return r.compare(l[0],l[1])}return 0}))},getApiUrls(e){const t=new URL(e),s="https:"===t.protocol?"wss://":"ws://",n={apiUrl:`${t.protocol}//${t.host}`,socketUrl:`${s}${t.host}/websocket`};return n},isColorDark(e){const t=(0,Vt.ZP)(e).getBrightness();return t/255*100<=50}},yc={required(e){return""!==(e??"")||Pt.t("app.general.simple_form.error.required")},numberValid(e){return!isNaN(+(e??NaN))||Pt.t("app.general.simple_form.error.invalid_number")},numberGreaterThan(e){return t=>t>e||Pt.t("app.general.simple_form.error.min",{min:`> ${e}`})},numberGreaterThanOrEqual(e){return t=>t>=e||Pt.t("app.general.simple_form.error.min",{min:e})},numberGreaterThanOrEqualOrZero(e){return t=>0===+t||t>=e||Pt.t("app.general.simple_form.error.min_or_0",{min:e})},numberGreaterThanOrZero(e){return t=>0===+t||t>e||Pt.t("app.general.simple_form.error.min_or_0",{min:`> ${e}`})},numberLessThan(e){return t=>t<e||Pt.t("app.general.simple_form.error.max",{max:`< ${e}`})},numberLessThanOrEqual(e){return t=>t<=e||Pt.t("app.general.simple_form.error.max",{max:e})},numberLessThanOrEqualOrZero(e){return t=>0===+t||t<=e||Pt.t("app.general.simple_form.error.max",{max:e})},numberLessThanOrZero(e){return t=>0===+t||t<e||Pt.t("app.general.simple_form.error.max",{max:e})},lengthGreaterThanOrEqual(e){return t=>t.length>=e||Pt.t("app.general.simple_form.error.min",{min:e})},lengthLessThanOrEqual(e){return t=>t.length<=e||Pt.t("app.general.simple_form.error.max",{max:e})},numberArrayValid(e){return!e.some((e=>""===e||isNaN(+(e??NaN))))||Pt.t("app.general.simple_form.error.arrayofnums")},passwordNotEqualUsername(e){return t=>t.toLowerCase()!==(e??"").toLowerCase()||Pt.t("app.general.simple_form.error.password_username")},aspectRatioValid(e){return/^\d+\s*[:/]\s*\d+$/.test(e)||Pt.t("app.general.simple_form.error.invalid_aspect")},regExpPatternValid(e){try{return new RegExp(e),!0}catch(t){return Pt.t("app.general.simple_form.error.invalid_expression")}},regExpValid(e,t){return s=>e.test(s)||t||"Invalid"}},vc={install(e){e.prototype.$filters=gc,e.prototype.$rules=yc,e.prototype.$globals=J,e.prototype.$waits=K,e.$filters=gc,e.$rules=yc,e.$globals=J,e.$waits=K}},bc=e=>{const t=us().create({withAuth:!0,timeout:J.NETWORK_REQUEST_TIMEOUT});t.prototype.CancelToken=us().CancelToken,t.prototype.isCancel=us().isCancel;const s=["/access/login","/access/refresh_token"],n={400:["/access/login"],502:["/access/oneshot_token","/access/user"]},r=async t=>{if(t.headers||(t.headers={}),t.headers.Accept="application/json",t.headers["Content-Type"]="application/json","/access/refresh_jwt"!==t.url){const s=await e.dispatch("auth/checkToken");if(s){const s=await e.dispatch("auth/refreshTokens");s&&(t.headers.Authorization=`Bearer ${s}`)}}const n=t.url||"";return s.includes(n)&&(t.withAuth=!1),t},o=t=>{switch(t.status){case 200:e.state.config.apiUrl&&t.config.baseURL===e.state.config.apiUrl&&t.config.withAuth&&e.commit("auth/setAuthenticated",!0);break;default:}return t},a=t=>{let s;if(!t.response||"ERR_NETWORK"===t.code)return t.message&&(s=t.message),i().debug(s||"Network error"),Promise.reject(t);s="object"===typeof t.response.data?t.response.data.error?.message:t.response.data;const r=t.config.url||"";switch(t.response.status){case 500:i().debug(t.response.status,t.message,s),ze.$emit(s||"Server error",{type:Je.error});break;case 502:case 400:i().debug(t.response.status,t.message,s),n[t.response.status].includes(r)||ze.$emit(s||"Server error",{type:Je.error});break;case 401:t.config.withAuth&&e.dispatch("auth/logout");break;case 404:i().debug(t.response.status,t.message,s);break;default:i().debug(t.response.status,t.message),ze.$emit(s||"Server error",{type:Je.error})}return Promise.reject(t)};return t.interceptors.request.use(r,a),t.interceptors.response.use(o,a),t},Sc={install(e,t){const s=bc(t.store);e.prototype.$httpClient=s,e.$httpClient=s}};var wc=s(1645),Pc=s.n(wc);class _c{constructor(e){(0,c.Z)(this,"url",""),(0,c.Z)(this,"connection",null),(0,c.Z)(this,"reconnectEnabled",!1),(0,c.Z)(this,"reconnectInterval",1e3),(0,c.Z)(this,"allowedReconnectAttempts",3),(0,c.Z)(this,"reconnectCount",0),(0,c.Z)(this,"logPrefix","[WEBSOCKET]"),(0,c.Z)(this,"requests",[]),(0,c.Z)(this,"store",null),(0,c.Z)(this,"pingTimeout",void 0),(0,c.Z)(this,"cache",null),this.url=e.url,this.reconnectEnabled=e.reconnectEnabled||!1,this.reconnectInterval=e.reconnectInterval||1e3,this.store=e.store?e.store:null}pong(){clearTimeout(this.pingTimeout),this.store.state.socket.disconnecting||this.store.state.files.download||(this.store.commit("socket/setSocketOpen",!0),this.store.dispatch("socket/onSocketConnecting",!1)),this.pingTimeout=setTimeout((()=>{this.store.state.socket.disconnecting||this.store.state.files.download||(i().debug(`${this.logPrefix} Connection timeout, pong failed`),this.store&&this.store.commit("socket/setSocketOpen",!1),this.store&&this.store.dispatch("socket/onSocketConnecting",!0))}),J.SOCKET_PING_INTERVAL)}close(){this.connection&&(this.cache=null,this.connection.close(),this.reconnectCount=0)}async connect(e){e&&(this.url=e),this.cache=null,await ve.accessOneshotTokenGet().then((e=>e.data.result)).then((e=>{this.store&&this.store.dispatch("socket/onSocketConnecting",!0),this.connection=new WebSocket(`ws://localhost:7125/websocket?token=${e}`),this.connection.onopen=()=>{this.reconnectEnabled&&(this.reconnectCount=1),this.store&&(this.store.dispatch("socket/onSocketConnecting",!1),this.store.dispatch("socket/onSocketOpen",!0))},this.connection.onclose=e=>{i().debug(`${this.logPrefix} Connection closed:`,e),clearTimeout(this.pingTimeout),this.store&&this.store.dispatch("socket/onSocketClose",e),e.wasClean||this.reconnect()},this.connection.onerror=e=>{i().error(`${this.logPrefix} Connection error:`,e),this.store&&this.store.dispatch("socket/onSocketError",e)},this.connection.onmessage=e=>{const t=JSON.parse(e.data);let s;const n=this.requests.findIndex((e=>e.id===t.id));if(n>-1&&(s=this.requests[n],this.requests.splice(n,1)),this.store&&s&&s.wait&&s.wait.length&&this.store.commit("wait/setRemoveWait",s.wait),t.error)return s&&Object.defineProperty(t.error,"__request__",{enumerable:!1,value:s}),i().debug(`${this.logPrefix} Response error:`,t.error),void(this.store&&(this.store.dispatch("socket/onSocketError",t.error),this.store.dispatch("ourExtension/layoutsData/alerts/onSocketError",t.error)));if(this.pong(),s){let e=t.result?t.result:t.params;"string"===typeof e&&(e={result:e}),Object.defineProperty(e,"__request__",{enumerable:!1,value:s}),i().debug(`${this.logPrefix} RESPONSE for id: ${s.id}:`,e),s.dispatch&&this.store&&this.store?.dispatch(s.dispatch,e),s.commit&&this.store&&this.store?.commit(s.commit,e)}else if(t.params&&t.params[0]){const[e,s]=t.params;if("notify_status_update"!==t.method)"socket/"+(0,Ge.Z)(t.method)!=="socket/notifyProcStatUpdate"&&console.log("socket/"+(0,Ge.Z)(t.method),e),this.store&&this.store.dispatch("socket/"+(0,Ge.Z)(t.method),e);else{for(const t of["motion_report"])this.store&&t in e&&(this.store.dispatch("printer/onFastNotifyStatusUpdate",{key:t,payload:e[t]},{root:!0}),delete e[t]);const n=s?1e3*s:Date.now();this.cache=this.cache?{timestamp:this.cache.timestamp,params:Pc()(this.cache.params,e,{arrayMerge:(e,t)=>t})}:{timestamp:n,params:e},n-this.cache.timestamp>=1e3&&(this.store&&this.store.dispatch("socket/"+(0,Ge.Z)(t.method),this.cache.params),this.cache={timestamp:n,params:{}})}}else this.store&&this.store.dispatch("socket/"+(0,Ge.Z)(t.method))}})).catch((e=>{401!==e.response?.status&&this.reconnect()}))}reconnect(){this.reconnectCount<=this.allowedReconnectAttempts?(this.reconnectCount+=1,this.connection=null,i().debug(`${this.logPrefix} Reconnecting in ${this.reconnectInterval}`),setTimeout((()=>{this.connect()}),this.reconnectInterval)):this.store&&this.store.dispatch("socket/onSocketConnecting",!1)}emit(e,t){if(this.store.state.socket.disconnecting||this.store.state.socket.connecting)return i().debug(`${this.logPrefix} Socket emit denied, in disconnecting state:`,e,t),void console.log(`${this.logPrefix} Socket emit denied, in disconnecting state:`,e,t);if(this.connection?.readyState===WebSocket.OPEN){const s=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,n=s(1e4,99999),r={id:n,method:e,jsonrpc:"2.0"},o={id:n};t&&t.wait&&(o.wait=t.wait,this.store&&this.store.dispatch("wait/addWait",t.wait)),t&&t.params&&(r.params=t.params,o.params=t.params),t&&t.dispatch&&(o.dispatch=t.dispatch),t&&t.commit&&(o.commit=t.commit),this.requests.push(o),this.connection.send(JSON.stringify(r)),i().debug(`${this.logPrefix} Request with id: ${r.id}, method: "${r.method}"`,r)}else i().debug(`${this.logPrefix} Not ready, or closed.`,e,t,this.connection?.readyState)}}const Cc={install(e,t){const s=new _c(t);e.prototype.$socket=s,e.$socket=s}};var Ac=s(2241),xc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"file-select-window"},[e._m(0),e.absolutelyEmpty?t("div",{staticClass:"files-not-found"},[t("span",[e._v("Файлов не найдено")])]):t("div",{staticClass:"files-wrapper"},[e.isDirectorySelected?t("button",{staticClass:"upper-folder",on:{touchstart:e.openPreviousDirectory}},[e._m(1),t("hr")]):e._e(),t("div",{staticClass:"files-list"},[e._l(e.directoryList,(function(e,s){return t("FolderButton",{key:s,attrs:{directoryData:e}})})),e._l(e.fileList,(function(e,s){return t("FileButton",{key:-s-1,attrs:{fileData:e}})}))],2)]),t("div",{staticClass:"control-buttons"},[t("button",{staticClass:"control-button info",class:{active:e.buttonsState.firstButton},on:{touchstart:function(t){return e.touchStartHandler(t,"firstButton")},touchend:function(t){return e.touchEndHandler("firstButton")}}},[e._m(2),t("span",[e._v("Информация о файле")])]),t("button",{staticClass:"control-button profiles",class:{active:e.buttonsState.secondButton},on:{touchstart:function(t){return e.touchStartHandler(t,"secondButton")},touchend:function(t){return e.touchEndHandler("secondButton")}}},[e._m(3),t("span",[e._v("Режимы наплавки")])]),t("button",{staticClass:"control-button preprint",class:{active:e.buttonsState.thirdButton},on:{touchstart:function(t){return e.touchStartHandler(t,"thirdButton")},touchend:function(t){return e.touchEndHandler("thirdButton")}}},[e._m(4),t("span",[e._v("Допечатная подготовка")])]),t("button",{staticClass:"control-button revert select",class:{active:e.buttonsState.fourthButton},on:{touchstart:function(t){return e.touchStartHandler(t,"fourthButton")},touchend:function(t){return e.touchEndHandler("fourthButton")}}},[t("span",[e._v("Выбор")]),e._m(5)]),t("button",{staticClass:"control-button revert cancel",class:{active:e.buttonsState.fifthButton},on:{touchstart:function(t){return e.touchStartHandler(t,"fifthButton")},touchend:function(t){return e.touchEndHandler("fifthButton")}}},[t("span",[e._v("Отмена")]),e._m(6)]),t("button",{staticClass:"control-button revert menu",class:{active:e.buttonsState.sixthButton},on:{touchstart:function(t){return e.touchStartHandler(t,"sixthButton")},touchend:function(t){return e.touchEndHandler("sixthButton")}}},[t("span",[e._v("Главное меню")]),e._m(7)])])])},kc=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"header"},[t("div",{staticClass:"a-icon"},[e._v("a")]),t("span",[e._v("Прокрутка файлов")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"description"},[t("img",{attrs:{src:s(8731),alt:""}}),t("span",[e._v("..")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(602),alt:""}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(7696),alt:""}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(2300),alt:""}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(1643),alt:""}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(1335),alt:""}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(1265),alt:""}})])}],Fc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("button",{staticClass:"file-union-button",class:{active:e.fileData.isSelected},on:{touchstart:e.touchStartHandler}},[e.fileData.isSelected?t("div",{staticClass:"wrapper"},[t("div",{staticClass:"description"},[t("img",{attrs:{src:s(8135),alt:""}}),t("span",{staticClass:"name"},[e._v(e._s(e.fileData.name))]),t("div",{staticClass:"meta-info"},[t("span",{staticClass:"date"},[e._v("Дата: "+e._s(e.fileData.modified))]),t("span",{staticClass:"size"},[e._v("Размер: "+e._s(e.fileData.computedSize))]),t("span",{staticClass:"print-time"},[e._v("Время печати: "+e._s(e.fileData.printingTime))])])]),t("hr")]):t("div",{staticClass:"wrapper"},[t("div",{staticClass:"description"},[t("img",{attrs:{src:s(5150),alt:""}}),t("span",{staticClass:"name"},[e._v(e._s(e.fileData.name))])]),t("hr")])])},Ec=[],Dc=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let Oc=class extends l.w3{constructor(...e){super(...e),(0,c.Z)(this,"fileData",void 0)}chooseFile(){this.$store.commit("ourExtension/layoutsData/newFileBrowseWindow/deactivateFiles"),this.fileData.isSelected=!0}touchStartHandler(){this.$store.commit("ourExtension/layoutsData/newFileBrowseWindow/deactivateFiles"),this.fileData.isSelected=!0}};Dc([(0,l.fI)()],Oc.prototype,"fileData",void 0),Oc=Dc([(0,l.wA)({})],Oc);var Bc=Oc,Rc=Bc,Ic=(0,g.Z)(Rc,Fc,Ec,!1,null,null,null),Lc=Ic.exports,Tc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("button",{staticClass:"file-union-button",class:{active:e.directoryData.isSelected},on:{touchstart:e.touchStartHandler}},[e.directoryData.isSelected?t("div",{staticClass:"wrapper"},[t("div",{staticClass:"description"},[t("img",{attrs:{src:s(8135),alt:""}}),t("span",{staticClass:"name"},[e._v(e._s(e.directoryData.name))]),t("div",{staticClass:"meta-info"},[t("span",{staticClass:"date"},[e._v("Дата: "+e._s(e.directoryData.modified))]),t("span",{staticClass:"size"},[e._v("Размер: "+e._s(e.directoryData.computedSize))])])]),t("hr")]):t("div",{staticClass:"wrapper"},[t("div",{staticClass:"description"},[t("img",{attrs:{src:s(9675),alt:""}}),t("span",{staticClass:"name"},[e._v(e._s(e.directoryData.name))])]),t("hr")])])},Mc=[],Wc=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let Nc=class extends l.w3{constructor(...e){super(...e),(0,c.Z)(this,"directoryData",void 0)}get currentPath(){return this.$store.getters["ourExtension/layoutsData/newFileBrowseWindow/getCurrentPath"]}touchStartHandler(){this.$store.commit("ourExtension/layoutsData/newFileBrowseWindow/deactivateFiles"),this.directoryData.isSelected=!0}};Wc([(0,l.fI)()],Nc.prototype,"directoryData",void 0),Nc=Wc([(0,l.wA)({})],Nc);var Uc=Nc,jc=Uc,Hc=(0,g.Z)(jc,Tc,Mc,!1,null,null,null),Zc=Hc.exports,Qc=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let zc=class extends((0,l.Wr)(ie,de,we,Ie)){constructor(...e){super(...e),(0,c.Z)(this,"buttonsState",{firstButton:!1,secondButton:!1,thirdButton:!1,fourthButton:!1,fifthButton:!1,sixthButton:!1})}get absolutelyEmpty(){return!this.isDirectorySelected&&!Boolean(this.fileList)&&!Boolean(this.directoryList)}get fileList(){return this.$store.getters["ourExtension/layoutsData/newFileBrowseWindow/getFileList"]()}get directoryList(){return this.$store.getters["ourExtension/layoutsData/newFileBrowseWindow/getDirectoryList"]}get isDirectorySelected(){return""!==this.currentPath&&"gcodes"!==this.currentPath}get selectedDirectory(){return this.$store.getters["ourExtension/layoutsData/newFileBrowseWindow/getUsualSelectedDirectory"]}get selectedFile(){return this.$store.getters["ourExtension/layoutsData/newFileBrowseWindow/getUsualSelectedFile"]}get currentPath(){return this.$store.getters["ourExtension/layoutsData/newFileBrowseWindow/getCurrentPath"]}mounted(){this.deactivateFiles()}beforeDestroy(){this.deactivateFiles(),this.setAllButtonsPressed(!1)}deactivateFiles(){this.$store.commit("ourExtension/layoutsData/newFileBrowseWindow/deactivateFiles")}touchStartHandler(e,t){if(t in this.buttonsState){this.setAllButtonsPressed(!1);const s=this.buttonsState;s[t]=!0,e.cancelable&&(e.preventDefault(),e.stopPropagation()),this.resolveButtonClick(t)}}resolveButtonClick(e){switch(e){case"fourthButton":return void this.selectButtonClick();case"fifthButton":return;default:return}}touchEndHandler(e){if(e in this.buttonsState){const t=this.buttonsState;t[e]=!1}}selectButtonClick(){const e=this.selectedFile,t=this.selectedDirectory;if(e)return void this.tryToStartPrint();if(t){this.$store.commit("ourExtension/layoutsData/newFileBrowseWindow/deactivateFiles");const e=this.currentPath+"/"+t.name;return void this.$store.dispatch("ourExtension/layoutsData/newFileBrowseWindow/setCurrentPath",e)}const s={message:"Ничего не выбрано",type:"red"};ce.showInfoAlert(s)}tryToStartPrint(){if(this.printerPrinting||this.printerPaused){const e={message:"Принтер уже печатает. Открыто окно текущей печати",type:"ok"};return this.$store.dispatch("ourExtension/layoutsData/alerts/addToAlertQueue",e),this.initExisitingPrintingWindow(),void this.$router.push("/print")}this.startNewPrint()}fileMustBeSelectedAlert(){const e={message:"Ничего не выбрано",type:"red"};ce.showInfoAlert(e)}startNewPrint(){const e=this.selectedFile;if(e){let t;this.$store.commit("ourExtension/files/setSelectedFile",e);let s=this.$store.getters["ourExtension/profiles/getLastPrintingProfile"]();s||(s=oe.getProfileMock()),t={profile:JSON.parse(JSON.stringify(s)),allLayersFlag:!0,firstLayer:null,lastLayer:null},this.printFile(t,e)}else this.fileMustBeSelectedAlert()}async printFile(e,t){this.initNewPrintingWindow(e,t),this.$router.push("/print")}openPreviousDirectory(){this.$store.commit("ourExtension/layoutsData/newFileBrowseWindow/deactivateFiles");const e=this.currentPath.lastIndexOf("/");if(-1!=e){const t=this.currentPath.slice(0,e);this.$store.dispatch("ourExtension/layoutsData/newFileBrowseWindow/setCurrentPath",t)}}gpioButtonDownEventHandler(e){if(e in this.buttonsState){const t=this.buttonsState;t[e]=!0}}gpioButtonUpEventHandler(e,t=!0){if(e in this.buttonsState){const s=this.buttonsState;s[e]=!1,t&&this.resolveButtonClick(e)}}firstButtonWather(e,t){const s=this.isFirstButtonPressed;s?this.gpioButtonDownEventHandler("firstButton"):this.buttonsInterrups.firstButton?this.gpioButtonUpEventHandler("firstButton",!1):this.gpioButtonUpEventHandler("firstButton")}secondButtonWather(e,t){const s=this.isSecondButtonPressed;s?this.gpioButtonDownEventHandler("secondButton"):s?this.gpioButtonUpEventHandler("secondButton"):this.buttonsInterrups.secondButton?this.gpioButtonUpEventHandler("secondButton",!1):this.gpioButtonUpEventHandler("secondButton")}thirdButtonWather(e,t){const s=this.isThirdButtonPressed;s?this.gpioButtonDownEventHandler("thirdButton"):this.buttonsInterrups.thirdButton?this.gpioButtonUpEventHandler("thirdButton",!1):this.gpioButtonUpEventHandler("thirdButton")}fourthButtonWather(e,t){const s=this.isFourthButtonPressed;s?this.gpioButtonDownEventHandler("fourthButton"):this.buttonsInterrups.fourthButton?this.gpioButtonUpEventHandler("fourthButton",!1):this.gpioButtonUpEventHandler("fourthButton")}fifthButtonWather(e,t){const s=this.isFifthButtonPressed;s?this.gpioButtonDownEventHandler("fifthButton"):this.buttonsInterrups.fifthButton?this.gpioButtonUpEventHandler("fifthButton",!1):this.gpioButtonUpEventHandler("fifthButton")}sixthButtonWather(e,t){const s=this.isSixthButtonPressed;s?this.gpioButtonDownEventHandler("sixthButton"):this.buttonsInterrups.sixthButton?this.gpioButtonUpEventHandler("sixthButton",!1):this.gpioButtonUpEventHandler("sixthButton")}encoder1Watcher(){console.log(this.encoder1State.emited)}};Qc([(0,l.RL)("isFirstButtonPressed")],zc.prototype,"firstButtonWather",null),Qc([(0,l.RL)("isSecondButtonPressed")],zc.prototype,"secondButtonWather",null),Qc([(0,l.RL)("isThirdButtonPressed")],zc.prototype,"thirdButtonWather",null),Qc([(0,l.RL)("isFourthButtonPressed")],zc.prototype,"fourthButtonWather",null),Qc([(0,l.RL)("isFifthButtonPressed")],zc.prototype,"fifthButtonWather",null),Qc([(0,l.RL)("isSixthButtonPressed")],zc.prototype,"sixthButtonWather",null),Qc([(0,l.RL)("encoder1State")],zc.prototype,"encoder1Watcher",null),zc=Qc([(0,l.wA)({components:{FileButton:Lc,FolderButton:Zc}})],zc);var Jc=zc,Kc=Jc,Gc=(0,g.Z)(Kc,xc,kc,!1,null,null,null),Vc=Gc.exports,Yc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"print-window"},[e.pause?e._e():t("div",{staticClass:"green-indicator"}),e.pause?t("div",{staticClass:"red-indicator"}):e._e(),t("div",{staticClass:"header"},[t("div",{staticClass:"time-and-operation"},[t("div",{staticClass:"time-holder",on:{click:function(t){return e.$router.go(-1)}}},[e._v(e._s(e.actualTime))]),t("div",{staticClass:"operation-container"},[e._v(e._s(e.localPrinterState)+"...")])]),t("div",{staticClass:"warnings-container"},[e.warningFlag?t("span",[e._v("WARNING")]):e._e(),e.noGasFlag?t("span",[e._v("NO GAS")]):e._e()])]),t("div",{staticClass:"center"},[t("div",{staticClass:"rejim"},[t("span",[e._v("Параметры режима: ")]),t("span",[e._v(e._s(e.printingDiapason.profile.name))])]),t("div",{staticClass:"print-params-buttons"},[t("div",{staticClass:"colorful-buttons"},[t("button",{staticClass:"parameter-button with-icon"},[e._m(0),t("div",{staticClass:"button-info"},[t("span",[e._v(e._s(e.current))]),t("div",{staticClass:"underline"}),t("span",[e._v("Ток, А")])])]),t("button",{staticClass:"parameter-button with-icon"},[e._m(1),t("div",{staticClass:"button-info"},[t("span",[e._v(e._s(e.voltage))]),t("div",{staticClass:"underline"}),t("span",[e._v("Напряжение, В")])])]),t("button",{staticClass:"parameter-button"},[t("span",[e._v(e._s(e.feedRate))]),t("div",{staticClass:"underline"}),t("span",[e._v("V подачи, м/мин")])])]),t("span",{staticClass:"print-params-span"},[e._v("Параметры печати:")]),t("div",{staticClass:"usual-buttons"},[t("button",{staticClass:"parameter-button"},[e._m(2),t("span",[e._v("Тип: "+e._s(e.oscillationType))])]),t("button",{staticClass:"parameter-button"},[t("span",[e._v(e._s(e.weldingSpeed))]),t("span",[e._v("V печати, м/мин")])]),t("button",{staticClass:"parameter-button"},[t("span",[e._v(e._s(e.shift))]),t("span",[e._v("Сдвиг Z, мм")])])])]),t("div",{staticClass:"control-prints"},[e._m(3),e._m(4),t("div",{staticClass:"control-print img layers"},[t("span",[e._v("Слои: "+e._s(e.printLayer)+"/"+e._s(e.file.layers))]),t("img",{attrs:{src:s(4954),alt:""}})]),e._m(5)])]),t("div",{staticClass:"control-buttons"},[e.isPrinting?t("CircleBar"):e._e(),e.isPrinting?e._e():t("button",{staticClass:"control-button move",class:{active:e.buttonsState.firstButton},on:{touchstart:function(t){return e.touchStartHandler(t,"firstButton")},touchend:function(t){return e.touchEndHandler("firstButton")}}},[e._m(6),t("span",[e._v("Перемещение")])]),e.isPrinting?e._e():t("button",{staticClass:"control-button layer-settings",class:{active:e.buttonsState.secondButton},on:{touchstart:function(t){return e.touchStartHandler(t,"secondButton")},touchend:function(t){return e.touchEndHandler("secondButton")}}},[e._m(7),t("span",[e._v("Параметры слоя")])]),e.isPrinting?e._e():t("button",{staticClass:"control-button settings",class:{active:e.buttonsState.thirdButton},on:{touchstart:function(t){return e.touchStartHandler(t,"thirdButton")},touchend:function(t){return e.touchEndHandler("thirdButton")}}},[e._m(8),t("span",[e._v("Настройки")])]),t("button",{staticClass:"control-button revert shift-plus",class:{active:e.buttonsState.fourthButton},on:{touchstart:function(t){return e.touchStartHandler(t,"fourthButton")},touchend:function(t){return e.touchEndHandler("fourthButton")}}},[t("span",[e._v("Сдвиг +")]),e._m(9)]),t("button",{staticClass:"control-button revert shift-minus",class:{active:e.buttonsState.fifthButton},on:{touchstart:function(t){return e.touchStartHandler(t,"fifthButton")},touchend:function(t){return e.touchEndHandler("fifthButton")}}},[t("span",[e._v("Сдвиг -")]),e._m(10)]),t("button",{staticClass:"control-button revert arc",class:{active:e.buttonsState.sixthButton},on:{touchstart:function(t){return e.touchStartHandler(t,"sixthButton")},touchend:function(t){return e.touchEndHandler("sixthButton")}}},[t("span",[e._v("Дуга неизвестна")]),e._m(11)])],1),e.isPrinting?e._e():t("div",{staticClass:"footer"},[t("div",{staticClass:"file-info"},[t("div",{staticClass:"filename"},[t("img",{attrs:{src:s(5206),alt:""}}),t("span",[e._v(e._s(e.fileName))])]),t("div",{staticClass:"progress"},[t("img",{attrs:{src:s(9986),alt:""}}),t("span",[e._v("Прогресс: "+e._s(e.printProgress)+"%")])])]),t("div",{staticClass:"progress-bar-wrapper"},[t("img",{attrs:{src:s(5493),alt:""}}),t("ProgressBar")],1)]),e.isPrinting?t("div",{staticClass:"only-filename"},[t("img",{attrs:{src:s(192),alt:""}}),t("span",[e._v(e._s(e.fileName))])]):e._e()])},qc=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"icon-wrapper"},[t("div",{staticClass:"a-icon"},[e._v("a")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"icon-wrapper"},[t("div",{staticClass:"b-icon"},[e._v("b")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(3591),width:"105",height:"1"}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"control-print current"},[t("div",{staticClass:"a-icon"},[e._v("a")]),t("span",[e._v("Ток источника")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"control-print voltage"},[t("div",{staticClass:"b-icon"},[e._v("b")]),t("span",[e._v("Напряжение источника")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"control-print img heigth"},[t("span",[e._v("Высота, мм: 846")]),t("img",{attrs:{src:s(2880),alt:""}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(1394),alt:""}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(7194),alt:""}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(2437),alt:""}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(157),alt:""}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(9004),alt:""}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(9219),alt:""}})])}],Xc=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"progress-wrapper"},[t("div",{ref:"progressBar",staticClass:"progress"})])},$c=[],el=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let tl=class extends l.w3{mounted(){setTimeout((()=>{const e=this.printProgress,t=this.$refs.progressBar;t&&this.setProgressBarPercent(e,t)}),100)}get printProgress(){let e=this.$store.getters["printer/getPrintProgress"];e=+(100*e).toFixed(0);const t=this.$refs.progressBar;return t&&this.setProgressBarPercent(e,t),e}setProgressBarPercent(e,t){t.style.width=`${e}%`}};tl=el([(0,l.wA)({components:{}})],tl);var sl=tl,nl=sl,il=(0,g.Z)(nl,Xc,$c,!1,null,null,null),rl=il.exports,ol=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"big-round-button-wrapper"},[t("button",{staticClass:"big-round-button"},[t("span",{staticClass:"percent"},[e._v(e._s(e.printProgress)+"%")]),t("svg",[t("defs",[t("linearGradient",{attrs:{id:"grad1"}},[t("stop",{attrs:{offset:"0%","stop-color":"rgba(0, 178, 202, 1)"}}),t("stop",{attrs:{offset:"100%","stop-color":"rgba(4, 112, 200, 1)","stop-opacity":"1"}})],1)],1),t("circle",{ref:"circleBar",attrs:{transform:"rotate(-90 176 176)","stroke-dasharray":"423.9 518.1",cx:"176",cy:"176",r:"150",stroke:"url(#grad1)","stroke-width":"7px",fill:"transparent"}})])])])},al=[],cl=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let ll=class extends l.w3{mounted(){const e=this.printProgress,t=this.$refs.circleBar;t&&this.setPercent(e,t)}get printProgress(){let e=this.$store.getters["printer/getPrintProgress"];e=+(100*e).toFixed(0);const t=this.$refs.circleBar;return t&&this.setPercent(e,t),e}setPercent(e,t){const s=2*Math.PI*130,n=s*e/100,i=s-n;t.style.strokeDasharray=`${n} ${i}`}};ll=cl([(0,l.wA)({components:{}})],ll);var ul=ll,dl=ul,pl=(0,g.Z)(dl,ol,al,!1,null,null,null),ml=pl.exports,fl=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let hl=class extends((0,l.Wr)(de,ie,Ie)){constructor(...e){super(...e),(0,c.Z)(this,"warningFlag",!1),(0,c.Z)(this,"noGasFlag",!1),(0,c.Z)(this,"processingSetter",""),(0,c.Z)(this,"buttonsState",{firstButton:!1,secondButton:!1,thirdButton:!1,fourthButton:!1,fifthButton:!1,sixthButton:!1})}mounted(){setTimeout((()=>{this.setPrintProgress()}),100)}beforeDestroy(){this.setAllButtonsPressed(!1)}setPrintProgress(){const e=this.printProgress,t=this.$refs.circleBar,s=this.$refs.progressBar;t&&this.setPercent(e,t),s&&this.setProgressBarPercent(e,s)}setProgressBarPercent(e,t){t.style.width=`${e}%`}setPercent(e,t){const s=2*Math.PI*130,n=s*e/100,i=s-n;t.style.strokeDasharray=`${n} ${i}`}touchStartHandler(e,t){if(t in this.buttonsState){this.setAllButtonsPressed(!1);const s=this.buttonsState;s[t]=!0,e.cancelable&&(e.preventDefault(),e.stopPropagation()),this.resolveButtonClick(t)}}resolveButtonClick(e){switch(e){case"fourthButton":return void this.shiftPlus();case"fifthButton":return void this.shiftMinus();default:return}}shiftPlus(){this.shift=+(this.shift+.1).toFixed(1)}shiftMinus(){this.shift=+(this.shift-.1).toFixed(1)}touchEndHandler(e){if(e in this.buttonsState){const t=this.buttonsState;t[e]=!1}}currentPlus(){this.current=+(this.current+1).toFixed(1)}currentMinus(){this.current=+(this.current-1).toFixed(1)}voltagePlus(){this.voltage=+(this.voltage+1).toFixed(1)}voltageMinus(){this.voltage=+(this.voltage-1).toFixed(1)}get actualTime(){return this.$store.getters["ourExtension/layoutsData/baseLayout/getActualTime"]()}get isPrinting(){return"printing"===this.printerState.toLowerCase()}get pause(){return"paused"===this.printerState.toLowerCase()}get printProgress(){let e=this.$store.getters["printer/getPrintProgress"];e=+(100*e).toFixed(0);const t=this.$refs.circleBar;t&&this.setPercent(e,t);const s=this.$refs.progressBar;return s&&this.setProgressBarPercent(e,s),e}get printLayer(){return this.$store.getters["printer/getPrintLayer"]}get localPrinterState(){switch(this.printerState.toLowerCase()){case"loading":return"Загрузка";case"printing":return"Печатается";case"paused":return"Приостановлено";case"busy":return"Принтер занят";case"cancelled":return"Отменено";case"ready":return"Готов к печати";case"idle":return"Бездействует";default:break}return this.printerState.toLowerCase()}get file(){return this.$store.getters["ourExtension/layoutsData/printingWindow/getFile"]()}get fileName(){let e=this.file.name;return e.length>30&&(e=e.slice(0,30)+"..."),e}get printSettingsFLag(){return this.$store.getters["ourExtension/windowFlags/getPrintSettingsWindowFlag"]}get printingDiapason(){return this.$store.getters["ourExtension/layoutsData/printingWindow/getPrintingDiapason"]()}get current(){return this.printingDiapason.profile.profileMainParameters.current}set current(e){this.printingDiapason.profile.profileMainParameters.current=e}get voltage(){return this.printingDiapason.profile.profileMainParameters.voltage}set voltage(e){this.printingDiapason.profile.profileMainParameters.voltage=e}get feedRate(){return this.printingDiapason.profile.profileMainParameters.feedRate}set feedRate(e){this.printingDiapason.profile.profileMainParameters.feedRate=e}get oscillationType(){return this.printingDiapason.profile.profileOscilationParameters.type}set oscillationType(e){this.printingDiapason.profile.profileOscilationParameters.type=e}get weldingSpeed(){return this.printingDiapason.profile.profileAdditionalParameters.weldingSpeed}set weldingSpeed(e){this.printingDiapason.profile.profileAdditionalParameters.weldingSpeed=e}get shift(){return this.$store.getters["ourExtension/layoutsData/printingWindow/getShift"]}set shift(e){this.$store.state.ourExtension.layoutsData.printingWindow.shift=e}get profilesMetadata(){return this.$store.getters["ourExtension/profiles/getProfilesMetadata"]}round(e){return Math.round(10*+e)/10}openPrintSettings(){this.$store.dispatch("ourExtension/windowFlags/openPrintSettingsWindow")}parameterClickHandler(e,t,s){let n=!0;this.processingSetter=t;let i=0;if(t in this){const e=this;i=e[t]}const r=this.newValueReceiver.bind(this);s/s!==1&&(n=!1),this.openInputWindow(!1,e,i,s,"void",r,2e3,-2e3,n,"")}newValueReceiver(e){if(this.processingSetter in this){const t=this;t[this.processingSetter]=e}this.processingSetter=""}listClickHandler(e){let t=[];const s=this.newStringValueReceiver.bind(this);"oscillationType"===e&&(t=this.profilesMetadata.oscilationTypes),this.processingSetter=e,this.openSelectWindowWithoutIcon(s,t)}newStringValueReceiver(e){if(this.processingSetter in this){const t=this;t[this.processingSetter]=e}this.processingSetter=""}bigButtonHandler(){this.printerAllowedToStartPrint?(this.startPrintAlert(),this.startPrint(this.file)):"printing"!==this.printerState.toLowerCase()?(this.pauseAlert(),this.pausePrint()):(this.resumeAlert(),this.resumePrint())}clickHandler(e){switch(e){case"resume":"ready"===this.printerState.toLowerCase()||"idle"===this.printerState.toLowerCase()||"cancelled"===this.printerState.toLowerCase()?(this.startPrintAlert(),this.startPrint(this.file)):"printing"!==this.printerState.toLowerCase()&&(this.resumeAlert(),this.resumePrint());break;case"pause":"paused"!==this.printerState.toLowerCase()&&(this.pauseAlert(),this.pausePrint());break;default:break}}startPrint(e){X.printerPrintStart(e.pathForMoonraker)}resumeAlert(){const e={message:"Запрошено возобновление печати",type:"green"};ce.showInfoAlert(e)}startPrintAlert(){const e={message:`Запрошено начало печати файла: ${this.file.pathForMoonraker}`,type:"green"};ce.showInfoAlert(e)}pausePrint(){X.printerPrintPause(),this.addConsoleEntry("PAUSE")}pauseAlert(){const e={message:"Запрошена пауза",type:"green"};ce.showInfoAlert(e)}resumePrint(){X.printerPrintResume(),this.addConsoleEntry("RESUME")}resetFile(){this.sendGcode("SDCARD_RESET_FILE")}throwCancelPrintRequest(){if(this.printerPaused||this.printerPrinting){const e=this.cancelPrint.bind(this),t={header:"ВНИМАНИЕ!",message:"Принтер печатает/готовится печатать. Отменить печать?",type:"yes_no",confirmCallback:e};this.$store.dispatch("ourExtension/layoutsData/alerts/addToAlertQueue",t)}else{const e={message:"Принтер не печатает",time:1500,type:"red"};ce.showInfoAlert(e)}}cancelPrint(){this.cancelPrintAlert(),X.printerPrintCancel(),this.addConsoleEntry("CANCEL_PRINT")}cancelPrintAlert(){const e={message:"Запрошена отмена печати",type:"red"};ce.showInfoAlert(e)}gpioButtonDownEventHandler(e){if(e in this.buttonsState){const t=this.buttonsState;t[e]=!0}}gpioButtonUpEventHandler(e,t=!0){if(e in this.buttonsState){const s=this.buttonsState;s[e]=!1,t&&this.resolveButtonClick(e)}}firstButtonWather(e,t){const s=this.isFirstButtonPressed;s?this.gpioButtonDownEventHandler("firstButton"):this.buttonsInterrups.firstButton?this.gpioButtonUpEventHandler("firstButton",!1):this.gpioButtonUpEventHandler("firstButton")}secondButtonWather(e,t){const s=this.isSecondButtonPressed;s?this.gpioButtonDownEventHandler("secondButton"):s?this.gpioButtonUpEventHandler("secondButton"):this.buttonsInterrups.secondButton?this.gpioButtonUpEventHandler("secondButton",!1):this.gpioButtonUpEventHandler("secondButton")}thirdButtonWather(e,t){const s=this.isThirdButtonPressed;s?this.gpioButtonDownEventHandler("thirdButton"):this.buttonsInterrups.thirdButton?this.gpioButtonUpEventHandler("thirdButton",!1):this.gpioButtonUpEventHandler("thirdButton")}fourthButtonWather(e,t){const s=this.isFourthButtonPressed;s?this.gpioButtonDownEventHandler("fourthButton"):this.buttonsInterrups.fourthButton?this.gpioButtonUpEventHandler("fourthButton",!1):this.gpioButtonUpEventHandler("fourthButton")}fifthButtonWather(e,t){const s=this.isFifthButtonPressed;s?this.gpioButtonDownEventHandler("fifthButton"):this.buttonsInterrups.fifthButton?this.gpioButtonUpEventHandler("fifthButton",!1):this.gpioButtonUpEventHandler("fifthButton")}sixthButtonWather(e,t){const s=this.isSixthButtonPressed;s?this.gpioButtonDownEventHandler("sixthButton"):this.buttonsInterrups.sixthButton?this.gpioButtonUpEventHandler("sixthButton",!1):this.gpioButtonUpEventHandler("sixthButton")}encoder1Watcher(){this.encoder1State.emited&&(this.encoder1State.isClockwise?this.currentPlus():this.currentMinus())}encoder2Watcher(){this.encoder2State.emited&&(this.encoder2State.isClockwise?this.voltagePlus():this.voltageMinus())}};fl([(0,l.RL)("isFirstButtonPressed")],hl.prototype,"firstButtonWather",null),fl([(0,l.RL)("isSecondButtonPressed")],hl.prototype,"secondButtonWather",null),fl([(0,l.RL)("isThirdButtonPressed")],hl.prototype,"thirdButtonWather",null),fl([(0,l.RL)("isFourthButtonPressed")],hl.prototype,"fourthButtonWather",null),fl([(0,l.RL)("isFifthButtonPressed")],hl.prototype,"fifthButtonWather",null),fl([(0,l.RL)("isSixthButtonPressed")],hl.prototype,"sixthButtonWather",null),fl([(0,l.RL)("encoder1State")],hl.prototype,"encoder1Watcher",null),fl([(0,l.RL)("encoder2State")],hl.prototype,"encoder2Watcher",null),hl=fl([(0,l.wA)({components:{ProgressBar:rl,CircleBar:ml}})],hl);var gl=hl,yl=gl,vl=(0,g.Z)(yl,Yc,qc,!1,null,null,null),bl=vl.exports,Sl=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"oscillation-window"},[e.pause?e._e():t("div",{staticClass:"green-indicator"}),e.pause?t("div",{staticClass:"red-indicator"}):e._e(),t("div",{staticClass:"header"},[t("div",{staticClass:"time-and-operation"},[t("div",{staticClass:"time-holder",on:{click:function(t){return e.$router.go(-1)}}},[e._v("12:39")]),t("div",{staticClass:"operation-container"},[e._v("Пауза...")])]),e._m(0)]),t("div",{staticClass:"center"},[e._m(1),t("div",{staticClass:"colorful-buttons"},[t("button",{staticClass:"parameter-button with-icon"},[e.state.type?t("div",{staticClass:"icon-wrapper"},[t("div",{staticClass:"a-icon"},[e._v("a")])]):e._e(),e._m(2)]),t("button",{staticClass:"parameter-button with-icon"},[e.state.width?t("div",{staticClass:"icon-wrapper"},[t("div",{staticClass:"a-icon"},[e._v("a")])]):e._e(),e._m(3)]),t("button",{staticClass:"parameter-button with-icon"},[e.state.period?t("div",{staticClass:"icon-wrapper"},[t("div",{staticClass:"a-icon"},[e._v("a")])]):e._e(),e._m(4)])]),e.state.type?t("div",{staticClass:"oscillation-select"},[e._m(5),e._m(6),e._m(7),e._m(8),e._m(9)]):e._e()]),t("div",{staticClass:"control-buttons"},[t("button",{staticClass:"control-button first",class:{active:e.state.type},on:{click:e.typeClick}},[t("div",{staticClass:"indicator"}),t("span",[e._v("Тип")])]),t("button",{staticClass:"control-button second",class:{active:e.state.width},on:{click:e.widthClick}},[t("div",{staticClass:"indicator"}),t("span",[e._v("Ширина")])]),t("button",{staticClass:"control-button third",class:{active:e.state.period},on:{click:e.periodClick}},[t("div",{staticClass:"indicator"}),t("span",[e._v("Период")])]),e.state.type?t("button",{staticClass:"control-button revert fourth",on:{click:e.openFileSelect}},[t("span",[e._v("Следующая")]),e._m(10)]):t("button",{staticClass:"control-button revert fourth increase"},[t("span",[e._v("Увеличить +")]),e._m(11)]),e.state.type?t("button",{staticClass:"control-button revert fifth"},[t("span",[e._v("Предыдущая")]),e._m(12)]):t("button",{staticClass:"control-button revert fifth decrease"},[t("span",[e._v("Уменьшить -")]),e._m(13)]),e._m(14)]),e.pause?t("div",{staticClass:"footer"},[e._m(15),e._m(16)]):e._e()])},wl=[function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"warnings-container"},[t("span",[e._v("WARNING")]),t("span",[e._v("NO GAS")]),t("span",[e._v("COLLISION")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"logo"},[t("img",{attrs:{src:s(9479),alt:""}}),t("span",[e._v("Параметры осцилляции:")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"button-info"},[t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(3322),width:"105"}})]),t("div",{staticClass:"underline"}),t("span",[e._v("Тип")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"button-info"},[t("span",[e._v("12.5")]),t("div",{staticClass:"underline"}),t("span",[e._v("Ширина, мм")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"button-info"},[t("span",[e._v("2.4")]),t("div",{staticClass:"underline"}),t("span",[e._v("Период, мм")])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("button",{staticClass:"oscillation-button no-osc first"},[t("img",{attrs:{src:s(7364),alt:""}}),t("span",[e._v("Нет осцилляции")]),t("hr")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("button",{staticClass:"oscillation-button triangular second"},[t("img",{attrs:{src:s(5762),alt:""}}),t("span",[e._v("Треугольная")]),t("hr")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("button",{staticClass:"oscillation-button sin third"},[t("img",{attrs:{src:s(7235),alt:""}}),t("span",[e._v("Синусоида")]),t("hr")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("button",{staticClass:"oscillation-button no-osc fourth"},[t("img",{attrs:{src:s(7364),alt:""}}),t("span",[e._v("Нет осцилляции")]),t("hr")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("button",{staticClass:"oscillation-button sin fifth"},[t("img",{attrs:{src:s(7235),alt:""}}),t("span",[e._v("Синусоида")]),t("hr")])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(8394),alt:""}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(6649),alt:""}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(3950),alt:""}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(1315),alt:""}})])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("button",{staticClass:"control-button revert sixth"},[t("span",[e._v("По умолчанию")]),t("div",{staticClass:"img-wrapper"},[t("img",{attrs:{src:s(9219),alt:""}})])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"file-info"},[t("div",{staticClass:"filename"},[t("img",{attrs:{src:s(5206),alt:""}}),t("span",[e._v("3D_Printer_test_fixed_stl_3rd_gen...")])]),t("div",{staticClass:"progress"},[t("img",{attrs:{src:s(9986),alt:""}}),t("span",[e._v("Прогресс: 45%")])])])},function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"progress-bar-wrapper"},[t("img",{attrs:{src:s(5493),alt:""}}),t("div",{staticClass:"progress-wrapper"},[t("div",{staticClass:"progress"})])])}],Pl=function(e,t,s,n){var i,r=arguments.length,o=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,s):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,s,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(r<3?i(o):r>3?i(t,s,o):i(t,s))||o);return r>3&&o&&Object.defineProperty(t,s,o),o};let _l=class extends l.w3{constructor(...e){super(...e),(0,c.Z)(this,"pause",!1),(0,c.Z)(this,"state",{type:!1,width:!0,period:!1})}typeClick(){const e=this.getFalseState();e.type=!0,this.state=e}widthClick(){const e=this.getFalseState();e.width=!0,this.state=e}periodClick(){const e=this.getFalseState();e.period=!0,this.state=e}getFalseState(){const e=JSON.parse(JSON.stringify(this.state));for(const t in e)e[t]=!1;return e}openFileSelect(){this.$router.push("/")}};_l=Pl([(0,l.wA)({components:{}})],_l);var Cl=_l,Al=Cl,xl=(0,g.Z)(Al,Sl,wl,!1,null,null,null),kl=xl.exports;r.ZP.use(Ac.ZP);const Fl=[{path:"/",name:"FileSelectWindow",component:Vc},{path:"/print",name:"PrintWindow",component:bl},{path:"/osc",name:"OscillationWindow",component:kl}],El=new Ac.ZP({mode:"history",base:"/",routes:Fl});var Dl=El;class Ol{constructor(e){(0,c.Z)(this,"connection",null),(0,c.Z)(this,"url","ws://localhost:8125"),(0,c.Z)(this,"reconnectingTimeout",1e3),(0,c.Z)(this,"debug",!1),(0,c.Z)(this,"stateTimeout",null),(0,c.Z)(this,"store",void 0),(0,c.Z)(this,"buttonsCommits",new Map([[1,"ourExtension/gpio/setFirstButton"],[2,"ourExtension/gpio/setSecondButton"],[3,"ourExtension/gpio/setThirdButton"],[4,"ourExtension/gpio/setFourthButton"],[5,"ourExtension/gpio/setFifthButton"],[6,"ourExtension/gpio/setSixthButton"]])),(0,c.Z)(this,"encodersCommits",new Map([[1,"ourExtension/gpio/setEncoder1"],[2,"ourExtension/gpio/setEncoder2"]])),this.store=e}connect(){this.connection=new WebSocket(this.url),this.connection.onopen=()=>{console.log("GPIO socket open"),this.store.commit("ourExtension/gpio/setSocketConnected",!0)},this.connection.onclose=e=>{this.debug&&console.log("СОКЕТ ЗАКРЫТ ",e),this.store.commit("ourExtension/gpio/setSocketConnected",!1),setTimeout(this.connect.bind(this),this.reconnectingTimeout)},this.connection.onerror=e=>{this.debug&&console.log("ОШИБКА СОКЕТА ",e)},this.connection.onmessage=e=>{const t=e;if(t.data){const e=JSON.parse(t.data);if(e.result&&e.result.event_type)if("button_event"===e.result.event_type){const t=e.result;this.handleButtonEvent(t)}else if("encoder_event"===e.result.event_type){const t=e.result;this.handleEncoderEvent(t)}}}}emit(){if(this.connection?.readyState===WebSocket.OPEN){const e=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,t=e(1e4,99999),s={id:t,method:"test_method",jsonrpc:"2.0"};this.connection.send(JSON.stringify(s)),console.log("Отправлен пакет")}else console.log("Ошибка отправки. Сокет не открыт")}handleButtonEvent(e){const t=e.button_number,s=this.buttonsCommits.get(t);let n=!1;if("key_down"===e.type&&(n=!0),s)this.store.commit(s,n);else{const e={message:"Неизвестный запрос с сервера на кнопку: "+t,type:"red"};ce.showInfoAlert(e)}}handleEncoderEvent(e){const t=e.encoder_number,s=this.encodersCommits.get(t);let n=!0;if("counter_clockwise"===e.type&&(n=!1),s){const e={emited:!0,isClockwise:n};this.store.commit(s,e),setTimeout((()=>{const e={emited:!1,isClockwise:n};this.store.commit(s,e)}),1)}else{const e={message:"Неизвестный запрос с сервера на энкодер: "+t,type:"red"};ce.showInfoAlert(e)}}}function Bl(){console.log("Попытка создать сокет");const e=new Ol(za);e.connect()}r.ZP.config.productionTip=!1,r.ZP.use(vc),r.ZP.use(Va,{}),r.ZP.use(Sc,{store:za}),Ka().then((e=>{r.ZP.use(Cc,{url:e.apiConfig.socketUrl,reconnectEnabled:!0,reconnectInterval:J.SOCKET_RETRY_DELAY,store:za}),Bl(),r.ZP.$socket.connect(e.apiConfig.socketUrl),new r.ZP({store:za,router:Dl,render:e=>e(Ue)}).$mount("#app")})).catch((e=>{i().debug("Error attempting to init App:",e)}))},7803:function(e,t,s){e.exports=s.p+"static/img/move_icon_disabled.d7cbeb8a.svg"},5302:function(e,t,s){e.exports=s.p+"static/img/print_icon_disabled.7fb2a882.svg"},7821:function(e,t,s){e.exports=s.p+"static/img/button_star.a7302e38.svg"},8135:function(e,t,s){e.exports=s.p+"static/img/big_cube.d6570a5e.svg"},1335:function(e,t,s){e.exports=s.p+"static/img/cancel.99b9f82a.svg"},9675:function(e,t,s){e.exports=s.p+"static/img/folder_button.2ef2c1b8.svg"},602:function(e,t,s){e.exports=s.p+"static/img/info.09ef5eb0.svg"},1265:function(e,t,s){e.exports=s.p+"static/img/menu.06d1889c.svg"},1643:function(e,t,s){e.exports=s.p+"static/img/select.50103dc3.svg"},2300:function(e,t,s){e.exports=s.p+"static/img/settings.6bc4510e.svg"},5150:function(e,t,s){e.exports=s.p+"static/img/small_cube.2268ceaa.svg"},7696:function(e,t,s){e.exports=s.p+"static/img/star.a254a33e.svg"},8731:function(e,t,s){e.exports=s.p+"static/img/upper_folder.36772e61.svg"},1315:function(e,t,s){e.exports=s.p+"static/img/decrease.50103dc3.svg"},6649:function(e,t,s){e.exports=s.p+"static/img/increase.0376da80.svg"},3322:function(e,t,s){e.exports=s.p+"static/img/many_triangular_active.01563880.svg"},9479:function(e,t,s){e.exports=s.p+"static/img/mini_settings.fbf8cf6a.svg"},8394:function(e,t,s){e.exports=s.p+"static/img/next.e35a99b9.svg"},7364:function(e,t,s){e.exports=s.p+"static/img/no_osc.214269a2.svg"},3950:function(e,t,s){e.exports=s.p+"static/img/prev.f59be00d.svg"},7235:function(e,t,s){e.exports=s.p+"static/img/sin.e3ac7e9a.svg"},5762:function(e,t,s){e.exports=s.p+"static/img/triangular.02bffef4.svg"},9219:function(e,t,s){e.exports=s.p+"static/img/arc.de59cd65.svg"},192:function(e,t,s){e.exports=s.p+"static/img/big_file_icon.02d3518d.svg"},5206:function(e,t,s){e.exports=s.p+"static/img/file_icon.4fb15b48.svg"},2880:function(e,t,s){e.exports=s.p+"static/img/heigth.a4a8ab79.svg"},7194:function(e,t,s){e.exports=s.p+"static/img/layer_settings.9e166ca6.svg"},4954:function(e,t,s){e.exports=s.p+"static/img/layers.75382d20.svg"},1394:function(e,t,s){e.exports=s.p+"static/img/move.84cf348e.svg"},3591:function(e,t,s){e.exports=s.p+"static/img/oscillation.2eac2a74.svg"},9986:function(e,t,s){e.exports=s.p+"static/img/progress.559cd757.svg"},5493:function(e,t,s){e.exports=s.p+"static/img/progress_bar.7d94e059.svg"},2437:function(e,t,s){e.exports=s.p+"static/img/settings.76addf80.svg"},9004:function(e,t,s){e.exports=s.p+"static/img/shift_minus.50103dc3.svg"},157:function(e,t,s){e.exports=s.p+"static/img/shift_plus.0376da80.svg"},2095:function(e){e.exports="data:image/png;base64,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"},6365:function(e){e.exports="data:image/png;base64,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"},9930:function(e){e.exports="data:image/png;base64,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"},6381:function(e){e.exports="data:image/png;base64,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"},7295:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAJCAYAAAC18OVOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB2SURBVHgBzZQBCoAgDEVnJ/DGeRVP5BH0Jr9JQgXOJTbowQRlbw7BETEAPMfOkXGS297TADOvJST0SdIFpl7rcEQQitt5uJ5QIgvFzTxXV1JwTKe4mbdxFCWnTJ4ve7WpqCTFyfN1D3/8fbfEgOfcCHg3bz73DjLfRu9eW7q+AAAAAElFTkSuQmCC"}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,n,i,r){if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],i=e[u][1],r=e[u][2];for(var a=!0,c=0;c<n.length;c++)(!1&r||o>=r)&&Object.keys(s.O).every((function(e){return s.O[e](n[c])}))?n.splice(c--,1):(a=!1,r<o&&(o=r));if(a){e.splice(u--,1);var l=i();void 0!==l&&(t=l)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,i,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){s.u=function(e){return"static/js/"+e+".5b4525c5.js"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.p="/"}(),function(){s.b=document.baseURI||self.location.href;var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,r,o=n[0],a=n[1],c=n[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(i in a)s.o(a,i)&&(s.m[i]=a[i]);if(c)var u=c(s)}for(t&&t(n);l<o.length;l++)r=o[l],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(u)},n=self["webpackChunkremote_controller_interface"]=self["webpackChunkremote_controller_interface"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(6184)}));n=s.O(n)})();
//# sourceMappingURL=app.9fdbc8a0.js.map